/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => UITweakerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian19 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  // Auto-hide elements
  titleBar: "show",
  fileExplorerNavHeader: "show",
  otherNavHeaders: "show",
  leftTabHeaders: "show",
  rightTabHeaders: "show",
  ribbonRevealOnHover: false,
  vaultSwitcher: "show",
  helpButton: "show",
  settingsButton: "show",
  // Simple toggles
  tabBar: false,
  tabBarHideWhenSingle: false,
  enableWindowDragging: false,
  newNoteButton: false,
  newFolderButton: false,
  sortOrderButton: false,
  autoRevealButton: false,
  collapseAllButton: false,
  readingModeButton: false,
  bookmarkedButton: false,
  searchSettingsButton: false,
  tabListIcon: "show",
  newTabIcon: "show",
  tabCloseButton: "show",
  statusBar: false,
  scrollBars: "show",
  leftSidebarToggleButton: "show",
  rightSidebarToggleButton: "show",
  tooltips: false,
  searchSuggestions: false,
  searchTermCounts: false,
  propertiesInReadingView: false,
  propertiesInHeading: false,
  addPropertyButton: false,
  deemphasizeProperties: false,
  instructions: false,
  // Mobile-specific
  mobileChevronsIcon: false,
  navigateBackButton: false,
  navigateForwardButton: false,
  quickSwitcherButton: false,
  mobileNewTabButton: false,
  openTabButton: false,
  ribbonMenuButton: false,
  swapMobileNewTabIcon: false,
  hideMobileTitle: false,
  hideMobileSyncIcon: false,
  // Mobile navigation menu positions
  navigateButtonPosition: "1",
  navigationButtonPosition: "2",
  quickSwitcherPosition: "3",
  newTabPosition: "4",
  openTabsPosition: "5",
  ribbonMenuPosition: "6",
  // Advanced
  vaultSwitcherBackgroundTransparency: 0.98,
  helpButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  syncButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  // Tab Bar
  tabBarCommands: [],
  // Status Bar
  statusBarItems: [],
  // Explorer
  explorerCommands: [],
  explorerButtonItems: [],
  // Native explorer button colors
  nativeExplorerButtonColors: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  },
  // Native explorer button icon overrides
  nativeExplorerButtonIcons: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  },
  // Property icon settings
  propertyIconItems: [],
  minimalPropertyIcons: false,
  showPropertyMenuActions: true
};

// src/uiManager.ts
var import_obsidian = require("obsidian");

// src/utils/cssUtils.ts
function getVaultSwitcherMask(transparency) {
  if (transparency >= 1) {
    return "none";
  }
  return "linear-gradient(to top, hsl(0, 0%, 0%) 0%, hsla(0, 0%, 0%, 0.99) 18.4%, hsla(0, 0%, 0%, 0.963) 33.7%, hsla(0, 0%, 0%, 0.92) 46.4%, hsla(0, 0%, 0%, 0.864) 56.7%, hsla(0, 0%, 0%, 0.796) 64.8%, hsla(0, 0%, 0%, 0.72) 71.2%, hsla(0, 0%, 0%, 0.637) 76.1%, hsla(0, 0%, 0%, 0.55) 79.9%, hsla(0, 0%, 0%, 0.46) 82.8%, hsla(0, 0%, 0%, 0.37) 85.2%, hsla(0, 0%, 0%, 0.283) 87.3%, hsla(0, 0%, 0%, 0.2) 89.6%, hsla(0, 0%, 0%, 0.124) 92.3%, hsla(0, 0%, 0%, 0.056) 95.6%, hsla(0, 0%, 0%, 0) 100%)";
}
function setCssProps(el, props) {
  Object.entries(props).forEach(([key, value]) => {
    el.style.setProperty(key, String(value));
  });
}

// src/uiManager.ts
var UIManager = class {
  constructor(plugin, settings) {
    this.revealListeners = /* @__PURE__ */ new Map();
    this.tabObserver = null;
    this.sidebarObserver = null;
    this.plugin = plugin;
    this.settings = settings;
  }
  updateSettings(settings) {
    this.settings = settings;
    this.applyStyles();
  }
  detectOS() {
    if (import_obsidian.Platform.isMacOS) {
      return "macos";
    }
    if (import_obsidian.Platform.isWin) {
      return "windows";
    }
    return "neutral";
  }
  applyStyles() {
    var _a;
    const body = document.body;
    this.applyVisibilityState(body, "auto-hide-title-bar", this.settings.titleBar, true);
    this.applyVisibilityState(body, "auto-hide-file-explorer-nav-header", this.settings.fileExplorerNavHeader);
    this.applyVisibilityState(body, "auto-hide-other-nav-headers", this.settings.otherNavHeaders);
    this.applyVisibilityState(body, "auto-hide-left-tab-headers", this.settings.leftTabHeaders);
    this.applyVisibilityState(body, "auto-hide-right-tab-headers", this.settings.rightTabHeaders);
    this.applyVisibilityState(body, "auto-hide-vault-switcher", this.settings.vaultSwitcher);
    this.applyVisibilityState(body, "hider-help-button", this.settings.helpButton);
    this.applyVisibilityState(body, "auto-hide-settings-button", this.settings.settingsButton);
    body.classList.toggle("auto-collapse-ribbon", this.settings.ribbonRevealOnHover);
    body.classList.toggle("ui-tweaker-sync-replacement-enabled", (_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled);
    body.classList.toggle("hider-tabs", this.settings.tabBar);
    if (this.settings.tabBar) {
      const os = this.detectOS();
      body.classList.remove("hider-tabs-windows", "hider-tabs-macos", "hider-tabs-neutral");
      body.classList.add(`hider-tabs-${os}`);
    } else {
      body.classList.remove("hider-tabs-windows", "hider-tabs-macos", "hider-tabs-neutral");
    }
    body.classList.toggle("auto-hide-tab-bar-when-single-tab", this.settings.tabBarHideWhenSingle);
    if (this.settings.tabBarHideWhenSingle) {
      const os = this.detectOS();
      body.classList.remove("auto-hide-tab-bar-windows", "auto-hide-tab-bar-macos", "auto-hide-tab-bar-neutral");
      body.classList.add(`auto-hide-tab-bar-${os}`);
      this.setupTabObserver();
    } else {
      this.cleanupTabObserver();
    }
    if (this.settings.tabBar && this.settings.enableWindowDragging) {
      const os = this.detectOS();
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
      body.classList.add(`enable-window-dragging-${os}`);
    } else {
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
    }
    body.classList.toggle("hide-button-new-note", this.settings.newNoteButton);
    body.classList.toggle("hide-button-new-folder", this.settings.newFolderButton);
    body.classList.toggle("hide-button-sort-order", this.settings.sortOrderButton);
    body.classList.toggle("hide-button-auto-reveal", this.settings.autoRevealButton);
    body.classList.toggle("hide-button-collapse-all", this.settings.collapseAllButton);
    body.classList.toggle("hide-button-reading-mode", this.settings.readingModeButton);
    body.classList.toggle("hide-button-bookmarked", this.settings.bookmarkedButton);
    body.classList.toggle("hide-button-search-settings", this.settings.searchSettingsButton);
    this.applyVisibilityState(body, "hide-tab-list-icon", this.settings.tabListIcon);
    this.applyVisibilityState(body, "hide-new-tab-icon", this.settings.newTabIcon);
    this.applyVisibilityState(body, "hide-tab-close-button", this.settings.tabCloseButton);
    body.classList.toggle("hider-status", this.settings.statusBar);
    this.applyVisibilityState(body, "hider-scroll", this.settings.scrollBars);
    if (this.settings.scrollBars === "reveal") {
      this.setupScrollbarRevealListeners();
    } else {
      this.removeScrollbarRevealListeners();
    }
    this.applyVisibilityState(body, "hider-left-sidebar-button", this.settings.leftSidebarToggleButton);
    this.applyVisibilityState(body, "hider-right-sidebar-button", this.settings.rightSidebarToggleButton);
    body.classList.toggle("hider-tooltips", this.settings.tooltips);
    body.classList.toggle("hider-search-suggestions", this.settings.searchSuggestions);
    body.classList.toggle("hider-search-counts", this.settings.searchTermCounts);
    body.classList.toggle("hider-meta", this.settings.propertiesInReadingView);
    body.classList.toggle("ui-tweaker-deemphasize-properties", this.settings.deemphasizeProperties);
    body.classList.toggle("metadata-heading-off", this.settings.propertiesInHeading);
    body.classList.toggle("metadata-add-property-off", this.settings.addPropertyButton);
    body.classList.toggle("hider-instructions", this.settings.instructions);
    body.classList.toggle("hide-icon-mobile-chevrons", this.settings.mobileChevronsIcon);
    body.classList.toggle("hide-button-mobile-navbar-action-back", this.settings.navigateBackButton);
    body.classList.toggle("hide-button-mobile-navbar-action-forward", this.settings.navigateForwardButton);
    body.classList.toggle("hide-button-mobile-navbar-action-quick-switcher", this.settings.quickSwitcherButton);
    body.classList.toggle("hide-button-mobile-navbar-action-new-tab", this.settings.mobileNewTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-tabs", this.settings.openTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-menu", this.settings.ribbonMenuButton);
    body.classList.toggle("swap-mobile-new-tab-icon", this.settings.swapMobileNewTabIcon);
    body.classList.toggle("hide-mobile-title", this.settings.hideMobileTitle);
    body.classList.toggle("hide-mobile-sync-icon", this.settings.hideMobileSyncIcon);
    const orderClasses = Array.from(body.classList).filter(
      (cls) => cls.startsWith("order-navbar-button-nth-child-")
    );
    orderClasses.forEach((cls) => body.classList.remove(cls));
    body.classList.add(`order-navbar-button-nth-child-1-${this.settings.navigateButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-2-${this.settings.navigationButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-3-${this.settings.quickSwitcherPosition}`);
    body.classList.add(`order-navbar-button-nth-child-4-${this.settings.newTabPosition}`);
    body.classList.add(`order-navbar-button-nth-child-5-${this.settings.openTabsPosition}`);
    body.classList.add(`order-navbar-button-nth-child-6-${this.settings.ribbonMenuPosition}`);
    const maskValue = getVaultSwitcherMask(this.settings.vaultSwitcherBackgroundTransparency);
    setCssProps(body, {
      "--auto-hide-vault-switcher-bg-transparency": String(this.settings.vaultSwitcherBackgroundTransparency),
      "--auto-hide-vault-switcher-mask": maskValue
    });
  }
  applyVisibilityState(body, className, state, useAlwaysShow = false) {
    if (useAlwaysShow) {
      body.classList.remove("always-show-title-bar", `${className}-hide`, `${className}-reveal`);
    } else {
      body.classList.remove(`${className}-show`, `${className}-hide`, `${className}-reveal`);
    }
    if (state === "show") {
      if (useAlwaysShow) {
        body.classList.add("always-show-title-bar");
      }
    } else if (state === "hide") {
      body.classList.add(`${className}-hide`);
    } else if (state === "reveal") {
      body.classList.add(`${className}-reveal`);
    }
  }
  setupScrollbarRevealListeners() {
    this.removeScrollbarRevealListeners();
    const isScrollable = (element) => {
      const style = window.getComputedStyle(element);
      const overflow = style.overflow + style.overflowY + style.overflowX;
      if (!overflow.includes("scroll") && !overflow.includes("auto")) {
        return false;
      }
      return element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;
    };
    const hoveredElements = /* @__PURE__ */ new Set();
    const handleMouseMove = (e) => {
      const target = e.target;
      if (!target) return;
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
      let element = target;
      while (element && element !== document.body && element !== document.documentElement) {
        if (isScrollable(element)) {
          const rect = element.getBoundingClientRect();
          const scrollbarArea = 25;
          const isInVerticalScrollbarArea = e.clientX >= rect.right - scrollbarArea && e.clientX <= rect.right;
          const isInHorizontalScrollbarArea = e.clientY >= rect.bottom - scrollbarArea && e.clientY <= rect.bottom;
          if (isInVerticalScrollbarArea || isInHorizontalScrollbarArea) {
            element.classList.add("ui-tweaker-scrollbar-hover");
            hoveredElements.add(element);
          }
        }
        element = element.parentElement;
      }
    };
    const handleMouseLeave = () => {
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    };
    document.addEventListener("mousemove", handleMouseMove, true);
    document.addEventListener("mouseleave", handleMouseLeave, true);
    this.revealListeners.set("scrollbar-reveal", () => {
      document.removeEventListener("mousemove", handleMouseMove, true);
      document.removeEventListener("mouseleave", handleMouseLeave, true);
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    });
  }
  removeScrollbarRevealListeners() {
    const cleanup = this.revealListeners.get("scrollbar-reveal");
    if (cleanup) {
      cleanup();
      this.revealListeners.delete("scrollbar-reveal");
    }
  }
  /**
   * Set up MutationObserver to detect single tab state and sidebar state
   * Ported from obsidian-oxygen-settings
   */
  setupTabObserver() {
    if (this.tabObserver) {
      return;
    }
    const checkSidebars = () => {
      var _a, _b;
      const workspace2 = this.plugin.app.workspace;
      const rightSidebarCollapsed = ((_a = workspace2.rightSplit) == null ? void 0 : _a.collapsed) !== false;
      const leftSidebarCollapsed = ((_b = workspace2.leftSplit) == null ? void 0 : _b.collapsed) !== false;
      document.body.classList.toggle("is-right-sidebar-collapsed", rightSidebarCollapsed);
      document.body.classList.toggle("is-left-sidebar-collapsed", leftSidebarCollapsed);
    };
    let checkTimeout = null;
    const debouncedCheck = () => {
      if (checkTimeout) {
        clearTimeout(checkTimeout);
      }
      checkTimeout = window.setTimeout(() => {
        checkSidebars();
        checkTimeout = null;
      }, 150);
    };
    setTimeout(checkSidebars, 100);
    this.tabObserver = new MutationObserver(() => {
      debouncedCheck();
    });
    const workspace = document.querySelector(".workspace");
    if (workspace) {
      this.tabObserver.observe(workspace, {
        childList: true,
        subtree: true
      });
    }
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        debouncedCheck();
      })
    );
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("resize", () => {
        debouncedCheck();
      })
    );
    const workspaceEl = document.querySelector(".workspace");
    if (workspaceEl) {
      this.sidebarObserver = new MutationObserver((mutations) => {
        let shouldCheck = false;
        mutations.forEach((mutation) => {
          if (mutation.type === "attributes" && mutation.attributeName === "class") {
            shouldCheck = true;
          }
        });
        if (shouldCheck) {
          checkSidebars();
          debouncedCheck();
        }
      });
      this.sidebarObserver.observe(workspaceEl, {
        attributes: true,
        attributeFilter: ["class"]
      });
    }
  }
  /**
   * Cleanup tab observer
   */
  cleanupTabObserver() {
    if (this.tabObserver) {
      this.tabObserver.disconnect();
      this.tabObserver = null;
    }
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
      this.sidebarObserver = null;
    }
    document.body.classList.remove("is-right-sidebar-collapsed", "is-left-sidebar-collapsed");
    document.body.classList.remove("auto-hide-tab-bar-windows", "auto-hide-tab-bar-macos", "auto-hide-tab-bar-neutral");
  }
  cleanup() {
    this.cleanupTabObserver();
    this.revealListeners.forEach((cleanup) => cleanup());
    this.revealListeners.clear();
    const body = document.body;
    const classesToRemove = [];
    body.classList.forEach((className) => {
      if (className.startsWith("ui-tweaker-") || className.startsWith("auto-hide-") || className.startsWith("hider-") || className.startsWith("hide-") || className.startsWith("metadata-") || className.startsWith("order-navbar-button-") || className.startsWith("enable-window-dragging-") || className === "auto-collapse-ribbon" || className === "swap-mobile-new-tab-icon" || className === "always-show-title-bar") {
        classesToRemove.push(className);
      }
    });
    classesToRemove.forEach((className) => body.classList.remove(className));
    body.style.removeProperty("--auto-hide-vault-switcher-bg-transparency");
    body.style.removeProperty("--auto-hide-vault-switcher-mask");
    body.style.removeProperty("--native-button-color-new-note");
    body.style.removeProperty("--native-button-color-new-folder");
    body.style.removeProperty("--native-button-color-sort-order");
    body.style.removeProperty("--native-button-color-auto-reveal");
    body.style.removeProperty("--native-button-color-collapse-all");
  }
};

// src/commands.ts
function registerCommands(context) {
  const { plugin, settings, saveSettings, refresh } = context;
  registerToggleCommand(plugin, "toggle-title-bar", "Toggle title bar", async () => {
    settings.titleBar = toggleVisibilityState(settings.titleBar);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-file-explorer-nav-header", "Toggle file explorer navigation header", async () => {
    settings.fileExplorerNavHeader = toggleVisibilityState(settings.fileExplorerNavHeader);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-other-nav-headers", "Toggle other navigation headers", async () => {
    settings.otherNavHeaders = toggleVisibilityState(settings.otherNavHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-tab-headers", "Toggle left tab headers", async () => {
    settings.leftTabHeaders = toggleVisibilityState(settings.leftTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-tab-headers", "Toggle right tab headers", async () => {
    settings.rightTabHeaders = toggleVisibilityState(settings.rightTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-vault-switcher", "Toggle vault switcher", async () => {
    settings.vaultSwitcher = toggleVisibilityState(settings.vaultSwitcher);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-help-button", "Toggle help button", async () => {
    settings.helpButton = toggleVisibilityState(settings.helpButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-settings-button", "Toggle settings button", async () => {
    settings.settingsButton = toggleVisibilityState(settings.settingsButton);
    await saveSettings();
    refresh();
  });
  plugin.addCommand({
    id: "open-settings",
    name: "Open settings",
    callback: () => {
      var _a, _b;
      const app = plugin.app;
      const settingApi = app.setting;
      if (settingApi) {
        (_a = settingApi.open) == null ? void 0 : _a.call(settingApi);
        const pluginInstance = plugin;
        if (((_b = pluginInstance.settingTab) == null ? void 0 : _b.id) && settingApi.openTabById) {
          settingApi.openTabById(pluginInstance.settingTab.id);
        }
      }
    }
  });
  registerToggleCommand(plugin, "toggle-tab-bar", "Toggle tab bar", async () => {
    settings.tabBar = !settings.tabBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-bar-single", "Toggle hide tab bar when only one tab", async () => {
    settings.tabBarHideWhenSingle = !settings.tabBarHideWhenSingle;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-note-button", "Toggle new note button", async () => {
    settings.newNoteButton = !settings.newNoteButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-folder-button", "Toggle new folder button", async () => {
    settings.newFolderButton = !settings.newFolderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-sort-order-button", "Toggle sort order button", async () => {
    settings.sortOrderButton = !settings.sortOrderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-auto-reveal-button", "Toggle auto reveal button", async () => {
    settings.autoRevealButton = !settings.autoRevealButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-collapse-all-button", "Toggle collapse all button", async () => {
    settings.collapseAllButton = !settings.collapseAllButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-reading-mode-button", "Toggle reading mode button", async () => {
    settings.readingModeButton = !settings.readingModeButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-settings-button", "Toggle search settings button", async () => {
    settings.searchSettingsButton = !settings.searchSettingsButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-list-icon", "Toggle tab list icon", async () => {
    settings.tabListIcon = toggleVisibilityState(settings.tabListIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-tab-icon", "Toggle new tab icon", async () => {
    settings.newTabIcon = toggleVisibilityState(settings.newTabIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-close-button", "Toggle tab close button", async () => {
    settings.tabCloseButton = toggleVisibilityState(settings.tabCloseButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-status-bar", "Toggle status bar", async () => {
    settings.statusBar = !settings.statusBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-scroll-bars", "Toggle scroll bars", async () => {
    settings.scrollBars = toggleVisibilityState(settings.scrollBars);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-sidebar-toggle-button", "Toggle left sidebar toggle button", async () => {
    settings.leftSidebarToggleButton = toggleVisibilityState(settings.leftSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-sidebar-toggle-button", "Toggle right sidebar toggle button", async () => {
    settings.rightSidebarToggleButton = toggleVisibilityState(settings.rightSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tooltips", "Toggle tooltips", async () => {
    settings.tooltips = !settings.tooltips;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-suggestions", "Toggle search suggestions", async () => {
    settings.searchSuggestions = !settings.searchSuggestions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-term-counts", "Toggle search term counts", async () => {
    settings.searchTermCounts = !settings.searchTermCounts;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-reading-view", "Toggle properties in Reading view", async () => {
    settings.propertiesInReadingView = !settings.propertiesInReadingView;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-deemphasize-properties", "Toggle deemphasize properties", async () => {
    settings.deemphasizeProperties = !settings.deemphasizeProperties;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-heading", "Toggle properties heading", async () => {
    settings.propertiesInHeading = !settings.propertiesInHeading;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-add-property-button", "Toggle add property button", async () => {
    settings.addPropertyButton = !settings.addPropertyButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-instructions", "Toggle instructions", async () => {
    settings.instructions = !settings.instructions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-chevrons-icon", "Toggle mobile chevrons icon", async () => {
    settings.mobileChevronsIcon = !settings.mobileChevronsIcon;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-back-button", "Toggle navigate back button", async () => {
    settings.navigateBackButton = !settings.navigateBackButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-forward-button", "Toggle navigate forward button", async () => {
    settings.navigateForwardButton = !settings.navigateForwardButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-quick-switcher-button", "Toggle quick switcher button", async () => {
    settings.quickSwitcherButton = !settings.quickSwitcherButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-new-tab-button", "Toggle mobile new tab button", async () => {
    settings.mobileNewTabButton = !settings.mobileNewTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-open-tab-button", "Toggle open tab button", async () => {
    settings.openTabButton = !settings.openTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-ribbon-menu-button", "Toggle ribbon menu button", async () => {
    settings.ribbonMenuButton = !settings.ribbonMenuButton;
    await saveSettings();
    refresh();
  });
}
function registerToggleCommand(plugin, id, name, callback) {
  plugin.addCommand({
    id,
    name,
    callback
  });
}
function toggleVisibilityState(currentState) {
  if (currentState === "reveal") {
    return "hide";
  }
  return currentState === "show" ? "hide" : "show";
}

// src/ui/SettingsTab.ts
var import_obsidian11 = require("obsidian");

// src/ui/common/TabRenderer.ts
var import_obsidian2 = require("obsidian");
var TabRenderer = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
  }
  getSettings() {
    return this.plugin.settings;
  }
  async saveSettings() {
    await this.plugin.saveSettings();
    this.plugin.refresh();
  }
  createDropdownSetting(container, name, description, value, options, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addDropdown((dropdown) => {
      Object.entries(options).forEach(([key, label]) => {
        dropdown.addOption(key, label);
      });
      dropdown.setValue(value);
      dropdown.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return dropdown;
    });
  }
  createToggleSetting(container, name, description, value, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addToggle((toggle) => {
      toggle.setValue(value);
      toggle.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return toggle;
    });
  }
  createSliderSetting(container, name, description, value, min, max, step, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addSlider((slider) => {
      slider.setLimits(min, max, step).setValue(value).setDynamicTooltip().onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return slider;
    });
  }
};

// src/utils/settings-compat.ts
var import_obsidian3 = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian3.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian3.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/modals/CommandPickerModal.ts
var import_obsidian4 = require("obsidian");
var CommandPickerModal = class extends import_obsidian4.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
      }
    }
    return Array.from(commandMap.values()).sort((a, b) => a.name.localeCompare(b.name));
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
};

// src/modals/IconPickerModal.ts
var import_obsidian5 = require("obsidian");
var getIconList = () => {
  if (import_obsidian5.requireApiVersion && (0, import_obsidian5.requireApiVersion)("1.7.3") && import_obsidian5.getIconIds) {
    try {
      return (0, import_obsidian5.getIconIds)();
    } catch (e) {
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian5.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
    this.close();
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    const iconSpan = aux.createSpan({ cls: "suggestion-flair ui-tweaker-icon-no-bg" });
    (0, import_obsidian5.setIcon)(iconSpan, item.id);
  }
};

// src/ui/tabs/HiderTab.ts
var HiderTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const generalGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    this.addVisibilitySetting(
      generalGroup,
      "Title bar",
      "Hide title bar until hover. Turn off to always show.",
      "titleBar"
    );
    this.addVisibilitySetting(
      generalGroup,
      "File explorer nav header",
      "Hide file explorer navigation header until hover. Elegantly reveals on hover.",
      "fileExplorerNavHeader"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Other nav headers",
      "Hide navigation headers for tag, backlinks, outgoing links, outline, and bookmarks panes until hover.",
      "otherNavHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Left tab headers",
      "Hide left panel tab headers until hover. Elegantly reveals on hover.",
      "leftTabHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Right tab headers",
      "Hide right panel tab headers until hover. Elegantly reveals on hover.",
      "rightTabHeaders"
    );
    generalGroup.addSetting((setting) => {
      setting.setName("Collapse ribbon").setDesc("Collapse the left ribbon to a thin strip until hover. Elegantly expands on hover.").addToggle(
        (toggle) => toggle.setValue(this.getSettings().ribbonRevealOnHover).onChange((value) => {
          this.getSettings().ribbonRevealOnHover = value;
          void this.saveSettings();
        })
      );
    });
    const navigationGroup = createSettingsGroup(container, "Navigation", "ui-tweaker");
    this.addToggleSetting(navigationGroup, "Hide tab bar", "Hides the tab container at the top of the window.", "tabBar");
    this.addToggleSetting(navigationGroup, "Make top of window draggable without tab bar", 'Enables window dragging from the top of the window when the tab bar is hidden. Only works when "Hide tab bar" is enabled.', "enableWindowDragging");
    this.addToggleSetting(navigationGroup, "Hide tab header when only one tab", "Hide the tab bar automatically when only 1 tab is open.", "tabBarHideWhenSingle");
    this.addToggleSetting(navigationGroup, 'Hide "Reading mode" button', 'Hide "Reading mode" button in view headers.', "readingModeButton");
    this.addToggleSetting(navigationGroup, 'Hide "Bookmarked" button', 'Hide "Bookmarked" button in view headers.', "bookmarkedButton");
    this.addToggleSetting(navigationGroup, 'Hide "Search settings" button', 'Hide "Search settings" button in search pane.', "searchSettingsButton");
    const vaultProfileGroup = createSettingsGroup(container, "Vault profile area", "ui-tweaker");
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Vault switcher",
      "Hide vault switcher until hover. Does not work when vault name is hidden.",
      "vaultSwitcher"
    );
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Help button",
      "Hide help button until hover. Elegantly reveals on hover.",
      "helpButton"
    );
    this.renderHelpButtonReplacement(container, vaultProfileGroup);
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Settings button",
      "Hide settings button until hover. Elegantly reveals on hover.",
      "settingsButton"
    );
    vaultProfileGroup.addSetting((setting) => {
      setting.setName("Vault switcher background transparency").setDesc("Adjust the transparency of the vault switcher background when hidden. Range: 0 (fully transparent) to 1 (fully opaque).").addSlider(
        (slider) => slider.setLimits(0, 1, 0.01).setValue(this.getSettings().vaultSwitcherBackgroundTransparency).setDynamicTooltip().onChange((value) => {
          this.getSettings().vaultSwitcherBackgroundTransparency = value;
          void this.saveSettings();
        })
      );
    });
    const tabIconsGroup = createSettingsGroup(container, "Tab icons", "ui-tweaker");
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab list icon",
      "Hides the tab list icon. You can still access tabs via other methods.",
      "tabListIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide new tab icon",
      "Hides the new tab icon. You can still create new tabs with Ctrl+T (Cmd+T on Mac).",
      "newTabIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab close button",
      "Hides the close button on tabs. You can still close tabs with middle click or other methods.",
      "tabCloseButton"
    );
    const statusUIGroup = createSettingsGroup(container, "Status & UI elements", "ui-tweaker");
    this.addToggleSetting(statusUIGroup, "Hide status bar", "Hides word count, character count and backlink count.", "statusBar");
    this.addVisibilitySetting(
      statusUIGroup,
      "Scroll bars",
      "Control scrollbar visibility. Reveal option hides scrollbars until hover.",
      "scrollBars"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide left sidebar toggle button",
      "Hides the left sidebar toggle button.",
      "leftSidebarToggleButton"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide right sidebar toggle button",
      "Hides the right sidebar toggle button.",
      "rightSidebarToggleButton"
    );
    this.addToggleSetting(statusUIGroup, "Hide tooltips", "Hides all tooltips.", "tooltips");
    this.addToggleSetting(statusUIGroup, "Hide instructions", "Hides instructional tips in modals.", "instructions");
    const searchGroup = createSettingsGroup(container, "Search", "ui-tweaker");
    this.addToggleSetting(searchGroup, "Hide search suggestions", "Hides suggestions in search pane.", "searchSuggestions");
    this.addToggleSetting(searchGroup, "Hide count of search term matches", "Hides the number of matches within each search result.", "searchTermCounts");
    const propertiesGroup = createSettingsGroup(container, "Properties", "ui-tweaker");
    this.addToggleSetting(propertiesGroup, "Hide properties in Reading view", "Hides the properties section in Reading view.", "propertiesInReadingView");
    this.addToggleSetting(propertiesGroup, "Deemphasize properties", "Softens visual prominence of file properties. They become more visible on hover.", "deemphasizeProperties");
    this.addToggleSetting(propertiesGroup, "Hide properties heading", 'Hide "Properties" heading above properties.', "propertiesInHeading");
    this.addToggleSetting(propertiesGroup, 'Hide "Add property" button', 'Hide "Add property" button below properties.', "addPropertyButton");
  }
  addVisibilitySetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "show";
        dropdown.addOption("show", "Show").addOption("hide", "Hide").addOption("reveal", "Reveal").setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  renderHelpButtonReplacement(container, group) {
    const settings = this.getSettings();
    if (!settings.helpButtonReplacement) {
      settings.helpButtonReplacement = {
        enabled: false,
        commandId: "",
        iconId: "wrench"
      };
    }
    const dependentSettings = [];
    group.addSetting((setting) => {
      setting.setName("Replace help button with custom action").setDesc("Replace the help button with a custom icon and command. This will hide the original help button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.helpButtonReplacement.enabled).onChange((value) => {
          settings.helpButtonReplacement.enabled = value;
          dependentSettings.forEach((el) => {
            el.style.display = value ? "" : "none";
          });
          void this.saveSettings();
        })
      );
    });
    const getCommandName = (commandId) => {
      if (!commandId) return "Select command...";
      try {
        const commandRegistry = this.app.commands;
        if (commandRegistry && typeof commandRegistry.listCommands === "function") {
          const commands = commandRegistry.listCommands();
          const command = commands.find((cmd) => cmd && cmd.id === commandId);
          if (command == null ? void 0 : command.name) {
            return command.name;
          }
        }
      } catch (e) {
      }
      return "Select command...";
    };
    const getIconName = (iconId) => {
      if (!iconId) return "";
      return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
    };
    group.addSetting((setting) => {
      dependentSettings.push(setting.settingEl);
      setting.settingEl.style.display = settings.helpButtonReplacement.enabled ? "" : "none";
      setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
        (button) => button.setButtonText(getCommandName(settings.helpButtonReplacement.commandId)).onClick(() => {
          const modal = new CommandPickerModal(this.app, (commandId) => {
            settings.helpButtonReplacement.commandId = commandId;
            button.setButtonText(getCommandName(commandId));
            void this.saveSettings();
          });
          modal.open();
        })
      );
    });
    group.addSetting((setting) => {
      dependentSettings.push(setting.settingEl);
      setting.settingEl.style.display = settings.helpButtonReplacement.enabled ? "" : "none";
      setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
        (button) => button.setButtonText(getIconName(settings.helpButtonReplacement.iconId) || "Select icon...").onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            settings.helpButtonReplacement.iconId = iconId;
            button.setButtonText(getIconName(iconId));
            void this.saveSettings();
          });
          modal.open();
        })
      );
    });
  }
};

// src/ui/tabs/TabBarTab.ts
var import_obsidian7 = require("obsidian");

// src/modals/NamePickerModal.ts
var import_obsidian6 = require("obsidian");
var NamePickerModal = class extends import_obsidian6.Modal {
  constructor(app, defaultName, onSubmit) {
    super(app);
    this.defaultName = defaultName;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Enter name" });
    const inputContainer = contentEl.createDiv();
    const input = new import_obsidian6.TextComponent(inputContainer);
    input.setValue(this.defaultName);
    input.setPlaceholder("Enter custom name...");
    input.inputEl.addClass("ui-tweaker-name-input");
    input.inputEl.select();
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", { text: "OK", cls: "mod-cta" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    const handleSubmit = () => {
      const value = input.getValue().trim();
      if (value) {
        this.onSubmit(value);
        this.close();
      }
    };
    submitButton.addEventListener("click", handleSubmit);
    cancelButton.addEventListener("click", () => this.close());
    input.inputEl.addEventListener("keydown", (evt) => {
      if (evt.key === "Enter") {
        evt.preventDefault();
        handleSubmit();
      }
      if (evt.key === "Escape") {
        evt.preventDefault();
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/chooseCommand.ts
async function chooseNewCommand(plugin) {
  return new Promise((resolve, reject) => {
    let commandSelected = false;
    let iconSelected = false;
    const commandModal = new CommandPickerModal(plugin.app, (commandId) => {
      var _a;
      commandSelected = true;
      const commands = plugin.app.commands;
      const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[commandId];
      setTimeout(() => {
        commandModal.close();
      }, 0);
      const displayName = (command == null ? void 0 : command.name) || "Custom Command";
      const iconModal = new IconPickerModal(plugin.app, (iconId) => {
        iconSelected = true;
        iconModal.close();
        setTimeout(() => {
          let nameSelected = false;
          const nameModal = new NamePickerModal(plugin.app, displayName, (customName) => {
            nameSelected = true;
            nameModal.close();
            resolve({
              id: commandId,
              icon: iconId,
              name: customName,
              displayName,
              mode: "any"
            });
          });
          nameModal.onClose = () => {
            setTimeout(() => {
              if (!nameSelected && iconSelected && commandSelected) {
                reject(new Error("No name selected"));
              }
            }, 0);
          };
          nameModal.open();
        }, 100);
      });
      iconModal.onClose = () => {
        setTimeout(() => {
          if (!iconSelected && commandSelected) {
            reject(new Error("No icon selected"));
          }
        }, 0);
      };
      setTimeout(() => {
        iconModal.open();
      }, 100);
    });
    commandModal.onClose = () => {
      setTimeout(() => {
        if (!commandSelected) {
          reject(new Error("No command selected"));
        }
      }, 0);
    };
    commandModal.open();
  });
}

// src/ui/tabs/TabBarTab.ts
function arrayMoveMutable(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var TabBarTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.tabBarCommands) {
      settings.tabBarCommands = [];
    }
    settings.tabBarCommands.forEach((pair, index) => {
      this.renderCommandItem(container, pair, index);
    });
    if (settings.tabBarCommands.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the tab bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.tabBarManager) == null ? void 0 : _a.addCommand(pair));
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian7.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.tabBarCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            settings.tabBarCommands.splice(index, 1);
            await this.saveSettings();
            await ((_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.removeCommand(pair));
            this.render(container);
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this command appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device");
        const currentValue = pair.mode === "any" || pair.mode === "desktop" || pair.mode === "mobile" ? pair.mode : appId;
        dropdown.setValue(currentValue);
        dropdown.onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          if (value === "#000000") {
            pair.color = void 0;
          } else {
            pair.color = value;
          }
          const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
          if (iconButton) {
            if (pair.color && pair.color !== "#000000") {
              setCssProps(iconButton, { color: pair.color });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Show only on these file types").setDesc('Show button only on specified file types or views. Enter comma-separated file extensions (like "md,mdx") or view types for views without files (like "{{graph}}"). Leave empty to show on all. Use {{graph}} for graph view and {{empty}} for blank/new tabs.').addText((text) => {
        var _a;
        text.setPlaceholder("Example: md, mdx");
        text.setValue((_a = pair.showOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.showOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Never show on these file types").setDesc('Hide button on specified file types or views. Enter comma-separated file extensions (like "jpg,png") or view types for views without files (like "{{graph}}"). Leave empty to allow all. Use {{graph}} for graph view and {{empty}} for blank/new tabs.').addText((text) => {
        var _a;
        text.setPlaceholder("{{graph}},{{empty}}");
        text.setValue((_a = pair.hideOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.hideOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/StatusBarTab.ts
var import_obsidian8 = require("obsidian");
function arrayMoveMutable2(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var dragging = false;
var StatusBarTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const settings = this.getSettings();
    this.container = container;
    if (!settings.statusBarItems) {
      settings.statusBarItems = [];
    }
    const wrapper = container.createDiv("ui-tweaker-status-bar-rows-wrapper");
    const rowsContainer = wrapper.createDiv("ui-tweaker-status-bar-rows-container");
    settings.statusBarItems.forEach((item, index) => {
      if (item.type === "existing") {
        this.renderExistingRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      } else {
        this.renderCustomRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      }
    });
    if (settings.statusBarItems.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the status bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian8.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.addCustomCommand(pair));
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.render(container);
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  /**
   * Render an existing status bar item row (EXACTLY like Status Bar Organizer)
   */
  renderExistingRow(rowsContainer, item, settings, index, totalItems) {
    var _a;
    const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
    const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
    const exists = !!actualElement;
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (!exists) entry.addClass("ui-tweaker-status-bar-row-disabled");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    titleSpan.textContent = item.name;
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (exists && actualElement) {
      const cloned = actualElement.cloneNode(true);
      setCssProps(cloned, { display: "", visibility: "", opacity: "" });
      cloned.querySelectorAll("*").forEach((child) => {
        setCssProps(child, { display: "", visibility: "", opacity: "" });
      });
      previewSpan.appendChild(cloned);
    }
    entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    entry.createSpan("ui-tweaker-status-bar-row-md-only");
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    const lockIcon = item.sticky === "right" ? "corner-right-down" : item.sticky === "left" ? "corner-right-up" : "unlock";
    lockSpan.setAttribute("aria-label", item.sticky ? `Pinned to ${item.sticky === "right" ? "End" : "Start"}` : "Unlocked - click to pin to end");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, lockIcon);
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Render a custom status bar item row (EXACTLY like Status Bar Organizer, but with editable name)
   */
  renderCustomRow(rowsContainer, item, settings, index, totalItems) {
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    const displayName = item.displayName || item.name;
    const nameText = item.name === displayName ? item.name : `${item.name} (${displayName})`;
    titleSpan.textContent = nameText;
    titleSpan.addEventListener("dblclick", () => {
      const currentName = item.name;
      const input = document.createElement("input");
      input.type = "text";
      input.value = currentName;
      input.addClass("mod-text-input");
      setCssProps(input, { width: "100%" });
      titleSpan.empty();
      titleSpan.appendChild(input);
      input.focus();
      input.select();
      const saveName = () => {
        var _a;
        let newName = input.value.trim();
        if (!newName) newName = currentName;
        item.name = newName;
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.updateButtonNames();
        titleSpan.textContent = newName === displayName ? newName : `${newName} (${displayName})`;
        void this.saveSettings();
      };
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          saveName();
        } else if (e.key === "Escape") {
          e.preventDefault();
          titleSpan.textContent = nameText;
        }
      });
      input.addEventListener("blur", saveName);
    });
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.icon) {
      const previewIcon = previewSpan.createSpan("status-bar-item mod-clickable");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    const resetColorContainer = entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    if (item.color) {
      const resetButton = resetColorContainer.createEl("button", {
        cls: "clickable-icon ui-tweaker-color-reset",
        attr: { "aria-label": "Reset to default color" }
      });
      (0, import_obsidian8.setIcon)(resetButton, "rotate-cw");
      resetButton.addEventListener("click", (e) => {
        var _a;
        e.stopPropagation();
        item.color = void 0;
        const previewIcon = previewSpan.querySelector(".clickable-icon");
        if (previewIcon) {
          previewIcon.style.removeProperty("color");
        }
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
        void this.saveSettings();
        if (this.container) {
          this.render(this.container);
        }
      });
    }
    const colorPickerContainer = entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    const colorPickerEl = colorPickerContainer.createDiv();
    const colorPicker = new import_obsidian8.ColorComponent(colorPickerEl);
    colorPicker.setValue(item.color || "#000000");
    colorPicker.onChange((value) => {
      var _a;
      if (value === "#000000") {
        item.color = void 0;
      } else {
        item.color = value;
      }
      const previewIcon = previewSpan.querySelector(".clickable-icon");
      if (previewIcon) {
        if (item.color && item.color !== "#000000") {
          setCssProps(previewIcon, { color: item.color });
        } else {
          previewIcon.style.removeProperty("color");
        }
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
      if (this.container) {
        this.render(this.container);
      }
    });
    const mdOnlySpan = entry.createSpan("ui-tweaker-status-bar-row-md-only");
    mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
    mdOnlySpan.addEventListener("click", (e) => {
      var _a;
      e.stopPropagation();
      item.mdOnly = !item.mdOnly;
      (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
      mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
      if (item.mdOnly) {
        mdOnlySpan.addClass("ui-tweaker-active");
      } else {
        mdOnlySpan.removeClass("ui-tweaker-active");
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
    });
    (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
    if (item.mdOnly) {
      mdOnlySpan.addClass("ui-tweaker-active");
    }
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    const lockIcon = item.sticky === "right" ? "corner-right-down" : item.sticky === "left" ? "corner-right-up" : "unlock";
    lockSpan.setAttribute("aria-label", item.sticky ? `Pinned to ${item.sticky === "right" ? "End" : "Start"}` : "Unlocked - click to pin to end");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, lockIcon);
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Toggle lock position based on current position
   */
  toggleLock(item, lockSpan, currentIndex, totalItems, rowsContainer, settings) {
    var _a;
    if (!item.sticky) {
      item.sticky = "right";
      const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
      if (oldIndex !== -1) {
        arrayMoveMutable2(settings.statusBarItems, oldIndex, settings.statusBarItems.length - 1);
      }
    } else if (item.sticky === "right") {
      item.sticky = "left";
      const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
      if (oldIndex !== -1) {
        arrayMoveMutable2(settings.statusBarItems, oldIndex, 0);
      }
    } else {
      item.sticky = false;
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
    if (this.container) {
      this.render(this.container);
    }
  }
  /**
   * Toggle visibility (exactly like Status Bar Organizer)
   */
  toggleVisibility(item, visibilitySpan, entry) {
    var _a;
    item.hidden = !item.hidden;
    if (item.hidden) {
      entry.addClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye-off");
      visibilitySpan.setAttribute("aria-label", "Hidden - click to show");
    } else {
      entry.removeClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye");
      visibilitySpan.setAttribute("aria-label", "Visible - click to hide");
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
  }
  /**
   * Remove item (exactly like Status Bar Organizer)
   */
  async removeItem(rowsContainer, item, settings) {
    var _a;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (entry) {
      rowsContainer.removeChild(entry);
    }
    await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.removeItem(item));
    void this.saveSettings();
  }
  /**
   * Handle mouse down for dragging (exactly like Status Bar Organizer)
   */
  handleMouseDown(event, rowsContainer, item, settings) {
    var _a, _b;
    if (dragging) return;
    dragging = true;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (!entry) return;
    const stationaryRow = entry;
    stationaryRow.addClass("ui-tweaker-status-bar-row-clone");
    const movableRow = document.createElement("div");
    movableRow.addClass("ui-tweaker-status-bar-row");
    movableRow.addClass("ui-tweaker-status-bar-row-drag");
    setCssProps(movableRow, {
      display: "grid",
      gridTemplateColumns: "1.25em 0.5fr 0.8fr 2em 2em 2em 2em 2em 2em"
    });
    if (item.hidden) movableRow.addClass("ui-tweaker-status-bar-row-hidden");
    if (item.type === "existing") {
      const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
      if (!actualElement) movableRow.addClass("ui-tweaker-status-bar-row-disabled");
    }
    const wrapper = rowsContainer.closest(".ui-tweaker-status-bar-rows-wrapper") || rowsContainer.parentElement || rowsContainer;
    wrapper.appendChild(movableRow);
    const containerX = wrapper.getBoundingClientRect().left;
    const containerY = wrapper.getBoundingClientRect().top;
    const stationaryRect = stationaryRow.getBoundingClientRect();
    setCssProps(movableRow, {
      position: "absolute",
      left: stationaryRect.left - containerX + "px",
      top: stationaryRect.top - containerY + "px",
      width: stationaryRow.offsetWidth + "px"
    });
    movableRow.createSpan("ui-tweaker-status-bar-row-handle");
    const dragTitle = movableRow.createSpan("ui-tweaker-status-bar-row-title");
    dragTitle.textContent = item.name;
    const dragPreview = movableRow.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.type === "existing") {
      const statusBarContainer = (_b = this.plugin.app.statusBar) == null ? void 0 : _b.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
      if (actualElement) {
        const cloned = actualElement.cloneNode(true);
        cloned.removeAttribute("aria-label");
        cloned.removeAttribute("title");
        cloned.querySelectorAll("[aria-label], [title]").forEach((el) => {
          el.removeAttribute("aria-label");
          el.removeAttribute("title");
        });
        dragPreview.appendChild(cloned);
      }
    } else if (item.icon) {
      const previewIcon = dragPreview.createSpan("status-bar-item clickable-icon");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      previewIcon.removeAttribute("aria-label");
      previewIcon.removeAttribute("title");
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    movableRow.createSpan("ui-tweaker-status-bar-row-reset-color");
    movableRow.createSpan("ui-tweaker-status-bar-row-color-picker");
    movableRow.createSpan("ui-tweaker-status-bar-row-md-only");
    const dragLock = movableRow.createSpan("ui-tweaker-status-bar-row-lock");
    const lockIcon = item.sticky === "right" ? "corner-right-down" : item.sticky === "left" ? "corner-right-up" : "unlock";
    (0, import_obsidian8.setIcon)(dragLock, lockIcon);
    const dragVisibility = movableRow.createSpan("ui-tweaker-status-bar-row-visibility");
    (0, import_obsidian8.setIcon)(dragVisibility, item.hidden ? "eye-off" : "eye");
    let offsetX = event.clientX - movableRow.getBoundingClientRect().left;
    let offsetY = event.clientY - movableRow.getBoundingClientRect().top;
    offsetX = offsetX + containerX;
    offsetY = offsetY + containerY;
    let index = Array.from(rowsContainer.children).indexOf(stationaryRow);
    const handleMouseMove = (e) => {
      var _a2;
      setCssProps(movableRow, {
        left: e.clientX - offsetX + "px",
        top: e.clientY - offsetY + "px"
      });
      const dist = movableRow.getBoundingClientRect().top - stationaryRow.getBoundingClientRect().top;
      if (Math.abs(dist) > stationaryRow.offsetHeight * 0.75) {
        const dir = dist / Math.abs(dist);
        const newIndex = Math.max(0, Math.min(index + dir, rowsContainer.children.length - 1));
        if (newIndex !== index) {
          rowsContainer.removeChild(stationaryRow);
          if (newIndex < rowsContainer.children.length) {
            rowsContainer.insertBefore(stationaryRow, rowsContainer.children[newIndex]);
          } else {
            rowsContainer.appendChild(stationaryRow);
          }
          if (settings.statusBarItems) {
            const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
            if (oldIndex !== -1 && oldIndex !== newIndex) {
              arrayMoveMutable2(settings.statusBarItems, oldIndex, newIndex);
              (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
            }
          }
          index = newIndex;
        }
      }
    };
    const handleMouseUp = () => {
      var _a2;
      stationaryRow.removeClass("ui-tweaker-status-bar-row-clone");
      if (movableRow.parentElement === wrapper) {
        wrapper.removeChild(movableRow);
      }
      dragging = false;
      window.removeEventListener("mousemove", handleMouseMove);
      window.removeEventListener("mouseup", handleMouseUp);
      (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
      void this.saveSettings();
    };
    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("mouseup", handleMouseUp);
  }
};

// src/ui/tabs/ExplorerTab.ts
var import_obsidian9 = require("obsidian");
function arrayMoveMutable3(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var ExplorerTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.explorerCommands) {
      settings.explorerCommands = [];
    }
    if (!settings.explorerButtonItems) {
      settings.explorerButtonItems = [];
    }
    if (!settings.nativeExplorerButtonColors) {
      settings.nativeExplorerButtonColors = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    if (!settings.nativeExplorerButtonIcons) {
      settings.nativeExplorerButtonIcons = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    settings.explorerButtonItems.forEach((item, index) => {
      this.renderButtonItem(container, item, index);
    });
    if (settings.explorerButtonItems.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the file explorer navigation area").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              settings.explorerCommands.push(pair);
              const item = {
                id: `custom-${pair.id}`,
                name: pair.name,
                ariaLabel: pair.name,
                type: "custom",
                commandId: pair.id,
                icon: pair.icon,
                displayName: pair.displayName,
                mode: pair.mode,
                color: pair.color,
                showOnFileTypes: pair.showOnFileTypes,
                hideOnFileTypes: pair.hideOnFileTypes,
                toggleIcon: pair.toggleIcon,
                useActiveClass: pair.useActiveClass,
                hidden: false
              };
              settings.explorerButtonItems.push(item);
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
    const warningDiv = container.createEl("div", {
      cls: "callout",
      attr: { "data-callout": "warning" }
    });
    warningDiv.createEl("p", {
      text: "When clicking on a command in the explorer, the explorer view will become focused. This might interfere with commands that are supposed to be executed on an active file or explorer."
    });
  }
  renderNativeButtonControls(container, mainContainer) {
    container.empty();
    const settings = this.getSettings();
    const group = createSettingsGroup(container, "Native explorer buttons", "ui-tweaker");
    const scrollContainer = mainContainer || container;
    const renderNativeButton = (name, settingKey, colorKey) => {
      var _a, _b;
      const isHidden = settings[settingKey];
      const color = (_a = settings.nativeExplorerButtonColors) == null ? void 0 : _a[colorKey];
      const iconOverride = (_b = settings.nativeExplorerButtonIcons) == null ? void 0 : _b[colorKey];
      group.addSetting((setting) => {
        setting.setName(name).setDesc("").addExtraButton((button) => {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, isHidden ? "eye-off" : "eye");
          button.setTooltip(isHidden ? "Show button" : "Hide button");
          button.onClick(() => {
            void (async () => {
              const currentValue = settings[settingKey];
              settings[settingKey] = !currentValue;
              await this.saveSettings();
              const newIsHidden = settings[settingKey];
              (0, import_obsidian9.setIcon)(iconEl, newIsHidden ? "eye-off" : "eye");
              button.setTooltip(newIsHidden ? "Show button" : "Hide button");
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
        if (color) {
          setting.addColorPicker((colorPicker) => {
            colorPicker.setValue(color);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            setTimeout(() => {
              const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-color-reset",
                attr: { "aria-label": "Reset to default color" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonColors) {
                    settings.nativeExplorerButtonColors = {};
                  }
                  settings.nativeExplorerButtonColors[colorKey] = void 0;
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (colorPickerEl) {
                controlEl.insertBefore(resetButton, colorPickerEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
            colorPicker.onChange((value) => {
              void (async () => {
                var _a2;
                if (!settings.nativeExplorerButtonColors) {
                  settings.nativeExplorerButtonColors = {};
                }
                settings.nativeExplorerButtonColors[colorKey] = value;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
              })();
            });
          });
        } else {
          setting.addButton((button) => {
            button.setButtonText("Set color...").onClick(() => {
              const scrollPos = scrollContainer.scrollTop;
              if (!settings.nativeExplorerButtonColors) {
                settings.nativeExplorerButtonColors = {};
              }
              settings.nativeExplorerButtonColors[colorKey] = "#000000";
              void (async () => {
                var _a2;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          });
        }
        setting.addButton((button) => {
          const currentIcon = iconOverride || "Default";
          button.setButtonText(currentIcon === "Default" ? "Set icon..." : currentIcon).onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a2;
                const scrollPos = scrollContainer.scrollTop;
                if (!settings.nativeExplorerButtonIcons) {
                  settings.nativeExplorerButtonIcons = {};
                }
                if (iconId) {
                  settings.nativeExplorerButtonIcons[colorKey] = iconId;
                } else {
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            modal.open();
          });
          button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          if (iconOverride) {
            setTimeout(() => {
              const controlEl = setting.controlEl;
              const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-icon-reset",
                attr: { "aria-label": "Reset to default icon" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonIcons) {
                    settings.nativeExplorerButtonIcons = {};
                  }
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (buttonEl) {
                controlEl.insertBefore(resetButton, buttonEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
          }
        });
      });
    };
    renderNativeButton("New note", "newNoteButton", "newNote");
    renderNativeButton("New folder", "newFolderButton", "newFolder");
    renderNativeButton("Sort order", "sortOrderButton", "sortOrder");
    renderNativeButton("Auto-reveal", "autoRevealButton", "autoReveal");
    renderNativeButton("Collapse all", "collapseAllButton", "collapseAll");
  }
  renderButtonItem(container, item, index) {
    var _a, _b;
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const pair = item.type === "custom" && item.commandId ? settings.explorerCommands.find((c) => c.id === item.commandId) : null;
    const displayName = item.type === "custom" && pair ? pair.displayName || pair.name : item.name;
    const nativeButtonMap = {
      "native-newNote": { settingKey: "newNoteButton", colorKey: "newNote" },
      "native-newFolder": { settingKey: "newFolderButton", colorKey: "newFolder" },
      "native-sortOrder": { settingKey: "sortOrderButton", colorKey: "sortOrder" },
      "native-autoReveal": { settingKey: "autoRevealButton", colorKey: "autoReveal" },
      "native-collapseAll": { settingKey: "collapseAllButton", colorKey: "collapseAll" }
    };
    const nativeButtonInfo = item.type === "native" ? nativeButtonMap[item.id] : null;
    const isHidden = nativeButtonInfo ? settings[nativeButtonInfo.settingKey] : item.hidden;
    const color = nativeButtonInfo ? (_a = settings.nativeExplorerButtonColors) == null ? void 0 : _a[nativeButtonInfo.colorKey] : item.color && item.color !== "#000000" ? item.color : void 0;
    const iconOverride = nativeButtonInfo ? (_b = settings.nativeExplorerButtonIcons) == null ? void 0 : _b[nativeButtonInfo.colorKey] : item.icon || void 0;
    group.addSetting((setting) => {
      var _a2;
      if (item.type === "external") {
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          if (!isExtraButton) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          if (!isExtraButton) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, false);
      } else {
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
          if (!isChevronClick && !isExtraButton && !isNameEdit) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
        setting.settingEl.addEventListener("click", (e) => {
          const target = e.target;
          const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
          const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
          const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
          if (!isChevronClick && !isExtraButton && !isNameEdit) {
            e.stopPropagation();
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, false);
      }
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      let chevronContainer = null;
      let isExpanded = false;
      if (item.type === "native" || item.type === "custom") {
        chevronContainer = document.createElement("div");
        chevronContainer.className = "ui-tweaker-collapse-icon";
        setCssProps(chevronContainer, {
          cursor: "default",
          background: "transparent",
          padding: "0",
          margin: "0",
          display: "inline-flex",
          alignItems: "center",
          justifyContent: "center"
        });
        nameEl.insertBefore(chevronContainer, nameEl.firstChild);
        isExpanded = (_a2 = this.expandedStates.get(item.id)) != null ? _a2 : false;
        (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        chevronContainer.addEventListener("click", (e) => {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          isExpanded = !isExpanded;
          this.expandedStates.set(item.id, isExpanded);
          (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
          otherSettings.forEach((settingEl) => {
            setCssProps(settingEl, { display: isExpanded ? "" : "none" });
          });
        });
      }
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        if (item.type === "custom") {
          const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
          setCssProps(iconContainer, { opacity: "0.6" });
          (0, import_obsidian9.setIcon)(iconContainer, "lucide-pencil-line");
          const startEdit = () => {
            const currentName = item.name;
            nameContainer.empty();
            const nameInput = nameContainer.createEl("input", {
              type: "text",
              value: currentName
            });
            nameInput.addClass("mod-text-input");
            nameInput.focus();
            nameInput.select();
            const saveName = () => {
              var _a3;
              nameInput.removeEventListener("blur", saveName);
              let newName = nameInput.value.trim();
              if (!newName) {
                newName = currentName;
              }
              item.name = newName;
              if (pair) {
                pair.name = newName;
              }
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.updateButtonNames();
              void (async () => {
                await this.saveSettings();
                this.render(container);
              })();
            };
            nameInput.addEventListener("keydown", (e) => {
              if (e.key === "Enter") {
                e.preventDefault();
                saveName();
              } else if (e.key === "Escape") {
                e.preventDefault();
                createNameDisplay(currentName);
              }
            });
            nameInput.addEventListener("blur", saveName);
          };
          display.addEventListener("click", startEdit);
          iconContainer.addEventListener("click", startEdit);
          iconContainer.addEventListener("mouseenter", () => {
            setCssProps(iconContainer, { opacity: "1" });
          });
          iconContainer.addEventListener("mouseleave", () => {
            setCssProps(iconContainer, { opacity: "0.6" });
          });
        }
      };
      createNameDisplay(item.name);
      setting.setDesc("").addExtraButton((button) => {
        if (item.type === "custom" && pair) {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, pair.icon);
          iconEl.setAttribute("data-explorer-command-id", pair.id);
          if (pair.color && pair.color !== "#000000") {
            setCssProps(iconEl, { color: pair.color });
          } else {
            iconEl.style.removeProperty("color");
          }
          button.setTooltip("Change icon");
          button.onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a3;
                if (iconId && iconId !== pair.icon) {
                  pair.icon = iconId;
                  item.icon = iconId;
                  await this.saveSettings();
                  (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                  this.render(container);
                }
              })();
            });
            modal.open();
          });
        } else if (item.type === "native" && iconOverride) {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, iconOverride);
          button.setTooltip("Change icon");
          button.onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a3;
                if (!nativeButtonInfo) return;
                if (!settings.nativeExplorerButtonIcons) {
                  settings.nativeExplorerButtonIcons = {};
                }
                if (iconId) {
                  settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = iconId;
                } else {
                  settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                }
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.applyNativeIconOverrides();
                this.render(container);
              })();
            });
            modal.open();
          });
        } else {
          setCssProps(button.extraSettingsEl, { display: "none" });
        }
        button.extraSettingsEl.addEventListener("mouseenter", (e) => e.stopPropagation());
        button.extraSettingsEl.addEventListener("mouseleave", (e) => e.stopPropagation());
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a3;
              arrayMoveMutable3(settings.explorerButtonItems, index, index - 1);
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.explorerButtonItems.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a3;
              arrayMoveMutable3(settings.explorerButtonItems, index, index + 1);
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
      if (item.type === "custom") {
        setting.addExtraButton((button) => {
          button.setIcon("trash");
          button.setTooltip("Delete");
          button.extraSettingsEl.addClass("mod-warning");
          setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
          button.onClick(() => {
            void (async () => {
              var _a3;
              const itemIdx = settings.explorerButtonItems.indexOf(item);
              if (itemIdx > -1) {
                settings.explorerButtonItems.splice(itemIdx, 1);
              }
              if (pair) {
                const cmdIdx = settings.explorerCommands.indexOf(pair);
                if (cmdIdx > -1) {
                  settings.explorerCommands.splice(cmdIdx, 1);
                }
              }
              await this.saveSettings();
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              this.render(container);
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
      }
      if (item.type === "native" && nativeButtonInfo || item.type === "external") {
        setting.addExtraButton((button) => {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, isHidden ? "eye-off" : "eye");
          button.setTooltip(isHidden ? "Show button" : "Hide button");
          button.onClick(() => {
            void (async () => {
              var _a3;
              if (item.type === "native" && nativeButtonInfo) {
                settings[nativeButtonInfo.settingKey] = !settings[nativeButtonInfo.settingKey];
                item.hidden = settings[nativeButtonInfo.settingKey];
              } else if (item.type === "external") {
                item.hidden = !item.hidden;
              }
              await this.saveSettings();
              const newIsHidden = item.hidden;
              (0, import_obsidian9.setIcon)(iconEl, newIsHidden ? "eye-off" : "eye");
              button.setTooltip(newIsHidden ? "Show button" : "Hide button");
              (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
      }
    });
    if (item.type === "native" || item.type === "custom") {
      if (item.type === "native" && nativeButtonInfo) {
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasColor = color !== void 0;
          setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
            const currentColor = color != null ? color : "#000000";
            colorPicker.setValue(currentColor);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            if (hasColor) {
              setTimeout(() => {
                const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a2;
                    if (!settings.nativeExplorerButtonColors) {
                      settings.nativeExplorerButtonColors = {};
                    }
                    settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = void 0;
                    await this.saveSettings();
                    (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl.insertBefore(resetButton, colorPickerEl);
                }
              }, 0);
            }
            colorPicker.onChange((value) => {
              void (async () => {
                var _a2;
                if (!settings.nativeExplorerButtonColors) {
                  settings.nativeExplorerButtonColors = {};
                }
                const newColor = value === "#000000" ? void 0 : value;
                settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = newColor;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                const existingReset = controlEl.querySelector(".ui-tweaker-color-reset");
                if (newColor && !existingReset) {
                  const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                  const resetButton = controlEl.createEl("button", {
                    cls: "clickable-icon ui-tweaker-color-reset",
                    attr: { "aria-label": "Reset to default color" }
                  });
                  (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                  setCssProps(resetButton, { marginRight: "0.5rem" });
                  resetButton.addEventListener("click", (e) => {
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    e.preventDefault();
                    void (async () => {
                      var _a3;
                      if (!settings.nativeExplorerButtonColors) {
                        settings.nativeExplorerButtonColors = {};
                      }
                      settings.nativeExplorerButtonColors[nativeButtonInfo.colorKey] = void 0;
                      await this.saveSettings();
                      (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.applyNativeIconOverrides();
                      this.render(container);
                    })();
                  });
                  if (colorPickerEl) {
                    controlEl.insertBefore(resetButton, colorPickerEl);
                  }
                } else if (!newColor && existingReset) {
                  existingReset.remove();
                }
              })();
            });
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasIconOverride = iconOverride !== void 0;
          setting.setName("Icon override").setDesc("Override the default icon for this button").addButton((button) => {
            const currentIcon = iconOverride || "Default";
            button.setButtonText(currentIcon === "Default" ? "Set icon..." : currentIcon).onClick(() => {
              const modal = new IconPickerModal(this.app, (iconId) => {
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonIcons) {
                    settings.nativeExplorerButtonIcons = {};
                  }
                  if (iconId) {
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = iconId;
                  } else {
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                  }
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.render(container);
                })();
              });
              modal.open();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
            if (hasIconOverride) {
              setTimeout(() => {
                const controlEl = setting.controlEl;
                const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-icon-override-reset",
                  attr: { "aria-label": "Reset icon override" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a2;
                    if (!settings.nativeExplorerButtonIcons) {
                      settings.nativeExplorerButtonIcons = {};
                    }
                    settings.nativeExplorerButtonIcons[nativeButtonInfo.colorKey] = void 0;
                    await this.saveSettings();
                    (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                    this.render(container);
                  })();
                });
                if (buttonEl) {
                  controlEl.insertBefore(resetButton, buttonEl);
                } else {
                  controlEl.insertBefore(resetButton, controlEl.firstChild);
                }
              }, 0);
            }
          });
        });
      } else if (item.type === "custom" && pair) {
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Device mode").setDesc("Choose which devices this button appears on").addDropdown((dropdown) => {
            const appId = this.app.appId || "this-device";
            dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device").setValue(pair.mode || "any").onChange((value) => {
              void (async () => {
                var _a2;
                pair.mode = value;
                item.mode = value;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          const hasColor = pair.color !== void 0;
          setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
            var _a2;
            const currentColor = (_a2 = pair.color) != null ? _a2 : "#000000";
            colorPicker.setValue(currentColor);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            if (hasColor) {
              setTimeout(() => {
                const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
                const resetButton = controlEl.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a3;
                    pair.color = void 0;
                    item.color = void 0;
                    await this.saveSettings();
                    (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl.insertBefore(resetButton, colorPickerEl);
                }
              }, 0);
            }
            colorPicker.onChange((value) => {
              const newColor = value === "#000000" ? void 0 : value;
              pair.color = newColor;
              item.color = newColor;
              const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
              if (iconButton) {
                if (newColor && newColor !== "#000000") {
                  setCssProps(iconButton, { color: newColor });
                } else {
                  iconButton.style.removeProperty("color");
                }
              }
              const controlEl2 = setting.controlEl;
              const existingReset = controlEl2.querySelector(".ui-tweaker-color-reset");
              if (newColor && !existingReset) {
                const colorPickerEl = controlEl2.querySelector(".color-picker") || controlEl2.lastElementChild;
                const resetButton = controlEl2.createEl("button", {
                  cls: "clickable-icon ui-tweaker-color-reset",
                  attr: { "aria-label": "Reset to default color" }
                });
                (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
                setCssProps(resetButton, { marginRight: "0.5rem" });
                resetButton.addEventListener("click", (e) => {
                  e.stopPropagation();
                  e.stopImmediatePropagation();
                  e.preventDefault();
                  void (async () => {
                    var _a3;
                    pair.color = void 0;
                    item.color = void 0;
                    await this.saveSettings();
                    (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                    this.render(container);
                  })();
                });
                if (colorPickerEl) {
                  controlEl2.insertBefore(resetButton, colorPickerEl);
                }
              } else if (!newColor && existingReset) {
                existingReset.remove();
              }
              void (async () => {
                var _a3;
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
              })();
            });
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
            const currentToggleIcon = pair.toggleIcon || "None";
            button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
              const modal = new IconPickerModal(this.app, (iconId) => {
                void (async () => {
                  var _a2;
                  if (iconId) {
                    pair.toggleIcon = iconId;
                    item.toggleIcon = iconId;
                  } else {
                    pair.toggleIcon = void 0;
                    item.toggleIcon = void 0;
                  }
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                  this.render(container);
                })();
              });
              modal.open();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
        group.addSetting((setting) => {
          otherSettings.push(setting.settingEl);
          setting.setName("Use active class instead of icon swap").setDesc("When toggled on, add is-active class instead of swapping icon (explorer only)").addToggle((toggle) => {
            var _a2;
            toggle.setValue((_a2 = pair.useActiveClass) != null ? _a2 : false);
            toggle.onChange((value) => {
              void (async () => {
                var _a3;
                pair.useActiveClass = value;
                item.useActiveClass = value;
                await this.saveSettings();
                (_a3 = this.plugin.explorerManager) == null ? void 0 : _a3.reorder();
                this.render(container);
              })();
            });
            toggle.toggleEl.addEventListener("click", (e) => e.stopPropagation());
          });
        });
      }
    }
    setTimeout(() => {
      var _a2;
      const savedExpanded = (_a2 = this.expandedStates.get(item.id)) != null ? _a2 : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian9.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-explorer-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.explorerCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 50);
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            const idx = settings.explorerCommands.indexOf(pair);
            if (idx > -1) {
              settings.explorerCommands.splice(idx, 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
            }
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this button appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device").setValue(pair.mode || "any").onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          const newColor = value === "#000000" ? void 0 : value;
          pair.color = newColor;
          const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
          if (iconButton) {
            if (newColor && newColor !== "#000000") {
              setCssProps(iconButton, { color: newColor });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          const controlEl2 = setting.controlEl;
          const existingReset = controlEl2.querySelector(".ui-tweaker-color-reset");
          if (newColor && !existingReset) {
            const colorPickerEl = controlEl2.querySelector(".color-picker") || controlEl2.lastElementChild;
            const resetButton = controlEl2.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton2 = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
                if (iconButton2) {
                  iconButton2.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl2.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl2.insertBefore(resetButton, controlEl2.firstChild);
            }
          } else if (!newColor && existingReset) {
            existingReset.remove();
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Use active class instead of icon swap").setDesc("When toggled on, add is-active class instead of swapping icon (explorer only)").addToggle((toggle) => {
        var _a;
        toggle.setValue((_a = pair.useActiveClass) != null ? _a : false);
        toggle.onChange((value) => {
          void (async () => {
            var _a2;
            pair.useActiveClass = value;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
        toggle.toggleEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/MobileTab.ts
var MobileTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const mobileGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    this.addToggleSetting(mobileGroup, 'Hide "Mobile chevrons" icon', 'Hide "Mobile chevrons" icon (long-press flair) in mobile navbar.', "mobileChevronsIcon");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate back" button', 'Hide "Navigate back" button in mobile navbar.', "navigateBackButton");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate forward" button', 'Hide "Navigate forward" button in mobile navbar.', "navigateForwardButton");
    this.addToggleSetting(mobileGroup, 'Hide "Quick switcher" button', 'Hide "Quick switcher" button in mobile navbar.', "quickSwitcherButton");
    this.addToggleSetting(mobileGroup, 'Hide "New tab" button', 'Hide "New tab" button in mobile navbar.', "mobileNewTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Open tabs" button', 'Hide "Open tabs" button in mobile navbar.', "openTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Ribbon menu" button', 'Hide "Ribbon menu" button in mobile navbar.', "ribbonMenuButton");
    this.addToggleSetting(mobileGroup, "Swap mobile new tab icon", "Replace the new tab plus icon with a home button icon in mobile navbar.", "swapMobileNewTabIcon");
    this.addToggleSetting(mobileGroup, "Hide title", "Hide the title in mobile view headers.", "hideMobileTitle");
    this.addToggleSetting(mobileGroup, "Hide sync icon", "Hide sync status icons in mobile interface.", "hideMobileSyncIcon");
    this.renderSyncButtonReplacement(container, mobileGroup);
    const mobileNavGroup = createSettingsGroup(container, "Mobile navigation menu", "ui-tweaker");
    this.addPositionSetting(mobileNavGroup, '"Navigate back" button position', 'Select the position for the "Navigate back" button (default 1).', "navigateButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Navigate forward" button position', 'Select the position for the "Navigate forward" button (default 2).', "navigationButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Quick switcher" button position', 'Select the position for the "Quick switcher" button (default 3).', "quickSwitcherPosition");
    this.addPositionSetting(mobileNavGroup, '"New tab" button position', 'Select the position for the "New tab" button (default 4).', "newTabPosition");
    this.addPositionSetting(mobileNavGroup, '"Open tabs" button position', 'Select the position for the "Open tabs" button (default 5).', "openTabsPosition");
    this.addPositionSetting(mobileNavGroup, '"Ribbon menu" button position', 'Select the position for the "Ribbon menu" button (default 6).', "ribbonMenuPosition");
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  addPositionSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        for (let i = 1; i <= 6; i++) {
          dropdown.addOption(String(i), String(i));
        }
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "1";
        dropdown.setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  renderSyncButtonReplacement(container, group) {
    const settings = this.getSettings();
    if (!settings.syncButtonReplacement) {
      settings.syncButtonReplacement = {
        enabled: false,
        commandId: "ui-tweaker:open-settings",
        iconId: "wrench"
      };
    }
    const dependentSettings = [];
    group.addSetting((setting) => {
      setting.setName("Replace sync button with custom action").setDesc("Replace the sync button in the mobile sidebar with a custom icon and command. This will hide the original sync button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.syncButtonReplacement.enabled).onChange((value) => {
          settings.syncButtonReplacement.enabled = value;
          dependentSettings.forEach((el) => {
            el.style.display = value ? "" : "none";
          });
          void this.saveSettings();
        })
      );
    });
    const getCommandName = (commandId) => {
      if (!commandId) return "Select command...";
      try {
        const commandRegistry = this.app.commands;
        if (commandRegistry && typeof commandRegistry.listCommands === "function") {
          const commands = commandRegistry.listCommands();
          const command = commands.find((cmd) => cmd && cmd.id === commandId);
          if (command == null ? void 0 : command.name) {
            return command.name;
          }
        }
      } catch (e) {
      }
      return "Select command...";
    };
    const getIconName = (iconId) => {
      if (!iconId) return "";
      return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
    };
    group.addSetting((setting) => {
      dependentSettings.push(setting.settingEl);
      setting.settingEl.style.display = settings.syncButtonReplacement.enabled ? "" : "none";
      setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
        (button) => button.setButtonText(getCommandName(settings.syncButtonReplacement.commandId)).onClick(() => {
          const modal = new CommandPickerModal(this.app, (commandId) => {
            settings.syncButtonReplacement.commandId = commandId;
            button.setButtonText(getCommandName(commandId));
            void this.saveSettings();
          });
          modal.open();
        })
      );
    });
    group.addSetting((setting) => {
      dependentSettings.push(setting.settingEl);
      setting.settingEl.style.display = settings.syncButtonReplacement.enabled ? "" : "none";
      setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
        (button) => button.setButtonText(getIconName(settings.syncButtonReplacement.iconId) || "Select icon...").onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            settings.syncButtonReplacement.iconId = iconId;
            button.setButtonText(getIconName(iconId));
            void this.saveSettings();
          });
          modal.open();
        })
      );
    });
  }
};

// src/ui/tabs/PropertiesTab.ts
var import_obsidian10 = require("obsidian");
var PropertiesTab = class extends TabRenderer {
  render(container) {
    var _a;
    this.container = container;
    container.empty();
    const settings = this.getSettings();
    if (!settings.propertyIconItems) {
      settings.propertyIconItems = [];
    }
    const topGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    topGroup.addSetting((setting) => {
      setting.setName("Minimal property icons").setDesc("Hide the default property type icon and only show your custom icon.").addToggle((toggle) => {
        toggle.setValue(settings.minimalPropertyIcons).onChange(async (value) => {
          var _a2;
          settings.minimalPropertyIcons = value;
          await this.saveSettings();
          (_a2 = this.plugin.propertiesManager) == null ? void 0 : _a2.refresh();
        });
      });
    });
    topGroup.addSetting((setting) => {
      setting.setName("Right-click menu").setDesc('Add "Change icon" and "Remove icon" to the property context menu.').addToggle((toggle) => {
        toggle.setValue(settings.showPropertyMenuActions).onChange(async (value) => {
          settings.showPropertyMenuActions = value;
          await this.saveSettings();
        });
      });
    });
    const propGroup = createSettingsGroup(container, "Property Icons", "ui-tweaker");
    const metadataProps = Object.keys(((_a = this.app.metadataTypeManager) == null ? void 0 : _a.properties) || {});
    const savedProps = settings.propertyIconItems.map((i) => i.id);
    const allProperties = Array.from(new Set([...metadataProps, ...savedProps].map((p) => p.toLowerCase()))).sort();
    if (allProperties.length === 0) {
      container.createDiv("ui-tweaker-empty-state", (el) => {
        el.createEl("p", { text: "No properties found in your vault yet." });
        el.createEl("p", { text: "Add some properties to your notes to see them here.", cls: "sub-text" });
      });
      return;
    }
    allProperties.forEach((propName) => {
      this.renderPropertySetting(propGroup, propName);
    });
  }
  renderPropertySetting(group, propName) {
    const settings = this.getSettings();
    const normalizedPropName = propName.toLowerCase();
    let item = settings.propertyIconItems.find((i) => i.id.toLowerCase() === normalizedPropName);
    group.addSetting((setting) => {
      setting.setName(propName);
      if ((item == null ? void 0 : item.icon) || (item == null ? void 0 : item.color)) {
        setting.addExtraButton((button) => {
          button.setIcon("lucide-rotate-ccw").setTooltip("Reset to default").onClick(async () => {
            var _a;
            settings.propertyIconItems = settings.propertyIconItems.filter((i) => i.id.toLowerCase() !== normalizedPropName);
            await this.saveSettings();
            if (this.container) this.render(this.container);
            (_a = this.plugin.propertiesManager) == null ? void 0 : _a.refresh();
          });
        });
      }
      setting.addExtraButton((button) => {
        button.extraSettingsEl.addClass("ui-tweaker-property-icon-btn");
        const iconEl = button.extraSettingsEl;
        if (item == null ? void 0 : item.icon) {
          (0, import_obsidian10.setIcon)(iconEl, item.icon);
          if (item.color) {
            setCssProps(iconEl, { color: item.color });
          }
        } else {
          (0, import_obsidian10.setIcon)(iconEl, "lucide-plus-circle");
          setCssProps(iconEl, { opacity: "0.4" });
        }
        button.setTooltip((item == null ? void 0 : item.icon) ? `Icon: ${item.icon} (click to change)` : "Add icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, async (iconId) => {
            var _a;
            let currentItem = settings.propertyIconItems.find((i) => i.id.toLowerCase() === normalizedPropName);
            if (!currentItem) {
              currentItem = { id: normalizedPropName };
              settings.propertyIconItems.push(currentItem);
            }
            if (iconId) {
              currentItem.icon = iconId;
            } else {
              currentItem.icon = void 0;
            }
            if (!currentItem.icon && !currentItem.color) {
              settings.propertyIconItems = settings.propertyIconItems.filter((i) => i.id.toLowerCase() !== normalizedPropName);
            }
            await this.saveSettings();
            if (this.container) this.render(this.container);
            (_a = this.plugin.propertiesManager) == null ? void 0 : _a.refresh();
          });
          modal.open();
        });
      });
      if (item == null ? void 0 : item.icon) {
        const colorPicker = new import_obsidian10.ColorComponent(setting.controlEl);
        colorPicker.setValue(item.color || "#000000");
        colorPicker.onChange(async (value) => {
          var _a;
          const currentItem = settings.propertyIconItems.find((i) => i.id.toLowerCase() === normalizedPropName);
          if (!currentItem) return;
          currentItem.color = value === "#000000" ? void 0 : value;
          await this.saveSettings();
          const iconBtn = setting.settingEl.querySelector(".ui-tweaker-property-icon-btn");
          if (iconBtn) {
            if (currentItem.color) {
              setCssProps(iconBtn, { color: currentItem.color });
            } else {
              iconBtn.style.removeProperty("color");
            }
          }
          (_a = this.plugin.propertiesManager) == null ? void 0 : _a.refresh();
        });
      }
    });
  }
};

// src/ui/SettingsTab.ts
var UITweakerSettingTab = class extends import_obsidian11.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.icon = "lucide-wrench";
    this.id = "ui-tweaker";
    this.tabContentMap = /* @__PURE__ */ new Map();
    this.tabButtons = /* @__PURE__ */ new Map();
    this.activeTabId = null;
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("ui-tweaker-settings-tab-root");
    this.tabContentMap.clear();
    this.tabButtons.clear();
    const tabs = [
      { id: "hider", name: "Hider", renderer: new HiderTab(this.app, this.plugin) },
      { id: "status-bar", name: "Status bar", renderer: new StatusBarTab(this.app, this.plugin) },
      { id: "tab-bar", name: "Tab bar", renderer: new TabBarTab(this.app, this.plugin) },
      { id: "explorer", name: "Explorer", renderer: new ExplorerTab(this.app, this.plugin) },
      { id: "properties", name: "Properties", renderer: new PropertiesTab(this.app, this.plugin) },
      { id: "mobile", name: "Mobile", renderer: new MobileTab(this.app, this.plugin) }
    ];
    const tabsWrapper = containerEl.createDiv("ui-tweaker-settings-tabs");
    const navEl = tabsWrapper.createDiv("ui-tweaker-settings-tabs-nav");
    navEl.setAttribute("role", "tablist");
    const contentWrapper = tabsWrapper.createDiv("ui-tweaker-settings-tabs-content");
    tabs.forEach((tab) => {
      const buttonComponent = new import_obsidian11.ButtonComponent(navEl);
      buttonComponent.setButtonText(tab.name);
      buttonComponent.removeCta();
      buttonComponent.buttonEl.addClass("ui-tweaker-settings-tab-button");
      buttonComponent.buttonEl.addClass("clickable-icon");
      buttonComponent.buttonEl.setAttribute("role", "tab");
      buttonComponent.buttonEl.setAttribute("aria-selected", "false");
      buttonComponent.onClick(() => {
        void this.activateTab(tab.id, tabs, contentWrapper);
      });
      this.tabButtons.set(tab.id, buttonComponent);
    });
    const initialTabId = this.activeTabId && tabs.some((t) => t.id === this.activeTabId) ? this.activeTabId : tabs[0].id;
    void this.activateTab(initialTabId, tabs, contentWrapper);
  }
  async activateTab(id, tabs, contentWrapper) {
    const definition = tabs.find((tab) => tab.id === id);
    if (!definition) return;
    if (!this.tabContentMap.has(id)) {
      const tabContainer = contentWrapper.createDiv("ui-tweaker-settings-tab");
      await definition.renderer.render(tabContainer);
      this.tabContentMap.set(id, tabContainer);
    }
    if (this.activeTabId && this.activeTabId !== id) {
      const prevContent = this.tabContentMap.get(this.activeTabId);
      if (prevContent) prevContent.removeClass("is-active");
      const prevButton = this.tabButtons.get(this.activeTabId);
      if (prevButton) {
        prevButton.buttonEl.removeClass("is-active");
        prevButton.buttonEl.setAttribute("aria-selected", "false");
        prevButton.removeCta();
      }
    }
    const newContent = this.tabContentMap.get(id);
    if (newContent) newContent.addClass("is-active");
    const newButton = this.tabButtons.get(id);
    if (newButton) {
      newButton.buttonEl.addClass("is-active");
      newButton.buttonEl.setAttribute("aria-selected", "true");
      newButton.setCta();
    }
    this.activeTabId = id;
    contentWrapper.scrollTop = 0;
  }
};

// src/manager/TabBarManager.ts
var import_obsidian13 = require("obsidian");

// src/utils/commandUtils.ts
var import_obsidian12 = require("obsidian");

// src/utils/command-logic.ts
function parseFileAndViewTypes(types) {
  const result = { fileTypes: [], viewTypes: [] };
  if (!types || !types.trim()) return result;
  const parts = types.split(",").map((p) => p.trim()).filter((p) => p);
  for (const part of parts) {
    const viewTypeMatch = part.match(/^\{\{(\w+)\}\}$/);
    if (viewTypeMatch) {
      result.viewTypes.push(viewTypeMatch[1].toLowerCase());
    } else {
      const ext = part.replace(/^\./, "").toLowerCase();
      if (ext) {
        result.fileTypes.push(ext);
      }
    }
  }
  return result;
}
var CommandToggleTracker = class {
  constructor() {
    this.toggleStates = /* @__PURE__ */ new Map();
    this.previousStates = /* @__PURE__ */ new Map();
    this.executionCounts = /* @__PURE__ */ new Map();
  }
  recordExecution(id) {
    const currentCount = this.executionCounts.get(id) || 0;
    this.executionCounts.set(id, currentCount + 1);
    this.toggleStates.set(id, (currentCount + 1) % 2 === 1);
  }
  getTrackedState(id) {
    var _a;
    return (_a = this.toggleStates.get(id)) != null ? _a : null;
  }
  getPreviousState(id) {
    var _a;
    return (_a = this.previousStates.get(id)) != null ? _a : null;
  }
  resetState(id) {
    this.toggleStates.delete(id);
    this.previousStates.delete(id);
    this.executionCounts.delete(id);
  }
  syncState(id, actualState) {
    const currentTrackedState = this.toggleStates.get(id);
    if (currentTrackedState !== void 0) {
      this.previousStates.set(id, currentTrackedState);
    }
    if (currentTrackedState !== actualState) {
      const currentCount = this.executionCounts.get(id) || 0;
      this.executionCounts.set(id, currentCount + 1);
      this.toggleStates.set(id, actualState);
      return true;
    }
    return false;
  }
  hasStateChanged(id, currentState) {
    const previousState = this.previousStates.get(id);
    return previousState !== void 0 && previousState !== currentState;
  }
};

// src/utils/commandUtils.ts
function isMarkdownView(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return false;
  if (leaf.view instanceof import_obsidian12.MarkdownView) {
    const file = leaf.view.file;
    if (!file) return false;
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "mdx";
  }
  return false;
}
function getFileExtension(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return null;
  const view = leaf.view;
  const file = view.file;
  if (!file) return null;
  return file.extension.toLowerCase();
}
function getViewType(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return null;
  const view = leaf.view;
  if (view.getViewType && typeof view.getViewType === "function") {
    return view.getViewType().toLowerCase();
  }
  if (leaf.view instanceof import_obsidian12.MarkdownView) {
    return "markdown";
  }
  const fileExt = getFileExtension(leaf);
  if (!fileExt) {
    return "empty";
  }
  return null;
}
function matchesFileTypeFilter(leaf, showOnFileTypes, hideOnFileTypes) {
  if (!(leaf == null ? void 0 : leaf.view)) return false;
  const showFilters = parseFileAndViewTypes(showOnFileTypes);
  const hideFilters = parseFileAndViewTypes(hideOnFileTypes);
  const fileExt = getFileExtension(leaf);
  const viewType = getViewType(leaf);
  if (hideFilters.fileTypes.length > 0 && fileExt && hideFilters.fileTypes.includes(fileExt)) {
    return false;
  }
  if (hideFilters.viewTypes.length > 0 && viewType && hideFilters.viewTypes.includes(viewType)) {
    return false;
  }
  if (showFilters.fileTypes.length > 0 || showFilters.viewTypes.length > 0) {
    const matchesFileType = fileExt ? showFilters.fileTypes.includes(fileExt) : false;
    const matchesViewType = viewType ? showFilters.viewTypes.includes(viewType) : false;
    return matchesFileType || matchesViewType;
  }
  return true;
}
function isModeActive(mode, plugin) {
  var _a;
  const app = plugin.app;
  const isMobile = (_a = app.isMobile) != null ? _a : false;
  const appId = app.appId;
  if (mode !== "any" && mode !== "desktop" && mode !== "mobile") {
    return mode === appId;
  }
  return mode === "any" || mode === "mobile" && isMobile || mode === "desktop" && !isMobile;
}
function getCommandFromId(id, plugin) {
  var _a, _b;
  const commands = plugin.app.commands;
  return (_b = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[id]) != null ? _b : null;
}
var commandToggleTracker = new CommandToggleTracker();
function isCommandChecked(id, plugin) {
  var _a, _b, _c, _d, _e, _f;
  if (id === "theme:toggle-light-dark") {
    const isDark = document.body.classList.contains("theme-dark");
    commandToggleTracker.syncState(id, isDark);
    return isDark;
  }
  if (id === "editing-toolbar:hide-show-menu" || id === "hide-show-menu") {
    const plugins = plugin.app.plugins;
    const editingToolbarPlugin = (_a = plugins == null ? void 0 : plugins.plugins) == null ? void 0 : _a["editing-toolbar"];
    if (((_b = editingToolbarPlugin == null ? void 0 : editingToolbarPlugin.settings) == null ? void 0 : _b.cMenuVisibility) !== void 0) {
      const isVisible = editingToolbarPlugin.settings.cMenuVisibility;
      commandToggleTracker.syncState(id, isVisible);
      return isVisible;
    }
    return (_c = commandToggleTracker.getTrackedState(id)) != null ? _c : false;
  }
  const command = getCommandFromId(id, plugin);
  if (!command) {
    return (_d = commandToggleTracker.getTrackedState(id)) != null ? _d : false;
  }
  if (typeof command.checkCallback === "function") {
    try {
      const result = command.checkCallback(true);
      const isChecked = result === true;
      commandToggleTracker.syncState(id, isChecked);
      return isChecked;
    } catch (e) {
      return (_e = commandToggleTracker.getTrackedState(id)) != null ? _e : false;
    }
  }
  return (_f = commandToggleTracker.getTrackedState(id)) != null ? _f : false;
}
function recordCommandExecution(id) {
  commandToggleTracker.recordExecution(id);
}

// src/manager/TabBarManager.ts
var TabBarManager = class {
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new WeakMap();
    this.plugin = plugin;
    this.init();
  }
  get pairs() {
    return this.plugin.settings.tabBarCommands || [];
  }
  init() {
    this.plugin.register(() => {
      this.removeButtonsFromAllLeaves();
    });
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        this.addButtonsToAllLeaves();
      })
    );
    this.plugin.app.workspace.onLayoutReady(
      () => setTimeout(() => this.addButtonsToAllLeaves(), 100)
    );
  }
  addPageHeaderButton(leaf, pair) {
    const { id } = pair;
    const name = pair.name;
    const { view } = leaf;
    if (!(view instanceof import_obsidian13.ItemView)) {
      return;
    }
    const buttons = this.buttonsFor(leaf, true);
    if (!buttons) {
      return;
    }
    if (buttons.has(id)) {
      const existingButton = buttons.get(id);
      if (existingButton) {
        existingButton.setAttribute("aria-label", name);
        existingButton.setAttribute("title", name);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(existingButton, { color: pair.color });
        } else {
          existingButton.style.removeProperty("color");
        }
        this.updateButtonToggleState(existingButton, pair);
        return;
      }
    }
    if (!matchesFileTypeFilter(leaf, pair.showOnFileTypes, pair.hideOnFileTypes)) {
      return;
    }
    const initialIcon = this.getIconForToggleState(pair);
    const buttonIcon = view.addAction(initialIcon, name, () => {
      this.plugin.app.workspace.setActiveLeaf(leaf, { focus: true });
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(id);
        setTimeout(() => {
          this.updateButtonToggleState(buttonIcon, pair);
          this.updateAllButtonsForCommand(id);
        }, 100);
      }
    });
    buttons.set(id, buttonIcon);
    buttonIcon.addClasses(["ui-tweaker-tab-bar-button", id]);
    if (pair.color && pair.color !== "#000000") {
      setCssProps(buttonIcon, { color: pair.color });
    }
    this.updateButtonToggleState(buttonIcon, pair);
    buttonIcon.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian13.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
  }
  buttonsFor(leaf, create = false) {
    if (!(leaf.view instanceof import_obsidian13.ItemView)) return;
    if (create && !this.buttons.has(leaf.view))
      this.buttons.set(leaf.view, /* @__PURE__ */ new Map());
    return this.buttons.get(leaf.view);
  }
  addButtonsToAllLeaves(refresh = false) {
    requestAnimationFrame(() => {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        this.addButtonsToLeaf(leaf, refresh);
      });
    });
  }
  removeButtonsFromAllLeaves() {
    requestAnimationFrame(
      () => this.plugin.app.workspace.iterateAllLeaves(
        (leaf) => this.removeButtonsFromLeaf(leaf)
      )
    );
  }
  addButtonsToLeaf(leaf, refresh = false) {
    var _a;
    if (!(leaf.view instanceof import_obsidian13.ItemView)) {
      return;
    }
    if (refresh) {
      this.removeButtonsFromLeaf(leaf);
    } else if ((_a = this.buttonsFor(leaf)) == null ? void 0 : _a.size) {
      return;
    }
    for (let i = this.pairs.length - 1; i >= 0; i--) {
      const pair = this.pairs[i];
      if (isModeActive(pair.mode, this.plugin)) {
        this.addPageHeaderButton(leaf, pair);
      }
    }
  }
  removeButtonsFromLeaf(leaf) {
    const buttons = this.buttonsFor(leaf);
    if (buttons) {
      for (const button of buttons.values()) button.detach();
      buttons == null ? void 0 : buttons.clear();
    }
  }
  reorder() {
    this.addButtonsToAllLeaves(true);
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian13.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair) {
          button.setAttribute("aria-label", pair.name);
          button.setAttribute("title", pair.name);
          if (pair.color && pair.color !== "#000000") {
            setCssProps(button, { color: pair.color });
          } else {
            button.style.removeProperty("color");
          }
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Get icon for current toggle state
   */
  getIconForToggleState(pair) {
    if (!pair.toggleIcon) {
      return pair.icon;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    return isChecked ? pair.toggleIcon : pair.icon;
  }
  /**
   * Update button toggle state (icon swap only for tab bar)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon) {
      (0, import_obsidian13.setIcon)(button, pair.icon);
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    (0, import_obsidian13.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
  }
  /**
   * Update all buttons for a specific command ID across all leaves
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.pairs.find((p) => p.id === commandId);
    if (!pair) return;
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian13.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      const button = buttons.get(commandId);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian13.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair && pair.toggleIcon) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  async addCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) {
      this.plugin.settings.tabBarCommands = [];
    }
    this.plugin.settings.tabBarCommands.push(pair);
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async removeCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands.splice(index, 1);
    }
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async updateCommand(oldPair, newPair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(oldPair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands[index] = newPair;
      this.addButtonsToAllLeaves(true);
      await this.plugin.saveSettings();
    }
  }
};

// src/manager/StatusBarManager.ts
var import_obsidian14 = require("obsidian");
var StatusBarManager = class {
  constructor(plugin) {
    this.customActions = /* @__PURE__ */ new Map();
    this.container = null;
    this.isReordering = false;
    this.plugin = plugin;
    this.init();
  }
  // Flag to prevent observer from triggering during reorder
  get items() {
    return this.plugin.settings.statusBarItems || [];
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      var _a, _b;
      this.container = (_b = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl) != null ? _b : null;
      if (!this.container) {
        return;
      }
      if (!this.plugin.settings.statusBarItems) {
        this.plugin.settings.statusBarItems = [];
      }
      this.consolidateSettingsAndElements();
      this.reorder();
      let observerTimeout = null;
      this.observer = new MutationObserver(() => {
        if (this.isReordering) {
          return;
        }
        if (observerTimeout) {
          clearTimeout(observerTimeout);
        }
        observerTimeout = setTimeout(() => {
          if (!this.isReordering) {
            this.consolidateSettingsAndElements();
            this.reorder();
          }
        }, 200);
      });
      this.observer.observe(this.container, { childList: true, subtree: false });
      this.plugin.register(() => {
        this.cleanup();
      });
    });
  }
  /**
   * Remove all buttons created by this manager from the DOM
   */
  cleanup() {
    if (this.observer) {
      this.observer.disconnect();
    }
    this.customActions.forEach((action) => action.remove());
    this.customActions.clear();
    if (this.container) {
      const managedButtons = this.container.querySelectorAll('[data-ui-tweaker-managed="true"]');
      managedButtons.forEach((btn) => btn.remove());
      const hiddenItems = this.container.querySelectorAll(".ui-tweaker-status-bar-hidden");
      hiddenItems.forEach((item) => item.removeClass("ui-tweaker-status-bar-hidden"));
    }
  }
  /**
   * Check if a class is a dynamic state class that should be filtered out
   * Dynamic state classes change based on plugin state (e.g., obsidian-git statusbar states)
   */
  isDynamicStateClass(className) {
    const dynamicPatterns = [
      /-statusbar-(idle|pull|push|commit|message|status|add|conflict|paused|failed-init)$/,
      // Common state classes that shouldn't be part of an element's identity
      /^(is-active|is-loading|is-hidden|is-collapsed|is-selected|is-flashing|mod-active|mod-loading)$/,
      // obsidian-git specific dynamic classes
      /^obsidian-git-statusbar-/
    ];
    return dynamicPatterns.some((pattern) => pattern.test(className));
  }
  /**
   * Generate a canonical name from an element's classes
   * Filters out dynamic state classes and uses only stable plugin identifiers
   */
  generateCanonicalName(element, allClasses) {
    var _a;
    const ignoredClasses = ["mod-clickable", "status-bar-item", "ui-tweaker-status-bar-item", "ui-tweaker-status-bar-hidden"];
    const pluginClass = allClasses.find(
      (cls) => cls.includes("plugin-") || cls.includes("obsidian-git") || cls.includes("-git") || cls.startsWith("git-") && cls !== "git-changes-status-bar"
    );
    if (pluginClass) {
      if (pluginClass.includes("obsidian-git") || pluginClass.startsWith("git-")) {
        if (allClasses.some((cls) => cls.startsWith("obsidian-git-statusbar-"))) return "plugin-obsidian-git-status";
        if (allClasses.includes("git-changes-status-bar")) return "plugin-obsidian-git-changes";
        const textContent = (_a = element.textContent) == null ? void 0 : _a.trim();
        const looksLikeBranch = textContent && textContent.length > 0 && /^[a-z0-9][a-z0-9._\-/]*$/i.test(textContent) && textContent.length < 30 && !textContent.includes(":") && !/^[0-9]/.test(textContent) && !element.getAttribute("data-ui-tweaker-managed");
        if (looksLikeBranch) return "plugin-obsidian-git-branch";
        return "plugin-obsidian-git";
      }
      const stableClasses2 = allClasses.filter(
        (cls) => !this.isDynamicStateClass(cls) && !ignoredClasses.includes(cls) && cls !== pluginClass
      );
      if (stableClasses2.length > 0) {
        return `${pluginClass}-${stableClasses2.join("-")}`;
      }
      return pluginClass;
    }
    const stableClasses = allClasses.filter(
      (cls) => !this.isDynamicStateClass(cls) && !ignoredClasses.includes(cls)
    );
    if (stableClasses.length > 0) {
      return stableClasses.join("-");
    }
    return "status-bar-item";
  }
  /**
   * Extract canonical name from a saved ID
   * Removes the index suffix and filters out dynamic state classes
   * This handles legacy IDs that might have been created with dynamic classes
   */
  getCanonicalNameFromId(id) {
    const parts = id.split(";");
    parts.pop();
    const fullName = parts.join(";");
    if (fullName.includes("obsidian-git-statusbar-") || fullName === "plugin-obsidian-git") {
      const savedItem = this.items.find((i) => i.id === id);
      if (savedItem && savedItem.name && /^[a-z0-9][a-z0-9._\-/]*$/i.test(savedItem.name) && savedItem.name.length < 30 && !savedItem.name.includes("plugin-")) {
        return "plugin-obsidian-git-branch";
      }
      return "plugin-obsidian-git-status";
    }
    const pluginMatch = fullName.match(/^(plugin-[a-z0-9-]+)/i);
    if (pluginMatch) {
      return pluginMatch[1];
    }
    const nameParts = fullName.split("-");
    const filteredParts = [];
    let skipNext = false;
    for (let i = 0; i < nameParts.length; i++) {
      if (skipNext) {
        skipNext = false;
        continue;
      }
      if (nameParts[i] === "statusbar" && i < nameParts.length - 1) {
        const nextPart = nameParts[i + 1];
        if (["idle", "pull", "push", "commit", "message", "status", "add", "conflict", "paused"].includes(nextPart)) {
          skipNext = true;
          continue;
        }
        if (nextPart === "failed" && i < nameParts.length - 2 && nameParts[i + 2] === "init") {
          i += 2;
          continue;
        }
      }
      if (this.isDynamicStateClass(nameParts[i])) {
        continue;
      }
      filteredParts.push(nameParts[i]);
    }
    return filteredParts.length > 0 ? filteredParts.join("-") : fullName;
  }
  /**
   * Consolidate settings and elements (EXACTLY like Status Bar Organizer)
   * Merges saved items with current DOM elements, preserves order and settings
   * Saves immediately to prevent duplicates
   */
  consolidateSettingsAndElements() {
    if (!this.container) return;
    const existingElements = Array.from(this.container.children).filter(
      (el) => {
        const element = el;
        if (element.classList.contains("ui-tweaker-status-bar-item")) return false;
        if (element.getAttribute("data-ui-tweaker-managed") === "true") {
          const id = element.getAttribute("data-ui-tweaker-status-bar-id");
          if (!id || !this.items.some((item) => item.id === id)) {
            return false;
          }
        }
        return true;
      }
    );
    const savedItems = this.items.filter((item) => item.type === "existing");
    const savedItemsMap = new Map(savedItems.map((item) => [item.id, item]));
    const pluginElementCount = {};
    const matchedSavedIds = /* @__PURE__ */ new Set();
    const newItems = [];
    existingElements.forEach((element) => {
      var _a, _b;
      let id = element.getAttribute("data-ui-tweaker-status-bar-id");
      let canonicalName;
      let index;
      if (id) {
        const parsed = this.parseElementId(id);
        canonicalName = parsed.name;
        index = parsed.index;
      } else {
        const allClasses = Array.from(element.classList);
        canonicalName = this.generateCanonicalName(element, allClasses);
        index = canonicalName in pluginElementCount ? pluginElementCount[canonicalName] + 1 : 1;
        id = `${canonicalName};${index}`;
        element.setAttribute("data-ui-tweaker-status-bar-id", id);
      }
      pluginElementCount[canonicalName] = Math.max(index, pluginElementCount[canonicalName] || 0);
      const savedItem = savedItemsMap.get(id);
      if (savedItem) {
        matchedSavedIds.add(id);
        let elementName = element.getAttribute("aria-label") || element.getAttribute("title") || ((_a = element.textContent) == null ? void 0 : _a.trim());
        const isBranch = canonicalName === "plugin-obsidian-git-branch";
        const hasGenericName = !savedItem.name || savedItem.name === canonicalName || savedItem.name === "Status bar item" || savedItem.name.startsWith("plugin-");
        if (elementName && (isBranch || hasGenericName)) {
          savedItem.name = elementName.substring(0, 50);
        }
      } else {
        let elementName = element.getAttribute("aria-label") || element.getAttribute("title") || ((_b = element.textContent) == null ? void 0 : _b.trim()) || canonicalName;
        newItems.push({
          id,
          name: elementName.substring(0, 50),
          type: "existing",
          hidden: false,
          mdOnly: false
        });
      }
    });
    if (newItems.length > 0) {
      this.plugin.settings.statusBarItems.push(...newItems);
      void this.plugin.saveSettings();
    }
  }
  /**
   * Helper to parse internal ID into name and index
   */
  parseElementId(id) {
    const parts = id.split(";");
    const indexStr = parts.pop();
    const index = parseInt(indexStr || "1", 10);
    const name = parts.join(";");
    return { name, index };
  }
  /**
   * Reorder and apply visibility to all status bar items (like Status Bar Organizer)
   * Handles sticky items (left/right) and items that aren't currently visible
   * 
   * Note: Items with the same sticky position maintain their relative order
   * (e.g., if 3 items are sticky-left, they appear in the order they're in settings)
   */
  reorder() {
    var _a;
    if (!this.container) return;
    this.isReordering = true;
    this.customActions.forEach((action) => action.remove());
    this.customActions.clear();
    const allExistingElements = Array.from(this.container.children).filter(
      (el) => el.classList.contains("status-bar-item") && !el.classList.contains("ui-tweaker-status-bar-item")
    );
    const leftSticky = [];
    const rightSticky = [];
    const regular = [];
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    for (const item of this.items) {
      if (item.hidden) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.mdOnly && !isMarkdownView(activeLeaf)) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.type === "custom") {
        const commands = this.plugin.app.commands;
        const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[item.commandId || ""];
        const mode = item.mode || "any";
        if (command && isModeActive(mode, this.plugin)) {
          this.addCustomAction(item);
          const action = this.customActions.get(item);
          if (action) {
            if (item.sticky === "left") {
              leftSticky.push(action);
            } else if (item.sticky === "right") {
              rightSticky.push(action);
            } else {
              regular.push(action);
            }
          }
        }
      } else {
        const element = allExistingElements.find(
          (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
        );
        if (element) {
          element.removeClass("ui-tweaker-status-bar-hidden");
          if (item.sticky === "left") {
            leftSticky.push(element);
          } else if (item.sticky === "right") {
            rightSticky.push(element);
          } else {
            regular.push(element);
          }
        }
      }
    }
    const orderedElements = [...leftSticky, ...regular, ...rightSticky];
    orderedElements.forEach((element) => {
      if (this.container && element.parentElement === this.container) {
        this.container.appendChild(element);
      }
    });
    orderedElements.forEach((element, index) => {
      setCssProps(element, { order: (index + 1).toString() });
    });
    setTimeout(() => {
      this.isReordering = false;
    }, 50);
  }
  /**
   * Add a custom command action to the status bar (like Commander)
   */
  addCustomAction(item) {
    if (!this.container || !item.commandId) return;
    if (this.customActions.has(item)) return;
    const btn = this.container.createDiv({
      cls: "ui-tweaker-status-bar-item status-bar-item mod-clickable",
      attr: {
        "aria-label": item.name,
        "data-tooltip-position": "top",
        "data-ui-tweaker-status-bar-id": item.id,
        "data-ui-tweaker-managed": "true"
      }
    });
    if (item.icon) {
      (0, import_obsidian14.setIcon)(btn, item.icon);
    }
    if (item.color && item.color !== "#000000") {
      setCssProps(btn, { color: item.color });
    }
    btn.onclick = () => {
      const commands = this.plugin.app.commands;
      if ((commands == null ? void 0 : commands.executeCommandById) && item.commandId) {
        void commands.executeCommandById(item.commandId);
      }
    };
    btn.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian14.Menu().addItem((menuItem) => {
        menuItem.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== item.icon) {
              item.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((menuItem) => {
        menuItem.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeItem(item);
        });
        const dom = menuItem.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    this.customActions.set(item, btn);
  }
  /**
   * Add a new custom command item
   */
  async addCustomCommand(pair) {
    if (!this.plugin.settings.statusBarItems) {
      this.plugin.settings.statusBarItems = [];
    }
    const hasMarkdownFilter = pair.showOnFileTypes && (pair.showOnFileTypes.includes("md") || pair.showOnFileTypes.includes("mdx"));
    const mdOnly = hasMarkdownFilter ? true : false;
    const item = {
      id: `custom-${pair.id}`,
      name: pair.name,
      displayName: pair.displayName,
      icon: pair.icon,
      type: "custom",
      hidden: false,
      mdOnly,
      commandId: pair.id,
      color: pair.color,
      mode: pair.mode
    };
    this.plugin.settings.statusBarItems.push(item);
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Remove an item
   */
  async removeItem(item) {
    if (!this.plugin.settings.statusBarItems) return;
    const index = this.plugin.settings.statusBarItems.indexOf(item);
    if (index > -1) {
      this.plugin.settings.statusBarItems.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item visibility
   */
  async updateItemVisibility(item, hidden) {
    item.hidden = hidden;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item md/mdx-only setting
   */
  async updateItemMdOnly(item, mdOnly) {
    item.mdOnly = mdOnly;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update button names/tooltips for all existing custom buttons
   */
  updateButtonNames() {
    this.customActions.forEach((button, item) => {
      button.setAttribute("aria-label", item.name);
      if (item.color && item.color !== "#000000") {
        setCssProps(button, { color: item.color });
      } else {
        button.style.removeProperty("color");
      }
    });
  }
};

// src/manager/ExplorerManager.ts
var import_obsidian15 = require("obsidian");
var ExplorerManager = class {
  // Flag to prevent observer from triggering during reorder
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new Map();
    this.observers = [];
    this.isReordering = false;
    this.plugin = plugin;
    this.init();
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      if (!this.plugin.settings.explorerButtonItems) {
        this.plugin.settings.explorerButtonItems = [];
      }
      this.migrateExplorerCommands();
      this.consolidateSettingsAndElements();
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          this.consolidateSettingsAndElements();
          this.reorder();
          this.applyNativeIconOverrides();
        })
      );
      this.addButtonsToAllLeaves();
      this.reorder();
      setTimeout(() => {
        this.setupMutationObserver();
      }, 100);
      this.plugin.register(() => {
        this.cleanup();
      });
    });
  }
  /**
   * Remove all buttons created by this manager from the DOM
   */
  cleanup() {
    this.observers.forEach((observer) => observer.disconnect());
    this.observers = [];
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (navButtonsContainer) {
        const managedButtons = navButtonsContainer.querySelectorAll('[data-ui-tweaker-managed="true"]');
        managedButtons.forEach((btn) => btn.remove());
      }
    });
    this.buttons.clear();
  }
  addButtonsToAllLeaves() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      this.addButtonsToExplorer(leaf);
    });
  }
  addButtonsToExplorer(leaf) {
    this.reorder();
  }
  /**
   * Migrate existing explorerCommands to explorerButtonItems
   */
  migrateExplorerCommands() {
  }
  createOrUpdateExplorerButton(container, pair, leaf) {
    const existingButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
    if (existingButton) {
      existingButton.setAttribute("aria-label", pair.name);
      if (pair.color && pair.color !== "#000000") {
        existingButton.style.color = pair.color;
      } else {
        existingButton.style.removeProperty("color");
      }
      this.updateButtonToggleState(existingButton, pair);
      return existingButton;
    }
    if (!isModeActive(pair.mode, this.plugin)) {
      return null;
    }
    const button = createDiv({
      cls: "clickable-icon nav-action-button",
      attr: {
        "data-explorer-command-id": pair.id,
        "aria-label": pair.name,
        "aria-label-position": "top",
        "data-ui-tweaker-managed": "true"
      }
    });
    this.updateButtonToggleState(button, pair);
    button.onclick = () => {
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(pair.id);
        setTimeout(() => {
          this.updateButtonToggleState(button, pair);
          this.updateAllButtonsForCommand(pair.id);
        }, 100);
      }
    };
    this.buttons.set(pair.id, button);
    button.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian15.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    container.appendChild(button);
    return button;
  }
  /**
   * Generate canonical name from button element
   */
  generateCanonicalName(element, ariaLabel) {
    const nativeButtonMap = {
      "New note": "newNote",
      "New folder": "newFolder",
      "Change sort order": "sortOrder",
      "Auto-reveal current file": "autoReveal",
      "Collapse all": "collapseAll",
      "Expand all": "collapseAll"
      // Both map to same key
    };
    if (nativeButtonMap[ariaLabel]) {
      return `native-${nativeButtonMap[ariaLabel]}`;
    }
    const commandId = element.getAttribute("data-explorer-command-id");
    if (commandId) {
      return `custom-${commandId}`;
    }
    const allClasses = Array.from(element.classList);
    const ignoredClasses = ["clickable-icon", "nav-action-button"];
    const stableClasses = allClasses.filter((cls) => !ignoredClasses.includes(cls));
    const pluginClass = stableClasses.find(
      (cls) => cls.includes("plugin-") || cls.includes("commander") || cls.includes("explorer-focus")
    );
    if (pluginClass) {
      const sanitizedAriaLabel = ariaLabel.toLowerCase().replace(/[^a-z0-9]+/g, "-");
      return `external-${pluginClass}-${sanitizedAriaLabel}`;
    }
    const sanitized = ariaLabel.toLowerCase().replace(/[^a-z0-9]+/g, "-");
    return `external-${sanitized}`;
  }
  /**
   * Consolidate settings and elements - detect all buttons and merge with saved items
   */
  consolidateSettingsAndElements() {
    var _a, _b;
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    if (explorers.length === 0) return;
    const firstExplorer = explorers[0];
    const navButtonsContainer = (_b = (_a = firstExplorer.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
    if (!navButtonsContainer) return;
    const existingButtons = Array.from(navButtonsContainer.querySelectorAll(".nav-action-button")).filter(
      (element) => {
        if (element.getAttribute("data-ui-tweaker-managed") === "true") {
          const commandId = element.getAttribute("data-explorer-command-id");
          if (!commandId || !this.plugin.settings.explorerButtonItems.some((item) => item.commandId === commandId)) {
            return false;
          }
        }
        return true;
      }
    );
    const savedItems = this.plugin.settings.explorerButtonItems || [];
    const savedItemsMap = new Map(savedItems.map((item) => [item.id, item]));
    const matchedSavedIds = /* @__PURE__ */ new Set();
    const newItems = [];
    const elementCount = {};
    existingButtons.forEach((element) => {
      const ariaLabel = element.getAttribute("aria-label") || "";
      const commandId = element.getAttribute("data-explorer-command-id");
      const canonicalName = this.generateCanonicalName(element, ariaLabel);
      let id = canonicalName;
      if (canonicalName.startsWith("native-")) {
        id = canonicalName;
      } else if (canonicalName.startsWith("custom-")) {
        id = canonicalName;
      } else {
        const baseName = canonicalName;
        const count = baseName in elementCount ? elementCount[baseName] + 1 : 1;
        elementCount[baseName] = count;
        id = count > 1 ? `${baseName};${count}` : baseName;
      }
      if (savedItemsMap.has(id)) {
        matchedSavedIds.add(id);
        const savedItem = savedItemsMap.get(id);
        if (!savedItem.name || savedItem.name === id || savedItem.name.startsWith("external-")) {
          savedItem.name = ariaLabel || savedItem.name || id;
        }
        if (ariaLabel) {
          savedItem.ariaLabel = ariaLabel;
        }
      } else {
        let type;
        if (canonicalName.startsWith("native-")) {
          type = "native";
        } else if (canonicalName.startsWith("custom-")) {
          type = "custom";
        } else {
          type = "external";
        }
        const newItem = {
          id,
          name: ariaLabel || id,
          ariaLabel,
          type,
          commandId: commandId || void 0,
          hidden: false
        };
        if (type === "custom" && commandId) {
          const existingCommand = this.plugin.settings.explorerCommands.find((c) => c.id === commandId);
          if (existingCommand) {
            newItem.icon = existingCommand.icon;
            newItem.displayName = existingCommand.displayName;
            newItem.mode = existingCommand.mode;
            newItem.color = existingCommand.color;
            newItem.showOnFileTypes = existingCommand.showOnFileTypes;
            newItem.hideOnFileTypes = existingCommand.hideOnFileTypes;
            newItem.toggleIcon = existingCommand.toggleIcon;
            newItem.useActiveClass = existingCommand.useActiveClass;
          }
        }
        newItems.push(newItem);
      }
    });
    if (newItems.length > 0) {
      this.plugin.settings.explorerButtonItems.push(...newItems);
      void this.plugin.saveSettings();
    }
  }
  /**
   * Set up mutation observer to detect new external buttons
   */
  setupMutationObserver() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    if (explorers.length === 0) return;
    explorers.forEach((explorer) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = explorer.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      let observerTimeout = null;
      const observer = new MutationObserver((mutations) => {
        if (this.isReordering) return;
        const hasNewNodes = mutations.some(
          (mutation) => mutation.addedNodes.length > 0 && Array.from(mutation.addedNodes).some(
            (node) => node instanceof HTMLElement && node.classList.contains("nav-action-button") && !node.hasAttribute("data-explorer-command-id")
            // Only external buttons (not our custom ones)
          )
        );
        if (!hasNewNodes) return;
        if (observerTimeout) {
          clearTimeout(observerTimeout);
        }
        observerTimeout = setTimeout(() => {
          if (!this.isReordering) {
            this.consolidateSettingsAndElements();
            this.reorder();
          }
        }, 1e3);
      });
      observer.observe(navButtonsContainer, { childList: true, subtree: false });
      this.observers.push(observer);
    });
  }
  /**
   * Reorder buttons based on settings order
   */
  reorder() {
    this.isReordering = true;
    this.observers.forEach((observer) => observer.disconnect());
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const allButtons = Array.from(navButtonsContainer.querySelectorAll(".nav-action-button"));
      const buttonMap = /* @__PURE__ */ new Map();
      allButtons.forEach((button) => {
        const ariaLabel = button.getAttribute("aria-label") || "";
        const canonicalName = this.generateCanonicalName(button, ariaLabel);
        if (canonicalName.startsWith("native-")) {
          buttonMap.set(canonicalName, button);
        } else if (canonicalName.startsWith("custom-")) {
          buttonMap.set(canonicalName, button);
        } else {
          const savedItems = this.plugin.settings.explorerButtonItems || [];
          const matchingItem = savedItems.find((item) => {
            if (item.id === canonicalName) return true;
            if (item.id.startsWith(canonicalName + ";")) return true;
            return item.ariaLabel === ariaLabel && item.type === "external";
          });
          if (matchingItem) {
            buttonMap.set(matchingItem.id, button);
          }
        }
      });
      const orderedButtons = [];
      const items = this.plugin.settings.explorerButtonItems || [];
      items.forEach((item) => {
        if (item.hidden) {
          const button = buttonMap.get(item.id);
          if (button) {
            button.classList.add("ui-tweaker-explorer-button-hidden");
            buttonMap.delete(item.id);
          }
        }
      });
      for (const item of items) {
        if (item.hidden) continue;
        const button = buttonMap.get(item.id);
        if (button) {
          button.classList.remove("ui-tweaker-explorer-button-hidden");
          orderedButtons.push(button);
          buttonMap.delete(item.id);
        } else if (item.type === "custom") {
          const commandPair = this.plugin.settings.explorerCommands.find((c) => c.id === item.commandId);
          if (commandPair) {
            const newButton = this.createOrUpdateExplorerButton(navButtonsContainer, commandPair, leaf);
            if (newButton) {
              orderedButtons.push(newButton);
            }
          }
        }
      }
      buttonMap.forEach((button, id) => {
        const item = items.find((i) => i.id === id);
        if (!item && !id.startsWith("native-") && !id.startsWith("external-")) {
          button.remove();
        }
      });
      orderedButtons.forEach((button) => {
        if (button.parentElement === navButtonsContainer) {
          navButtonsContainer.appendChild(button);
        }
      });
      this.applyNativeIconOverrides();
    });
    setTimeout(() => {
      this.isReordering = false;
      this.observers = [];
      this.setupMutationObserver();
    }, 200);
  }
  /**
   * Update button toggle state (icon or is-active class)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon && !pair.useActiveClass) {
      button.empty();
      (0, import_obsidian15.setIcon)(button, pair.icon);
      button.classList.remove("is-active");
      if (pair.color && pair.color !== "#000000") {
        button.style.color = pair.color;
      } else {
        button.style.removeProperty("color");
      }
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    if (pair.useActiveClass) {
      const currentIcon = button.querySelector(".svg-icon");
      const iconName = pair.icon.replace("lucide-", "");
      if (!currentIcon || !currentIcon.classList.contains(iconName)) {
        button.empty();
        (0, import_obsidian15.setIcon)(button, pair.icon);
      }
      if (isChecked) {
        button.classList.add("is-active");
      } else {
        button.classList.remove("is-active");
      }
    } else if (pair.toggleIcon) {
      button.empty();
      (0, import_obsidian15.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
      button.classList.remove("is-active");
    }
    if (pair.color && pair.color !== "#000000") {
      button.style.color = pair.color;
    } else {
      button.style.removeProperty("color");
    }
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button) {
          button.setAttribute("aria-label", pair.name);
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Update all buttons for a specific command ID across all explorers
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.plugin.settings.explorerCommands.find((p) => p.id === commandId);
    if (!pair) return;
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${commandId}"]`);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button && (pair.toggleIcon || pair.useActiveClass)) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Apply icon overrides to native explorer buttons
   */
  applyNativeIconOverrides() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    const iconOverrides = this.plugin.settings.nativeExplorerButtonIcons;
    const defaultIcons = {
      "New note": { icon: "lucide-edit", key: "newNote" },
      "New folder": { icon: "lucide-folder-plus", key: "newFolder" },
      "Change sort order": { icon: "lucide-sort-asc", key: "sortOrder" },
      "Auto-reveal current file": { icon: "lucide-gallery-vertical", key: "autoReveal" },
      "Collapse all": { icon: "lucide-chevrons-up-down", key: "collapseAll" }
    };
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const nativeButtons = navButtonsContainer.querySelectorAll(".nav-action-button:not([data-explorer-command-id])");
      nativeButtons.forEach((button) => {
        const ariaLabel = button.getAttribute("aria-label");
        if (!ariaLabel) return;
        const buttonInfo = defaultIcons[ariaLabel];
        if (!buttonInfo) return;
        const iconKey = buttonInfo.key;
        const iconOverride = iconOverrides == null ? void 0 : iconOverrides[iconKey];
        const colorOverrides = this.plugin.settings.nativeExplorerButtonColors;
        const color = colorOverrides == null ? void 0 : colorOverrides[iconKey];
        button.empty();
        if (iconOverride) {
          (0, import_obsidian15.setIcon)(button, iconOverride);
        } else {
          (0, import_obsidian15.setIcon)(button, buttonInfo.icon);
        }
        if (color) {
          button.style.color = color;
        } else {
          button.style.removeProperty("color");
        }
      });
    });
  }
  /**
   * Remove a command from explorer
   */
  async removeCommand(pair) {
    if (!this.plugin.settings.explorerCommands) return;
    const index = this.plugin.settings.explorerCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.explorerCommands.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
};

// src/utils/ButtonReplacer.ts
var import_obsidian16 = require("obsidian");
var ButtonReplacer = class {
  constructor(selector, replacementIcon, callback, options) {
    this.selector = selector;
    this.replacementIcon = replacementIcon;
    this.callback = callback;
    this.options = options;
    this.customButton = null;
    this.originalButton = null;
    this.observer = null;
    this.installTimeout = null;
  }
  install() {
    this.tryInstall();
    this.installTimeout = window.setTimeout(() => this.tryInstall(), 500);
    if (this.options.survivalObserver) {
      this.setupObserver();
    }
  }
  tryInstall() {
    var _a, _b, _c, _d;
    const parent = this.options.parentSelector ? document.querySelector(this.options.parentSelector) : document.body;
    if (!parent) return;
    let originalBtn = null;
    if (this.options.findButton) {
      originalBtn = this.options.findButton(parent);
    } else {
      originalBtn = parent.querySelector(this.selector);
    }
    if (!originalBtn) {
      if (this.options.fallbackParentSelector) {
        this.tryFallbackInstall();
      }
      return;
    }
    if (this.customButton && this.customButton.parentElement && document.body.contains(this.customButton)) {
      return;
    }
    this.removeCustomButton();
    const customButton = originalBtn.cloneNode(true);
    customButton.removeAttribute("aria-label");
    customButton.setAttribute(`data-${this.options.uniqueId}`, "true");
    if (this.options.cssClass) {
      this.options.cssClass.split(" ").filter(Boolean).forEach((cls) => customButton.classList.add(cls));
    }
    if (this.options.stripClasses) {
      this.options.stripClasses.forEach((cls) => customButton.classList.remove(cls));
    }
    customButton.onclick = null;
    const iconContainer = ((_a = customButton.querySelector("svg")) == null ? void 0 : _a.parentElement) || customButton;
    try {
      const oldSvg = customButton.querySelector("svg");
      if (oldSvg) oldSvg.remove();
      (0, import_obsidian16.setIcon)(iconContainer, this.replacementIcon);
    } catch (e) {
      console.error(`[UI Tweaker] Failed to set icon ${this.replacementIcon}:`, e);
      try {
        (0, import_obsidian16.setIcon)(iconContainer, "wrench");
      } catch (e2) {
      }
    }
    const handler = (evt) => {
      evt.preventDefault();
      evt.stopPropagation();
      this.callback();
    };
    customButton.addEventListener("click", handler, (_b = this.options.useCapture) != null ? _b : true);
    if (this.options.handleTouch) {
      customButton.addEventListener("touchstart", handler, (_c = this.options.useCapture) != null ? _c : true);
    }
    (_d = originalBtn.parentElement) == null ? void 0 : _d.insertBefore(customButton, originalBtn);
    this.customButton = customButton;
    this.originalButton = originalBtn;
    if (this.options.onAfterInstall) {
      this.options.onAfterInstall(customButton, originalBtn);
    }
  }
  tryFallbackInstall() {
    var _a, _b;
    const fallbackParent = document.querySelector(this.options.fallbackParentSelector);
    if (!fallbackParent) return;
    if (fallbackParent.querySelector(`[data-${this.options.uniqueId}]`)) return;
    const customButton = document.createElement("div");
    customButton.className = `clickable-icon ${this.options.cssClass}`;
    customButton.setAttribute(`data-${this.options.uniqueId}`, "true");
    try {
      (0, import_obsidian16.setIcon)(customButton, this.replacementIcon);
    } catch (e) {
      (0, import_obsidian16.setIcon)(customButton, "wrench");
    }
    const handler = (evt) => {
      evt.preventDefault();
      evt.stopPropagation();
      this.callback();
    };
    customButton.addEventListener("click", handler, (_a = this.options.useCapture) != null ? _a : true);
    if (this.options.handleTouch) {
      customButton.addEventListener("touchstart", handler, (_b = this.options.useCapture) != null ? _b : true);
    }
    if (this.options.fallbackInsertBehavior === "start") {
      fallbackParent.prepend(customButton);
    } else {
      fallbackParent.appendChild(customButton);
    }
    this.customButton = customButton;
    this.originalButton = null;
    if (this.options.onAfterInstall) {
      this.options.onAfterInstall(customButton, null);
    }
  }
  uninstall() {
    if (this.installTimeout) {
      clearTimeout(this.installTimeout);
      this.installTimeout = null;
    }
    if (this.observer) {
      this.observer.disconnect();
      this.observer = null;
    }
    if (this.options.onBeforeUninstall) {
      this.options.onBeforeUninstall(this.customButton);
    }
    this.removeCustomButton();
    this.originalButton = null;
  }
  removeCustomButton() {
    if (this.customButton) {
      if (this.customButton.parentElement) {
        this.customButton.remove();
      }
      this.customButton = null;
    }
    const strays = document.querySelectorAll(`.${this.options.cssClass}`);
    strays.forEach((el) => el.remove());
  }
  setupObserver() {
    if (this.observer) this.observer.disconnect();
    let mutationCount = 0;
    let timer = null;
    this.observer = new MutationObserver(() => {
      mutationCount++;
      if (timer) window.clearTimeout(timer);
      const delay = mutationCount < 20 ? 0 : 100;
      if (delay === 0) {
        this.tryInstall();
      } else {
        timer = window.setTimeout(() => this.tryInstall(), delay);
      }
    });
    this.observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ["class", "src", "aria-label"]
    });
  }
};

// src/manager/PropertiesManager.ts
var import_obsidian17 = require("obsidian");
var PropertiesManager = class {
  constructor(plugin) {
    this.observers = [];
    this.plugin = plugin;
    this.init();
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      this.refresh();
      this.setupObservers();
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          this.refresh();
          this.setupObservers();
        })
      );
      this.plugin.registerDomEvent(window, "contextmenu", (evt) => {
        if (!this.plugin.settings.showPropertyMenuActions) return;
        const target = evt.target;
        const propEl = target.closest(".metadata-property") || target.closest(".all-properties-container .tree-item");
        if (propEl) {
          this.handleContextMenu(evt, propEl);
        }
      }, { capture: true });
      this.plugin.register(() => {
        this.observers.forEach((o) => o.disconnect());
      });
    });
  }
  /**
   * Force a refresh of all property icons
   */
  refresh() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const type = leaf.getViewState().type;
      if (type === "markdown" || type === "all-properties" || type === "file-properties") {
        this.refreshLeaf(leaf);
      }
    });
  }
  refreshLeaf(leaf) {
    const type = leaf.getViewState().type;
    const container = leaf.view.containerEl;
    if (type === "all-properties") {
      this.refreshAllPropertiesInContainer(container);
    } else {
      this.refreshFilePropertiesInContainer(container);
    }
  }
  setupObservers() {
    this.observers.forEach((o) => o.disconnect());
    this.observers = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const type = leaf.getViewState().type;
      if (type === "all-properties") {
        const container = leaf.view.containerEl.querySelector(".all-properties-container") || leaf.view.containerEl.querySelector(".view-content > div");
        if (container) {
          const observer = new MutationObserver(() => this.refreshAllPropertiesInContainer(leaf.view.containerEl));
          observer.observe(container, { childList: true, subtree: true });
          this.observers.push(observer);
        }
      } else if (type === "markdown" || type === "file-properties") {
        const container = leaf.view.containerEl.querySelector(".metadata-container") || leaf.view.containerEl.querySelector(".metadata-properties");
        if (container) {
          const observer = new MutationObserver(() => this.refreshFilePropertiesInContainer(leaf.view.containerEl));
          observer.observe(container, { childList: true, subtree: true });
          this.observers.push(observer);
        }
      }
    });
  }
  refreshAllPropertiesInContainer(container) {
    const items = container.querySelectorAll(".tree-item");
    items.forEach((item) => {
      var _a;
      const textEl = item.querySelector(".tree-item-inner-text");
      if (!textEl) return;
      const propName = (_a = textEl.textContent) == null ? void 0 : _a.trim();
      if (!propName) return;
      const setting = this.plugin.settings.propertyIconItems.find((i) => i.id.toLowerCase() === propName.toLowerCase());
      const iconEl = item.querySelector(".tree-item-icon");
      if (iconEl) {
        if (setting == null ? void 0 : setting.icon) {
          this.applyIcon(iconEl, setting.icon, setting.color);
          item.addClass("ui-tweaker-property-custom-icon");
        } else if (item.hasClass("ui-tweaker-property-custom-icon")) {
          this.restoreNativeIcon(iconEl, propName);
          item.removeClass("ui-tweaker-property-custom-icon");
          this.triggerViewUpdate(container);
        }
      }
    });
  }
  refreshFilePropertiesInContainer(container) {
    const props = container.querySelectorAll(".metadata-property");
    props.forEach((prop) => {
      var _a;
      const keyInput = prop.querySelector(".metadata-property-key-input");
      const keyText = prop.querySelector(".metadata-property-key-text");
      const propName = (_a = (keyInput == null ? void 0 : keyInput.value) || (keyText == null ? void 0 : keyText.textContent)) == null ? void 0 : _a.trim();
      if (!propName) return;
      const setting = this.plugin.settings.propertyIconItems.find((i) => i.id.toLowerCase() === propName.toLowerCase());
      const iconContainer = prop.querySelector(".metadata-property-icon");
      if (iconContainer) {
        if (setting == null ? void 0 : setting.icon) {
          this.applyIcon(iconContainer, setting.icon, setting.color);
          prop.addClass("ui-tweaker-property-custom-icon");
        } else if (prop.hasClass("ui-tweaker-property-custom-icon")) {
          this.restoreNativeIcon(iconContainer, propName);
          prop.removeClass("ui-tweaker-property-custom-icon");
          this.triggerViewUpdate(container);
        }
        if (this.plugin.settings.minimalPropertyIcons) {
          prop.addClass("ui-tweaker-property-minimal");
        } else {
          prop.removeClass("ui-tweaker-property-minimal");
        }
      }
    });
  }
  restoreNativeIcon(el, propName) {
    el.style.removeProperty("color");
    const savedIcon = el.getAttribute("data-ui-tweaker-native-icon");
    if (savedIcon) {
      (0, import_obsidian17.setIcon)(el, savedIcon);
      el.removeAttribute("data-ui-tweaker-native-icon");
      return;
    }
    const type = this.getPropertyType(propName);
    (0, import_obsidian17.setIcon)(el, this.getDefaultIcon(propName, type));
  }
  getPropertyType(propName) {
    const typeManager = this.plugin.app.metadataTypeManager;
    const lowerName = propName.toLowerCase();
    if (lowerName === "tags") return "multiselect";
    if (lowerName === "aliases") return "multiselect";
    if (typeManager) {
      if (typeManager.getAssignedType) {
        const type = typeManager.getAssignedType(propName);
        if (type) return type;
      }
      const props = typeManager.properties || {};
      const key = Object.keys(props).find((k) => k.toLowerCase() === lowerName);
      if (key) return props[key].type || "text";
      if (typeManager.types && typeManager.types[propName]) {
        return typeManager.types[propName];
      }
    }
    return "text";
  }
  getDefaultIcon(propName, type) {
    const lowerName = propName.toLowerCase();
    if (lowerName === "tags") return "tags";
    if (lowerName === "aliases") return "forward";
    switch (type) {
      case "text":
        return "text-align-start";
      case "number":
        return "binary";
      case "checkbox":
      case "boolean":
        return "square-check-big";
      case "date":
        return "calendar";
      case "datetime":
        return "clock";
      case "list":
        return "list";
      case "multiselect":
        return "list";
      default:
        return "text-align-start";
    }
  }
  handleContextMenu(evt, propEl) {
    var _a;
    const keyInput = propEl.querySelector(".metadata-property-key-input");
    const keyText = propEl.querySelector(".tree-item-inner-text") || propEl.querySelector(".metadata-property-key-text");
    const propName = (_a = (keyInput == null ? void 0 : keyInput.value) || (keyText == null ? void 0 : keyText.textContent)) == null ? void 0 : _a.trim();
    if (!propName) return;
    const normalizedPropName = propName.toLowerCase();
    const setting = this.plugin.settings.propertyIconItems.find((i) => i.id.toLowerCase() === normalizedPropName);
    this.plugin.menuManager.reset();
    this.plugin.menuManager.addItemAfter(["action.changeType", "action"], (item) => {
      item.setTitle((setting == null ? void 0 : setting.icon) ? "Change icon" : "Add icon").setIcon("lucide-image-plus").onClick(() => {
        const modal = new IconPickerModal(this.plugin.app, async (iconId) => {
          let currentItem = this.plugin.settings.propertyIconItems.find((i) => i.id.toLowerCase() === normalizedPropName);
          if (!currentItem) {
            currentItem = { id: normalizedPropName };
            this.plugin.settings.propertyIconItems.push(currentItem);
          }
          currentItem.icon = iconId || void 0;
          if (!currentItem.icon && !currentItem.color) {
            this.plugin.settings.propertyIconItems = this.plugin.settings.propertyIconItems.filter((i) => i.id.toLowerCase() !== normalizedPropName);
          }
          await this.plugin.saveSettings();
          this.refresh();
        });
        modal.open();
      });
    });
    if (setting == null ? void 0 : setting.icon) {
      this.plugin.menuManager.addItemAfter(["action.changeType", "action"], (item) => {
        item.setTitle("Remove icon").setIcon("lucide-trash").onClick(async () => {
          const currentItem = this.plugin.settings.propertyIconItems.find((i) => i.id.toLowerCase() === normalizedPropName);
          if (currentItem) {
            currentItem.icon = void 0;
            if (!currentItem.color) {
              this.plugin.settings.propertyIconItems = this.plugin.settings.propertyIconItems.filter((i) => i.id.toLowerCase() !== normalizedPropName);
            }
            await this.plugin.saveSettings();
            this.refresh();
          }
        });
      });
    }
  }
  triggerViewUpdate(container) {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf.view.containerEl.contains(container)) {
        const view = leaf.view;
        if (leaf.getViewState().type === "all-properties" && view.refresh) {
          view.refresh();
        } else {
          const metadataEditor = view.metadataEditor;
          if (metadataEditor && metadataEditor.render) {
            metadataEditor.render();
          }
        }
      }
    });
  }
  applyIcon(el, icon, color) {
    if (!el.hasAttribute("data-ui-tweaker-native-icon")) {
      const svg = el.querySelector("svg");
      if (svg) {
        const lucideClass = Array.from(svg.classList).find((c) => c.startsWith("lucide-") && c !== "lucide-icon");
        if (lucideClass) {
          const nativeName = lucideClass.replace("lucide-", "");
          el.setAttribute("data-ui-tweaker-native-icon", nativeName);
        }
      }
    }
    const isLucide = icon.startsWith("lucide-") || icon.match(/^[a-z0-9-]+$/);
    if (isLucide) {
      const iconName = icon.startsWith("lucide-") ? icon.substring(7) : icon;
      const currentIcon = el.querySelector(`.lucide-${iconName}`);
      if (!currentIcon) {
        el.empty();
        (0, import_obsidian17.setIcon)(el, icon);
      }
    } else {
      if (el.textContent !== icon) {
        el.empty();
        el.textContent = icon;
        el.addClass("ui-tweaker-emoji-icon");
      }
    }
    if (color) {
      setCssProps(el, { color });
    } else {
      el.style.removeProperty("color");
    }
  }
};

// src/manager/MenuManager.ts
var import_obsidian18 = require("obsidian");
var MenuManager = class {
  constructor() {
    this.menu = null;
    this.queuedActions = [];
    const manager = this;
    this.showAtPositionOriginal = import_obsidian18.Menu.prototype.showAtPosition;
    this.showAtPositionProxy = new Proxy(import_obsidian18.Menu.prototype.showAtPosition, {
      apply(target, thisArg, argArray) {
        manager.menu = thisArg;
        if (manager.queuedActions.length > 0) {
          manager.runQueuedActions();
        }
        return target.apply(thisArg, argArray);
      }
    });
    import_obsidian18.Menu.prototype.showAtPosition = this.showAtPositionProxy;
  }
  /**
   * Run all actions in the queue on the current menu.
   */
  runQueuedActions() {
    const actions = this.queuedActions;
    this.queuedActions = [];
    for (const action of actions) {
      action();
    }
  }
  /**
   * Add a menu item to the current menu (or queue it if no menu is open).
   */
  addItem(callback) {
    if (this.menu) {
      this.menu.addItem(callback);
    } else {
      this.queuedActions.push(() => this.addItem(callback));
    }
    return this;
  }
  /**
   * Add a menu item after the given sections.
   * This uses private API to reorder sections.
   */
  addItemAfter(preSections, callback) {
    if (this.menu) {
      if (typeof preSections === "string") preSections = [preSections];
      this.menu.addItem((item) => {
        callback(item);
        const menu = this.menu;
        const itemInternal = item;
        if (!menu || !itemInternal.section) return;
        const sections = menu.sections || [];
        const currentSection = itemInternal.section;
        let index = 0;
        for (const preSection of preSections) {
          const pos = sections.lastIndexOf(preSection);
          if (pos !== -1) {
            index = pos + 1;
            break;
          }
        }
        const sectionIdx = sections.indexOf(currentSection);
        if (sectionIdx !== -1) {
          sections.splice(sectionIdx, 1);
          sections.splice(index, 0, currentSection);
        }
      });
    } else {
      this.queuedActions.push(() => this.addItemAfter(preSections, callback));
    }
    return this;
  }
  /**
   * Clear the queue.
   */
  flush() {
    this.queuedActions = [];
  }
  /**
   * Reset for a new cycle.
   */
  reset() {
    this.menu = null;
    this.flush();
  }
  /**
   * Restore original method.
   */
  unload() {
    if (import_obsidian18.Menu.prototype.showAtPosition === this.showAtPositionProxy) {
      import_obsidian18.Menu.prototype.showAtPosition = this.showAtPositionOriginal;
    }
  }
};

// src/main.ts
var UITweakerPlugin = class extends import_obsidian19.Plugin {
  constructor() {
    super(...arguments);
    // Track wrapped commands to avoid double-wrapping and allow cleanup
    this.wrappedCommands = /* @__PURE__ */ new Map();
  }
  get isMobile() {
    return import_obsidian19.Platform.isMobile || document.body.classList.contains("is-mobile") || document.body.classList.contains("emulate-mobile");
  }
  async onload() {
    await this.loadSettings();
    this.menuManager = new MenuManager();
    this.uiManager = new UIManager(this, this.settings);
    this.uiManager.applyStyles();
    if (!this.settings.tabBarCommands) {
      this.settings.tabBarCommands = [];
    }
    this.tabBarManager = new TabBarManager(this);
    if (!this.settings.statusBarItems) {
      this.settings.statusBarItems = [];
    }
    this.statusBarManager = new StatusBarManager(this);
    if (!this.settings.explorerCommands) {
      this.settings.explorerCommands = [];
    }
    this.explorerManager = new ExplorerManager(this);
    this.propertiesManager = new PropertiesManager(this);
    registerCommands({
      plugin: this,
      settings: this.settings,
      saveSettings: () => this.saveSettings(),
      refresh: () => this.refresh()
    });
    this.setupToggleStateRefresh();
    this.setupToggleStateObservers();
    this.settingTab = new UITweakerSettingTab(this.app, this);
    this.addSettingTab(this.settingTab);
    this.setupHelpButtonReplacement();
    if (this.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
  }
  onunload() {
    var _a, _b;
    if (this.uiManager) {
      this.uiManager.cleanup();
    }
    if (this.explorerManager) {
      this.explorerManager.cleanup();
    }
    if (this.statusBarManager) {
      this.statusBarManager.cleanup();
    }
    if (this.menuManager) {
      this.menuManager.unload();
    }
    (_a = this.helpButtonReplacer) == null ? void 0 : _a.uninstall();
    (_b = this.syncButtonReplacer) == null ? void 0 : _b.uninstall();
    for (const wrapper of this.wrappedCommands.values()) {
      wrapper.restore();
    }
    this.wrappedCommands.clear();
    document.body.classList.remove("ui-tweaker-hide-help-button");
    document.body.classList.remove("ui-tweaker-hide-sync-button");
  }
  async loadSettings() {
    try {
      const data = await this.loadData();
      if (!data || typeof data !== "object" || Array.isArray(data)) {
        this.settings = Object.assign({}, DEFAULT_SETTINGS);
        await this.saveSettings();
        return;
      }
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
      if (!this.settings.helpButtonReplacement) {
        this.settings.helpButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "settings-2"
        };
      } else {
        if (!this.settings.helpButtonReplacement.iconId) {
          this.settings.helpButtonReplacement.iconId = "wrench";
        }
      }
      if (!this.settings.syncButtonReplacement) {
        this.settings.syncButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "wrench"
        };
      } else {
        if (!this.settings.syncButtonReplacement.iconId) {
          this.settings.syncButtonReplacement.iconId = "wrench";
        }
      }
      if (this.settings.tabBarCommands) {
        let needsSave = false;
        for (const pair of this.settings.tabBarCommands) {
          const pairWithOldProps = pair;
          if (pair.showOnFileTypes !== void 0 || pair.hideOnFileTypes !== void 0) {
            continue;
          }
          if (pairWithOldProps.mdOnly === true && !pair.showOnFileTypes) {
            pair.showOnFileTypes = "md,mdx";
            delete pairWithOldProps.mdOnly;
            needsSave = true;
          }
          if (pairWithOldProps.fileTypeFilter && !pair.showOnFileTypes && !pair.hideOnFileTypes) {
            const filter = pairWithOldProps.fileTypeFilter;
            const parts = filter.split(",").map((p) => p.trim()).filter((p) => p);
            const showTypes = [];
            const hideTypes = [];
            for (const part of parts) {
              if (part.startsWith("-")) {
                const ext = part.slice(1).replace(/^\./, "").toLowerCase();
                if (ext) hideTypes.push(ext);
              } else {
                const ext = part.replace(/^\./, "").toLowerCase();
                if (ext) showTypes.push(ext);
              }
            }
            if (showTypes.length > 0) {
              pair.showOnFileTypes = showTypes.join(",");
            }
            if (hideTypes.length > 0) {
              pair.hideOnFileTypes = hideTypes.join(",");
            }
            delete pairWithOldProps.fileTypeFilter;
            needsSave = true;
          }
        }
        if (needsSave) {
          await this.saveSettings();
        }
      }
      if (this.settings.propertyIconItems) {
        let needsSave = false;
        for (const item of this.settings.propertyIconItems) {
          if (item.id !== item.id.toLowerCase()) {
            item.id = item.id.toLowerCase();
            needsSave = true;
          }
        }
        if (needsSave) {
          await this.saveSettings();
        }
      }
    } catch (error) {
      console.error("[UI Tweaker] Failed to load settings:", error);
      this.settings = { ...DEFAULT_SETTINGS };
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  refresh() {
    var _a, _b;
    if (this.uiManager) {
      this.uiManager.updateSettings(this.settings);
    }
    (_a = this.explorerManager) == null ? void 0 : _a.applyNativeIconOverrides();
    this.setupHelpButtonReplacement();
    this.updateSyncButtonCSS();
    if (this.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
      (_b = this.syncButtonReplacer) == null ? void 0 : _b.uninstall();
    }
  }
  setupHelpButtonReplacement() {
    var _a, _b;
    this.updateHelpButtonCSS();
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      (_b = this.helpButtonReplacer) == null ? void 0 : _b.uninstall();
      this.helpButtonReplacer = void 0;
      return;
    }
    if (!this.helpButtonReplacer) {
      this.helpButtonReplacer = new ButtonReplacer(
        ".clickable-icon svg.help",
        this.settings.helpButtonReplacement.iconId || "settings-2",
        () => {
          var _a2;
          const commandId = (_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.commandId;
          if (commandId) {
            void (async () => {
              try {
                const commands = this.app.commands;
                if (commands == null ? void 0 : commands.executeCommandById) {
                  await commands.executeCommandById(commandId);
                } else {
                  throw new Error("Command execution not available");
                }
              } catch (e) {
                new import_obsidian19.Notice(`Failed to execute command: ${commandId}`);
              }
            })();
          }
        },
        {
          survivalObserver: true,
          parentSelector: ".workspace-drawer-vault-actions",
          uniqueId: "ui-tweaker-help-replacement",
          cssClass: "ui-tweaker-help-replacement",
          findButton: (parent) => {
            const selectors = [
              ".workspace-drawer-vault-actions .clickable-icon svg.help",
              ".workspace-sidedock-vault-profile .clickable-icon svg.help",
              ".workspace-drawer .clickable-icon svg.help",
              ".clickable-icon svg.help"
            ];
            for (const selector of selectors) {
              const svg = document.querySelector(selector);
              if (svg && svg.parentElement) return svg.parentElement;
            }
            return null;
          }
        }
      );
      this.helpButtonReplacer.install();
    } else {
      this.helpButtonReplacer.uninstall();
      this.helpButtonReplacer = void 0;
      this.setupHelpButtonReplacement();
    }
  }
  updateHelpButtonCSS() {
    var _a;
    const shouldHideHelpButton = this.settings.helpButton === "hide" || ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled);
    document.body.classList.toggle("ui-tweaker-hide-help-button", shouldHideHelpButton);
  }
  setupSyncButtonReplacement() {
    var _a, _b;
    this.updateSyncButtonCSS();
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) || !this.isMobile) {
      (_b = this.syncButtonReplacer) == null ? void 0 : _b.uninstall();
      this.syncButtonReplacer = void 0;
      return;
    }
    if (!this.syncButtonReplacer) {
      this.syncButtonReplacer = new ButtonReplacer(
        ".sync-status-icon",
        this.settings.syncButtonReplacement.iconId || "wrench",
        () => {
          var _a2, _b2, _c, _d, _e;
          const commandId = (_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.commandId;
          if (commandId) {
            if (commandId === "open-settings" || commandId === "ui-tweaker:open-settings") {
              const settingApi = this.app.setting;
              if (settingApi) {
                (_b2 = settingApi.open) == null ? void 0 : _b2.call(settingApi);
                if (((_c = this.settingTab) == null ? void 0 : _c.id) && settingApi.openTabById) {
                  settingApi.openTabById(this.settingTab.id);
                }
              }
            } else {
              (_e = (_d = this.app.commands) == null ? void 0 : _d.executeCommandById) == null ? void 0 : _e.call(_d, commandId).catch((error) => {
                console.warn("[UI Tweaker] Error executing command:", error);
                new import_obsidian19.Notice(`Failed to execute command: ${commandId}`);
              });
            }
          }
        },
        {
          survivalObserver: true,
          parentSelector: ".workspace-drawer.mod-right",
          uniqueId: "ui-tweaker-sync-replacement",
          cssClass: "ui-tweaker-sync-replacement workspace-drawer-header-icon mod-raised",
          handleTouch: true,
          stripClasses: ["is-failed", "is-error", "is-warning", "mod-error", "mod-warning"],
          fallbackParentSelector: ".workspace-drawer.mod-right .workspace-drawer-header",
          fallbackInsertBehavior: "end",
          onAfterInstall: (custom, original) => {
            if (original) {
              setCssProps(original, { display: "none" });
              original.setAttribute("data-ui-tweaker-original-sync-hidden", "true");
            }
          },
          onBeforeUninstall: (custom) => {
            const originals = document.querySelectorAll("[data-ui-tweaker-original-sync-hidden]");
            originals.forEach((el) => {
              el.style.removeProperty("display");
              el.removeAttribute("data-ui-tweaker-original-sync-hidden");
            });
          },
          findButton: (parent) => {
            const drawerHeader = parent.querySelector(".workspace-drawer-header");
            if (!drawerHeader) return null;
            let syncButton = drawerHeader.querySelector(".sync-status-icon");
            if (!syncButton) {
              const clickableIcons = Array.from(drawerHeader.querySelectorAll(".clickable-icon"));
              for (const icon of clickableIcons) {
                if (icon.querySelector("svg.refresh-cw-off, svg.refresh-cw")) return icon;
              }
            }
            return syncButton;
          }
        }
      );
      this.syncButtonReplacer.install();
    } else {
      this.syncButtonReplacer.uninstall();
      this.syncButtonReplacer = void 0;
      this.setupSyncButtonReplacement();
    }
  }
  updateSyncButtonCSS() {
    var _a, _b;
    const shouldHide = ((_b = (_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) != null ? _b : false) && this.isMobile;
    document.body.classList.toggle("ui-tweaker-hide-sync-button", shouldHide);
  }
  /**
   * Set up event-driven observers for toggle state changes
   * Wraps individual command callbacks to detect execution regardless of trigger method
   */
  setupToggleStateObservers() {
    const refreshToggleStates = () => {
      if (this.explorerManager) {
        this.explorerManager.refreshToggleStates();
      }
      if (this.tabBarManager) {
        this.tabBarManager.refreshToggleStates();
      }
    };
    const bodyObserver = new MutationObserver(refreshToggleStates);
    bodyObserver.observe(document.body, {
      attributes: true,
      attributeFilter: ["class"]
    });
    this.registerEvent(
      this.app.workspace.on("layout-change", refreshToggleStates)
    );
    const workspaceEl = document.querySelector(".workspace");
    if (workspaceEl) {
      const workspaceObserver = new MutationObserver(refreshToggleStates);
      workspaceObserver.observe(workspaceEl, {
        attributes: true,
        attributeFilter: ["class"]
      });
    }
  }
  /**
   * Wrap individual command callbacks to intercept execution
   * This catches commands triggered via hotkey, palette, or programmatically
   */
  setupToggleStateRefresh() {
    this.wrapToggleCommands();
  }
  /**
   * Wrap callbacks for all toggle commands
   * Call this when toggle commands are added/removed
   */
  wrapToggleCommands() {
    var _a, _b;
    const commandsObj = this.app.commands;
    if (!(commandsObj == null ? void 0 : commandsObj.commands)) return;
    const refreshToggleStates = () => {
      setTimeout(() => {
        if (this.explorerManager) {
          this.explorerManager.refreshToggleStates();
        }
        if (this.tabBarManager) {
          this.tabBarManager.refreshToggleStates();
        }
      }, 50);
    };
    const toggleCommandIds = /* @__PURE__ */ new Set();
    (_a = this.settings.explorerCommands) == null ? void 0 : _a.forEach((p) => {
      if (p.toggleIcon) toggleCommandIds.add(p.id);
    });
    (_b = this.settings.tabBarCommands) == null ? void 0 : _b.forEach((p) => {
      if (p.toggleIcon) toggleCommandIds.add(p.id);
    });
    for (const [id, wrapper] of this.wrappedCommands) {
      if (!toggleCommandIds.has(id)) {
        wrapper.restore();
        this.wrappedCommands.delete(id);
      }
    }
    for (const id of toggleCommandIds) {
      if (this.wrappedCommands.has(id)) continue;
      const command = commandsObj.commands[id];
      if (!command) continue;
      if (command.checkCallback) {
        const original = command.checkCallback;
        command.checkCallback = (checking) => {
          const result = original(checking);
          if (!checking) {
            recordCommandExecution(id);
            refreshToggleStates();
          }
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.checkCallback = original;
          }
        });
      } else if (command.callback) {
        const original = command.callback;
        command.callback = () => {
          const result = original();
          recordCommandExecution(id);
          refreshToggleStates();
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.callback = original;
          }
        });
      } else if (command.editorCheckCallback) {
        const original = command.editorCheckCallback;
        command.editorCheckCallback = (checking, editor, ctx) => {
          const result = original(checking, editor, ctx);
          if (!checking) {
            recordCommandExecution(id);
            refreshToggleStates();
          }
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.editorCheckCallback = original;
          }
        });
      } else if (command.editorCallback) {
        const original = command.editorCallback;
        command.editorCallback = (editor, ctx) => {
          const result = original(editor, ctx);
          recordCommandExecution(id);
          refreshToggleStates();
          return result;
        };
        this.wrappedCommands.set(id, {
          restore: () => {
            command.editorCallback = original;
          }
        });
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91aU1hbmFnZXIudHMiLCAic3JjL3V0aWxzL2Nzc1V0aWxzLnRzIiwgInNyYy9jb21tYW5kcy50cyIsICJzcmMvdWkvU2V0dGluZ3NUYWIudHMiLCAic3JjL3VpL2NvbW1vbi9UYWJSZW5kZXJlci50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy9tb2RhbHMvQ29tbWFuZFBpY2tlck1vZGFsLnRzIiwgInNyYy9tb2RhbHMvSWNvblBpY2tlck1vZGFsLnRzIiwgInNyYy91aS90YWJzL0hpZGVyVGFiLnRzIiwgInNyYy91aS90YWJzL1RhYkJhclRhYi50cyIsICJzcmMvbW9kYWxzL05hbWVQaWNrZXJNb2RhbC50cyIsICJzcmMvdXRpbHMvY2hvb3NlQ29tbWFuZC50cyIsICJzcmMvdWkvdGFicy9TdGF0dXNCYXJUYWIudHMiLCAic3JjL3VpL3RhYnMvRXhwbG9yZXJUYWIudHMiLCAic3JjL3VpL3RhYnMvTW9iaWxlVGFiLnRzIiwgInNyYy91aS90YWJzL1Byb3BlcnRpZXNUYWIudHMiLCAic3JjL21hbmFnZXIvVGFiQmFyTWFuYWdlci50cyIsICJzcmMvdXRpbHMvY29tbWFuZFV0aWxzLnRzIiwgInNyYy91dGlscy9jb21tYW5kLWxvZ2ljLnRzIiwgInNyYy9tYW5hZ2VyL1N0YXR1c0Jhck1hbmFnZXIudHMiLCAic3JjL21hbmFnZXIvRXhwbG9yZXJNYW5hZ2VyLnRzIiwgInNyYy91dGlscy9CdXR0b25SZXBsYWNlci50cyIsICJzcmMvbWFuYWdlci9Qcm9wZXJ0aWVzTWFuYWdlci50cyIsICJzcmMvbWFuYWdlci9NZW51TWFuYWdlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBNYWluIHBsdWdpbiBmaWxlXG4gKi9cblxuaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIFBsYXRmb3JtLCBDb21tYW5kLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTWFya2Rvd25GaWxlSW5mbyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFVJU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFVJTWFuYWdlciB9IGZyb20gJy4vdWlNYW5hZ2VyJztcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi91dGlscy9jc3NVdGlscyc7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzIH0gZnJvbSAnLi9jb21tYW5kcyc7XG5pbXBvcnQgeyBVSVR3ZWFrZXJTZXR0aW5nVGFiIH0gZnJvbSAnLi91aS9TZXR0aW5nc1RhYic7XG5pbXBvcnQgeyBUYWJCYXJNYW5hZ2VyIH0gZnJvbSAnLi9tYW5hZ2VyL1RhYkJhck1hbmFnZXInO1xuaW1wb3J0IHsgU3RhdHVzQmFyTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlci9TdGF0dXNCYXJNYW5hZ2VyJztcbmltcG9ydCB7IEV4cGxvcmVyTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlci9FeHBsb3Jlck1hbmFnZXInO1xuaW1wb3J0IHsgcmVjb3JkQ29tbWFuZEV4ZWN1dGlvbiB9IGZyb20gJy4vdXRpbHMvY29tbWFuZFV0aWxzJztcbmltcG9ydCB7IEJ1dHRvblJlcGxhY2VyIH0gZnJvbSAnLi91dGlscy9CdXR0b25SZXBsYWNlcic7XG5pbXBvcnQgeyBQcm9wZXJ0aWVzTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlci9Qcm9wZXJ0aWVzTWFuYWdlcic7XG5pbXBvcnQgTWVudU1hbmFnZXIgZnJvbSAnLi9tYW5hZ2VyL01lbnVNYW5hZ2VyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVUlUd2Vha2VyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IFVJU2V0dGluZ3M7XG5cdHByaXZhdGUgdWlNYW5hZ2VyOiBVSU1hbmFnZXI7XG5cdHByaXZhdGUgaGVscEJ1dHRvblJlcGxhY2VyPzogQnV0dG9uUmVwbGFjZXI7XG5cdHByaXZhdGUgc3luY0J1dHRvblJlcGxhY2VyPzogQnV0dG9uUmVwbGFjZXI7XG5cdHB1YmxpYyBzZXR0aW5nVGFiPzogVUlUd2Vha2VyU2V0dGluZ1RhYjtcblx0cHVibGljIHRhYkJhck1hbmFnZXI/OiBUYWJCYXJNYW5hZ2VyO1xuXHRwdWJsaWMgc3RhdHVzQmFyTWFuYWdlcj86IFN0YXR1c0Jhck1hbmFnZXI7XG5cdHB1YmxpYyBleHBsb3Jlck1hbmFnZXI/OiBFeHBsb3Jlck1hbmFnZXI7XG5cdHB1YmxpYyBwcm9wZXJ0aWVzTWFuYWdlcj86IFByb3BlcnRpZXNNYW5hZ2VyO1xuXHRwdWJsaWMgbWVudU1hbmFnZXI6IE1lbnVNYW5hZ2VyO1xuXG5cdGdldCBpc01vYmlsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gUGxhdGZvcm0uaXNNb2JpbGUgfHxcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1tb2JpbGUnKSB8fFxuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2VtdWxhdGUtbW9iaWxlJyk7XG5cdH1cblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIEluaXRpYWxpemUgTWVudSBNYW5hZ2VyIGVhcmx5IHRvIGNhdGNoIG1lbnVzXG5cdFx0dGhpcy5tZW51TWFuYWdlciA9IG5ldyBNZW51TWFuYWdlcigpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBVSSBtYW5hZ2VyXG5cdFx0dGhpcy51aU1hbmFnZXIgPSBuZXcgVUlNYW5hZ2VyKHRoaXMsIHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMudWlNYW5hZ2VyLmFwcGx5U3R5bGVzKCk7XG5cblx0XHQvLyBJbml0aWFsaXplIFRhYiBCYXIgTWFuYWdlclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykge1xuXHRcdFx0dGhpcy5zZXR0aW5ncy50YWJCYXJDb21tYW5kcyA9IFtdO1xuXHRcdH1cblx0XHR0aGlzLnRhYkJhck1hbmFnZXIgPSBuZXcgVGFiQmFyTWFuYWdlcih0aGlzKTtcblxuXHRcdC8vIEluaXRpYWxpemUgU3RhdHVzIEJhciBNYW5hZ2VyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zKSB7XG5cdFx0XHR0aGlzLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zID0gW107XG5cdFx0fVxuXHRcdHRoaXMuc3RhdHVzQmFyTWFuYWdlciA9IG5ldyBTdGF0dXNCYXJNYW5hZ2VyKHRoaXMpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBFeHBsb3JlciBNYW5hZ2VyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcyA9IFtdO1xuXHRcdH1cblx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlciA9IG5ldyBFeHBsb3Jlck1hbmFnZXIodGhpcyk7XG5cdFx0dGhpcy5wcm9wZXJ0aWVzTWFuYWdlciA9IG5ldyBQcm9wZXJ0aWVzTWFuYWdlcih0aGlzKTtcblxuXHRcdC8vIFJlZ2lzdGVyIGNvbW1hbmRzXG5cdFx0cmVnaXN0ZXJDb21tYW5kcyh7XG5cdFx0XHRwbHVnaW46IHRoaXMsXG5cdFx0XHRzZXR0aW5nczogdGhpcy5zZXR0aW5ncyxcblx0XHRcdHNhdmVTZXR0aW5nczogKCkgPT4gdGhpcy5zYXZlU2V0dGluZ3MoKSxcblx0XHRcdHJlZnJlc2g6ICgpID0+IHRoaXMucmVmcmVzaCgpLFxuXHRcdH0pO1xuXG5cdFx0Ly8gU2V0IHVwIGNvbW1hbmQgZXhlY3V0aW9uIGludGVyY2VwdG9yIGZvciB0b2dnbGUgc3RhdGUgcmVmcmVzaFxuXHRcdHRoaXMuc2V0dXBUb2dnbGVTdGF0ZVJlZnJlc2goKTtcblxuXHRcdC8vIFNldCB1cCBldmVudC1kcml2ZW4gdG9nZ2xlIHN0YXRlIHJlZnJlc2ggKG5vIHBvbGxpbmcgbmVlZGVkKVxuXHRcdHRoaXMuc2V0dXBUb2dnbGVTdGF0ZU9ic2VydmVycygpO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgc2V0dGluZ3MgdGFiXG5cdFx0dGhpcy5zZXR0aW5nVGFiID0gbmV3IFVJVHdlYWtlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpO1xuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdUYWIpO1xuXG5cdFx0Ly8gU2V0IHVwIGhlbHAgYnV0dG9uIHJlcGxhY2VtZW50XG5cdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25SZXBsYWNlbWVudCgpO1xuXG5cdFx0Ly8gU2V0IHVwIHN5bmMgYnV0dG9uIHJlcGxhY2VtZW50IChvbmx5IG9uIG1vYmlsZSlcblx0XHRpZiAodGhpcy5pc01vYmlsZSkge1xuXHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNYWtlIHN1cmUgY2xhc3MgaXMgcmVtb3ZlZCBvbiBkZXNrdG9wXG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItaGlkZS1zeW5jLWJ1dHRvbicpO1xuXHRcdH1cblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGlmICh0aGlzLnVpTWFuYWdlcikge1xuXHRcdFx0dGhpcy51aU1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5leHBsb3Jlck1hbmFnZXIpIHtcblx0XHRcdHRoaXMuZXhwbG9yZXJNYW5hZ2VyLmNsZWFudXAoKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuc3RhdHVzQmFyTWFuYWdlcikge1xuXHRcdFx0dGhpcy5zdGF0dXNCYXJNYW5hZ2VyLmNsZWFudXAoKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMubWVudU1hbmFnZXIpIHtcblx0XHRcdHRoaXMubWVudU1hbmFnZXIudW5sb2FkKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5oZWxwQnV0dG9uUmVwbGFjZXI/LnVuaW5zdGFsbCgpO1xuXHRcdHRoaXMuc3luY0J1dHRvblJlcGxhY2VyPy51bmluc3RhbGwoKTtcblxuXHRcdC8vIFJlc3RvcmUgd3JhcHBlZCBjb21tYW5kIGNhbGxiYWNrc1xuXHRcdGZvciAoY29uc3Qgd3JhcHBlciBvZiB0aGlzLndyYXBwZWRDb21tYW5kcy52YWx1ZXMoKSkge1xuXHRcdFx0d3JhcHBlci5yZXN0b3JlKCk7XG5cdFx0fVxuXHRcdHRoaXMud3JhcHBlZENvbW1hbmRzLmNsZWFyKCk7XG5cblx0XHQvLyBDbGVhbnVwIENTUyBjbGFzc2VzXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLWhpZGUtaGVscC1idXR0b24nKTtcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItaGlkZS1zeW5jLWJ1dHRvbicpO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpIGFzIFBhcnRpYWw8VUlTZXR0aW5ncz4gfCBudWxsO1xuXHRcdFx0Ly8gSGFuZGxlIGNvcnJ1cHRlZCBvciBlbXB0eSBkYXRhXG5cdFx0XHRpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MpO1xuXHRcdFx0XHQvLyBTYXZlIGRlZmF1bHRzIHRvIGZpeCBjb3JydXB0ZWQgZmlsZVxuXHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YSk7XG5cdFx0XHQvLyBFbnN1cmUgaGVscEJ1dHRvblJlcGxhY2VtZW50IHN0cnVjdHVyZSBleGlzdHNcblx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQpIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XG5cdFx0XHRcdFx0ZW5hYmxlZDogZmFsc2UsXG5cdFx0XHRcdFx0Y29tbWFuZElkOiAnJyxcblx0XHRcdFx0XHRpY29uSWQ6ICdzZXR0aW5ncy0yJyxcblx0XHRcdFx0fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEVuc3VyZSBpY29uSWQgaXMgZGVmaW5lZCBldmVuIGlmIGhlbHBCdXR0b25SZXBsYWNlbWVudCBleGlzdHNcblx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5pY29uSWQpIHtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5pY29uSWQgPSAnd3JlbmNoJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBFbnN1cmUgc3luY0J1dHRvblJlcGxhY2VtZW50IHN0cnVjdHVyZSBleGlzdHNcblx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQpIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQgPSB7XG5cdFx0XHRcdFx0ZW5hYmxlZDogZmFsc2UsXG5cdFx0XHRcdFx0Y29tbWFuZElkOiAnJyxcblx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRW5zdXJlIGljb25JZCBpcyBkZWZpbmVkIGV2ZW4gaWYgc3luY0J1dHRvblJlcGxhY2VtZW50IGV4aXN0c1xuXHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Lmljb25JZCkge1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Lmljb25JZCA9ICd3cmVuY2gnO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1pZ3JhdGUgbWRPbmx5IG9yIGZpbGVUeXBlRmlsdGVyIHRvIHNob3dPbkZpbGVUeXBlcy9oaWRlT25GaWxlVHlwZXMgZm9yIHRhYkJhckNvbW1hbmRzXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykge1xuXHRcdFx0XHRsZXQgbmVlZHNTYXZlID0gZmFsc2U7XG5cdFx0XHRcdGZvciAoY29uc3QgcGFpciBvZiB0aGlzLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb2xkIHByb3BlcnRpZXMgZXhpc3QgaW4gdGhlIGxvYWRlZCBkYXRhIChmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcblx0XHRcdFx0XHRjb25zdCBwYWlyV2l0aE9sZFByb3BzID0gcGFpciBhcyB7XG5cdFx0XHRcdFx0XHRtZE9ubHk/OiBib29sZWFuO1xuXHRcdFx0XHRcdFx0ZmlsZVR5cGVGaWx0ZXI/OiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRzaG93T25GaWxlVHlwZXM/OiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRoaWRlT25GaWxlVHlwZXM/OiBzdHJpbmc7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8vIFNraXAgaWYgYWxyZWFkeSBtaWdyYXRlZFxuXHRcdFx0XHRcdGlmIChwYWlyLnNob3dPbkZpbGVUeXBlcyAhPT0gdW5kZWZpbmVkIHx8IHBhaXIuaGlkZU9uRmlsZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE1pZ3JhdGUgZnJvbSBtZE9ubHk6IHRydWVcblx0XHRcdFx0XHRpZiAocGFpcldpdGhPbGRQcm9wcy5tZE9ubHkgPT09IHRydWUgJiYgIXBhaXIuc2hvd09uRmlsZVR5cGVzKSB7XG5cdFx0XHRcdFx0XHRwYWlyLnNob3dPbkZpbGVUeXBlcyA9ICdtZCxtZHgnO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHBhaXJXaXRoT2xkUHJvcHMubWRPbmx5O1xuXHRcdFx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBNaWdyYXRlIGZyb20gZmlsZVR5cGVGaWx0ZXIgKG9sZCBtaXhlZCBzeW50YXgpXG5cdFx0XHRcdFx0aWYgKHBhaXJXaXRoT2xkUHJvcHMuZmlsZVR5cGVGaWx0ZXIgJiYgIXBhaXIuc2hvd09uRmlsZVR5cGVzICYmICFwYWlyLmhpZGVPbkZpbGVUeXBlcykge1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsdGVyID0gcGFpcldpdGhPbGRQcm9wcy5maWxlVHlwZUZpbHRlcjtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gZmlsdGVyLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpLmZpbHRlcihwID0+IHApO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2hvd1R5cGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0XHRcdFx0Y29uc3QgaGlkZVR5cGVzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHBhcnQuc3RhcnRzV2l0aCgnLScpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXh0ID0gcGFydC5zbGljZSgxKS5yZXBsYWNlKC9eXFwuLywgJycpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGV4dCkgaGlkZVR5cGVzLnB1c2goZXh0KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBleHQgPSBwYXJ0LnJlcGxhY2UoL15cXC4vLCAnJykudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZXh0KSBzaG93VHlwZXMucHVzaChleHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChzaG93VHlwZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRwYWlyLnNob3dPbkZpbGVUeXBlcyA9IHNob3dUeXBlcy5qb2luKCcsJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoaGlkZVR5cGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0cGFpci5oaWRlT25GaWxlVHlwZXMgPSBoaWRlVHlwZXMuam9pbignLCcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRkZWxldGUgcGFpcldpdGhPbGRQcm9wcy5maWxlVHlwZUZpbHRlcjtcblx0XHRcdFx0XHRcdG5lZWRzU2F2ZSA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChuZWVkc1NhdmUpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1pZ3JhdGUgcHJvcGVydHkgaWNvbiBJRHMgdG8gbG93ZXJjYXNlXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcykge1xuXHRcdFx0XHRsZXQgbmVlZHNTYXZlID0gZmFsc2U7XG5cdFx0XHRcdGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnNldHRpbmdzLnByb3BlcnR5SWNvbkl0ZW1zKSB7XG5cdFx0XHRcdFx0aWYgKGl0ZW0uaWQgIT09IGl0ZW0uaWQudG9Mb3dlckNhc2UoKSkge1xuXHRcdFx0XHRcdFx0aXRlbS5pZCA9IGl0ZW0uaWQudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdG5lZWRzU2F2ZSA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChuZWVkc1NhdmUpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tVSSBUd2Vha2VyXSBGYWlsZWQgdG8gbG9hZCBzZXR0aW5nczonLCBlcnJvcik7XG5cdFx0XHQvLyBGYWxsIGJhY2sgdG8gZGVmYXVsdHMgaWYgbG9hZGluZyBmYWlsc1xuXHRcdFx0dGhpcy5zZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0cmVmcmVzaCgpIHtcblx0XHRpZiAodGhpcy51aU1hbmFnZXIpIHtcblx0XHRcdHRoaXMudWlNYW5hZ2VyLnVwZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuXHRcdH1cblx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XG5cdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdC8vIEFsd2F5cyB1cGRhdGUgc3luYyBidXR0b24gQ1NTIHRvIGVuc3VyZSBpdCBtYXRjaGVzIGN1cnJlbnQgc2V0dGluZ3Ncblx0XHR0aGlzLnVwZGF0ZVN5bmNCdXR0b25DU1MoKTtcblx0XHRpZiAodGhpcy5pc01vYmlsZSkge1xuXHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNYWtlIHN1cmUgY2xhc3MgaXMgcmVtb3ZlZCBvbiBkZXNrdG9wXG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItaGlkZS1zeW5jLWJ1dHRvbicpO1xuXHRcdFx0dGhpcy5zeW5jQnV0dG9uUmVwbGFjZXI/LnVuaW5zdGFsbCgpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2V0dXBIZWxwQnV0dG9uUmVwbGFjZW1lbnQoKSB7XG5cdFx0Ly8gVXBkYXRlIENTUyBmaXJzdFxuXHRcdHRoaXMudXBkYXRlSGVscEJ1dHRvbkNTUygpO1xuXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCkge1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uUmVwbGFjZXI/LnVuaW5zdGFsbCgpO1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uUmVwbGFjZXIgPSB1bmRlZmluZWQ7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLmhlbHBCdXR0b25SZXBsYWNlcikge1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uUmVwbGFjZXIgPSBuZXcgQnV0dG9uUmVwbGFjZXIoXG5cdFx0XHRcdCcuY2xpY2thYmxlLWljb24gc3ZnLmhlbHAnLFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5pY29uSWQgfHwgJ3NldHRpbmdzLTInLFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZElkID0gdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmNvbW1hbmRJZDtcblx0XHRcdFx0XHRpZiAoY29tbWFuZElkKSB7XG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSAodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcztcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKGNvbW1hbmRJZCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignQ29tbWFuZCBleGVjdXRpb24gbm90IGF2YWlsYWJsZScpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZDogJHtjb21tYW5kSWR9YCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c3Vydml2YWxPYnNlcnZlcjogdHJ1ZSxcblx0XHRcdFx0XHRwYXJlbnRTZWxlY3RvcjogJy53b3Jrc3BhY2UtZHJhd2VyLXZhdWx0LWFjdGlvbnMnLFxuXHRcdFx0XHRcdHVuaXF1ZUlkOiAndWktdHdlYWtlci1oZWxwLXJlcGxhY2VtZW50Jyxcblx0XHRcdFx0XHRjc3NDbGFzczogJ3VpLXR3ZWFrZXItaGVscC1yZXBsYWNlbWVudCcsXG5cdFx0XHRcdFx0ZmluZEJ1dHRvbjogKHBhcmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2VsZWN0b3JzID0gW1xuXHRcdFx0XHRcdFx0XHQnLndvcmtzcGFjZS1kcmF3ZXItdmF1bHQtYWN0aW9ucyAuY2xpY2thYmxlLWljb24gc3ZnLmhlbHAnLFxuXHRcdFx0XHRcdFx0XHQnLndvcmtzcGFjZS1zaWRlZG9jay12YXVsdC1wcm9maWxlIC5jbGlja2FibGUtaWNvbiBzdmcuaGVscCcsXG5cdFx0XHRcdFx0XHRcdCcud29ya3NwYWNlLWRyYXdlciAuY2xpY2thYmxlLWljb24gc3ZnLmhlbHAnLFxuXHRcdFx0XHRcdFx0XHQnLmNsaWNrYWJsZS1pY29uIHN2Zy5oZWxwJ1xuXHRcdFx0XHRcdFx0XTtcblxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBzZWxlY3RvciBvZiBzZWxlY3RvcnMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc3ZnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG5cdFx0XHRcdFx0XHRcdGlmIChzdmcgJiYgc3ZnLnBhcmVudEVsZW1lbnQpIHJldHVybiBzdmcucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uUmVwbGFjZXIuaW5zdGFsbCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25SZXBsYWNlci51bmluc3RhbGwoKTtcblx0XHRcdHRoaXMuaGVscEJ1dHRvblJlcGxhY2VyID0gdW5kZWZpbmVkO1xuXHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyB1cGRhdGVIZWxwQnV0dG9uQ1NTKCkge1xuXHRcdC8vIEhpZGUgaGVscCBidXR0b24gaWYgZWl0aGVyIGhlbHBCdXR0b24gaXMgc2V0IHRvIFwiaGlkZVwiIE9SIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcblx0XHRjb25zdCBzaG91bGRIaWRlSGVscEJ1dHRvbiA9IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvbiA9PT0gJ2hpZGUnIHx8IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkO1xuXG5cdFx0Ly8gVXNlIENTUyBjbGFzcyBpbnN0ZWFkIG9mIHN0eWxlIGVsZW1lbnRcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3VpLXR3ZWFrZXItaGlkZS1oZWxwLWJ1dHRvbicsIHNob3VsZEhpZGVIZWxwQnV0dG9uKTtcblx0fVxuXG5cdHByaXZhdGUgc2V0dXBTeW5jQnV0dG9uUmVwbGFjZW1lbnQoKSB7XG5cdFx0Ly8gVXBkYXRlIENTUyBmaXJzdFxuXHRcdHRoaXMudXBkYXRlU3luY0J1dHRvbkNTUygpO1xuXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCB8fCAhdGhpcy5pc01vYmlsZSkge1xuXHRcdFx0dGhpcy5zeW5jQnV0dG9uUmVwbGFjZXI/LnVuaW5zdGFsbCgpO1xuXHRcdFx0dGhpcy5zeW5jQnV0dG9uUmVwbGFjZXIgPSB1bmRlZmluZWQ7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLnN5bmNCdXR0b25SZXBsYWNlcikge1xuXHRcdFx0dGhpcy5zeW5jQnV0dG9uUmVwbGFjZXIgPSBuZXcgQnV0dG9uUmVwbGFjZXIoXG5cdFx0XHRcdCcuc3luYy1zdGF0dXMtaWNvbicsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Lmljb25JZCB8fCAnd3JlbmNoJyxcblx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRJZCkge1xuXHRcdFx0XHRcdFx0aWYgKGNvbW1hbmRJZCA9PT0gJ29wZW4tc2V0dGluZ3MnIHx8IGNvbW1hbmRJZCA9PT0gJ3VpLXR3ZWFrZXI6b3Blbi1zZXR0aW5ncycpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2V0dGluZ0FwaSA9ICh0aGlzLmFwcCBhcyB7IHNldHRpbmc/OiB7IG9wZW4/OiAoKSA9PiB2b2lkOyBvcGVuVGFiQnlJZD86IChpZDogc3RyaW5nKSA9PiB2b2lkIH0gfSkuc2V0dGluZztcblx0XHRcdFx0XHRcdFx0aWYgKHNldHRpbmdBcGkpIHtcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nQXBpLm9wZW4/LigpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdUYWI/LmlkICYmIHNldHRpbmdBcGkub3BlblRhYkJ5SWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdBcGkub3BlblRhYkJ5SWQodGhpcy5zZXR0aW5nVGFiLmlkKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCgodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcyBhcyB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0pPy5leGVjdXRlQ29tbWFuZEJ5SWQ/Lihjb21tYW5kSWQpLmNhdGNoKChlcnJvcjogdW5rbm93bikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybignW1VJIFR3ZWFrZXJdIEVycm9yIGV4ZWN1dGluZyBjb21tYW5kOicsIGVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsZWQgdG8gZXhlY3V0ZSBjb21tYW5kOiAke2NvbW1hbmRJZH1gKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c3Vydml2YWxPYnNlcnZlcjogdHJ1ZSxcblx0XHRcdFx0XHRwYXJlbnRTZWxlY3RvcjogJy53b3Jrc3BhY2UtZHJhd2VyLm1vZC1yaWdodCcsXG5cdFx0XHRcdFx0dW5pcXVlSWQ6ICd1aS10d2Vha2VyLXN5bmMtcmVwbGFjZW1lbnQnLFxuXHRcdFx0XHRcdGNzc0NsYXNzOiAndWktdHdlYWtlci1zeW5jLXJlcGxhY2VtZW50IHdvcmtzcGFjZS1kcmF3ZXItaGVhZGVyLWljb24gbW9kLXJhaXNlZCcsXG5cdFx0XHRcdFx0aGFuZGxlVG91Y2g6IHRydWUsXG5cdFx0XHRcdFx0c3RyaXBDbGFzc2VzOiBbJ2lzLWZhaWxlZCcsICdpcy1lcnJvcicsICdpcy13YXJuaW5nJywgJ21vZC1lcnJvcicsICdtb2Qtd2FybmluZyddLFxuXHRcdFx0XHRcdGZhbGxiYWNrUGFyZW50U2VsZWN0b3I6ICcud29ya3NwYWNlLWRyYXdlci5tb2QtcmlnaHQgLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyJyxcblx0XHRcdFx0XHRmYWxsYmFja0luc2VydEJlaGF2aW9yOiAnZW5kJyxcblx0XHRcdFx0XHRvbkFmdGVySW5zdGFsbDogKGN1c3RvbSwgb3JpZ2luYWwpID0+IHtcblx0XHRcdFx0XHRcdGlmIChvcmlnaW5hbCkge1xuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhvcmlnaW5hbCwgeyBkaXNwbGF5OiAnbm9uZScgfSk7XG5cdFx0XHRcdFx0XHRcdG9yaWdpbmFsLnNldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLW9yaWdpbmFsLXN5bmMtaGlkZGVuJywgJ3RydWUnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG9uQmVmb3JlVW5pbnN0YWxsOiAoY3VzdG9tKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBvcmlnaW5hbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS11aS10d2Vha2VyLW9yaWdpbmFsLXN5bmMtaGlkZGVuXScpO1xuXHRcdFx0XHRcdFx0b3JpZ2luYWxzLmZvckVhY2goZWwgPT4ge1xuXHRcdFx0XHRcdFx0XHQoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG5cdFx0XHRcdFx0XHRcdGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLW9yaWdpbmFsLXN5bmMtaGlkZGVuJyk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZpbmRCdXR0b246IChwYXJlbnQpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGRyYXdlckhlYWRlciA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci1oZWFkZXInKTtcblx0XHRcdFx0XHRcdGlmICghZHJhd2VySGVhZGVyKSByZXR1cm4gbnVsbDtcblxuXHRcdFx0XHRcdFx0bGV0IHN5bmNCdXR0b24gPSBkcmF3ZXJIZWFkZXIucXVlcnlTZWxlY3RvcignLnN5bmMtc3RhdHVzLWljb24nKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdGlmICghc3luY0J1dHRvbikge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjbGlja2FibGVJY29ucyA9IEFycmF5LmZyb20oZHJhd2VySGVhZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUtaWNvbicpKTtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBpY29uIG9mIGNsaWNrYWJsZUljb25zKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb24ucXVlcnlTZWxlY3Rvcignc3ZnLnJlZnJlc2gtY3ctb2ZmLCBzdmcucmVmcmVzaC1jdycpKSByZXR1cm4gaWNvbiBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIHN5bmNCdXR0b247XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5zeW5jQnV0dG9uUmVwbGFjZXIuaW5zdGFsbCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnN5bmNCdXR0b25SZXBsYWNlci51bmluc3RhbGwoKTtcblx0XHRcdHRoaXMuc3luY0J1dHRvblJlcGxhY2VyID0gdW5kZWZpbmVkO1xuXHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyB1cGRhdGVTeW5jQnV0dG9uQ1NTKCkge1xuXHRcdC8vIEhpZGUgc3luYyBidXR0b24gaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZCBBTkQgd2UncmUgb24gbW9iaWxlXG5cdFx0Ly8gVXNlIENTUyBjbGFzcyBpbnN0ZWFkIG9mIHN0eWxlIGVsZW1lbnRcblx0XHRjb25zdCBzaG91bGRIaWRlID0gKHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkID8/IGZhbHNlKSAmJiB0aGlzLmlzTW9iaWxlO1xuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgndWktdHdlYWtlci1oaWRlLXN5bmMtYnV0dG9uJywgc2hvdWxkSGlkZSk7XG5cdH1cblxuXHQvKipcblx0ICogU2V0IHVwIGV2ZW50LWRyaXZlbiBvYnNlcnZlcnMgZm9yIHRvZ2dsZSBzdGF0ZSBjaGFuZ2VzXG5cdCAqIFdyYXBzIGluZGl2aWR1YWwgY29tbWFuZCBjYWxsYmFja3MgdG8gZGV0ZWN0IGV4ZWN1dGlvbiByZWdhcmRsZXNzIG9mIHRyaWdnZXIgbWV0aG9kXG5cdCAqL1xuXHRwcml2YXRlIHNldHVwVG9nZ2xlU3RhdGVPYnNlcnZlcnMoKTogdm9pZCB7XG5cdFx0Y29uc3QgcmVmcmVzaFRvZ2dsZVN0YXRlcyA9ICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmV4cGxvcmVyTWFuYWdlcikge1xuXHRcdFx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy50YWJCYXJNYW5hZ2VyKSB7XG5cdFx0XHRcdHRoaXMudGFiQmFyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFdhdGNoIGZvciB0aGVtZSBjaGFuZ2VzIG9uIGJvZHkgZWxlbWVudCAoY2xhc3MgYXR0cmlidXRlIGNoYW5nZXMpXG5cdFx0Y29uc3QgYm9keU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIocmVmcmVzaFRvZ2dsZVN0YXRlcyk7XG5cdFx0Ym9keU9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuXHRcdFx0YXR0cmlidXRlczogdHJ1ZSxcblx0XHRcdGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddXG5cdFx0fSk7XG5cblx0XHQvLyBXYXRjaCBmb3IgbGF5b3V0IGNoYW5nZXMgKHNpZGViYXIgdG9nZ2xlcywgcGFuZWwgY2hhbmdlcywgZXRjLilcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCByZWZyZXNoVG9nZ2xlU3RhdGVzKVxuXHRcdCk7XG5cblx0XHQvLyBXYXRjaCBmb3IgQ1NTIGNsYXNzIGNoYW5nZXMgb24gd29ya3NwYWNlIGNvbnRhaW5lciAocmliYm9uLCBzaWRlYmFycylcblx0XHRjb25zdCB3b3Jrc3BhY2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UnKTtcblx0XHRpZiAod29ya3NwYWNlRWwpIHtcblx0XHRcdGNvbnN0IHdvcmtzcGFjZU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIocmVmcmVzaFRvZ2dsZVN0YXRlcyk7XG5cdFx0XHR3b3Jrc3BhY2VPYnNlcnZlci5vYnNlcnZlKHdvcmtzcGFjZUVsLCB7XG5cdFx0XHRcdGF0dHJpYnV0ZXM6IHRydWUsXG5cdFx0XHRcdGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvLyBUcmFjayB3cmFwcGVkIGNvbW1hbmRzIHRvIGF2b2lkIGRvdWJsZS13cmFwcGluZyBhbmQgYWxsb3cgY2xlYW51cFxuXHRwcml2YXRlIHdyYXBwZWRDb21tYW5kczogTWFwPHN0cmluZywgeyByZXN0b3JlOiAoKSA9PiB2b2lkIH0+ID0gbmV3IE1hcCgpO1xuXG5cdC8qKlxuXHQgKiBXcmFwIGluZGl2aWR1YWwgY29tbWFuZCBjYWxsYmFja3MgdG8gaW50ZXJjZXB0IGV4ZWN1dGlvblxuXHQgKiBUaGlzIGNhdGNoZXMgY29tbWFuZHMgdHJpZ2dlcmVkIHZpYSBob3RrZXksIHBhbGV0dGUsIG9yIHByb2dyYW1tYXRpY2FsbHlcblx0ICovXG5cdHByaXZhdGUgc2V0dXBUb2dnbGVTdGF0ZVJlZnJlc2goKTogdm9pZCB7XG5cdFx0Ly8gSW5pdGlhbCB3cmFwIG9mIGFsbCB0b2dnbGUgY29tbWFuZHNcblx0XHR0aGlzLndyYXBUb2dnbGVDb21tYW5kcygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFdyYXAgY2FsbGJhY2tzIGZvciBhbGwgdG9nZ2xlIGNvbW1hbmRzXG5cdCAqIENhbGwgdGhpcyB3aGVuIHRvZ2dsZSBjb21tYW5kcyBhcmUgYWRkZWQvcmVtb3ZlZFxuXHQgKi9cblx0cHVibGljIHdyYXBUb2dnbGVDb21tYW5kcygpOiB2b2lkIHtcblx0XHRjb25zdCBjb21tYW5kc09iaiA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIENvbW1hbmQ+IH0gfSkuY29tbWFuZHM7XG5cdFx0aWYgKCFjb21tYW5kc09iaj8uY29tbWFuZHMpIHJldHVybjtcblxuXHRcdGNvbnN0IHJlZnJlc2hUb2dnbGVTdGF0ZXMgPSAoKSA9PiB7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuZXhwbG9yZXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0dGhpcy5leHBsb3Jlck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aGlzLnRhYkJhck1hbmFnZXIpIHtcblx0XHRcdFx0XHR0aGlzLnRhYkJhck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCA1MCk7XG5cdFx0fTtcblxuXHRcdC8vIEdldCBhbGwgdG9nZ2xlIGNvbW1hbmQgSURzXG5cdFx0Y29uc3QgdG9nZ2xlQ29tbWFuZElkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdHRoaXMuc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcz8uZm9yRWFjaChwID0+IHtcblx0XHRcdGlmIChwLnRvZ2dsZUljb24pIHRvZ2dsZUNvbW1hbmRJZHMuYWRkKHAuaWQpO1xuXHRcdH0pO1xuXHRcdHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHM/LmZvckVhY2gocCA9PiB7XG5cdFx0XHRpZiAocC50b2dnbGVJY29uKSB0b2dnbGVDb21tYW5kSWRzLmFkZChwLmlkKTtcblx0XHR9KTtcblxuXHRcdC8vIFVud3JhcCBjb21tYW5kcyB0aGF0IGFyZSBubyBsb25nZXIgdG9nZ2xlIGNvbW1hbmRzXG5cdFx0Zm9yIChjb25zdCBbaWQsIHdyYXBwZXJdIG9mIHRoaXMud3JhcHBlZENvbW1hbmRzKSB7XG5cdFx0XHRpZiAoIXRvZ2dsZUNvbW1hbmRJZHMuaGFzKGlkKSkge1xuXHRcdFx0XHR3cmFwcGVyLnJlc3RvcmUoKTtcblx0XHRcdFx0dGhpcy53cmFwcGVkQ29tbWFuZHMuZGVsZXRlKGlkKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBXcmFwIG5ldyB0b2dnbGUgY29tbWFuZHNcblx0XHRmb3IgKGNvbnN0IGlkIG9mIHRvZ2dsZUNvbW1hbmRJZHMpIHtcblx0XHRcdGlmICh0aGlzLndyYXBwZWRDb21tYW5kcy5oYXMoaWQpKSBjb250aW51ZTsgLy8gQWxyZWFkeSB3cmFwcGVkXG5cblx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kc09iai5jb21tYW5kc1tpZF07XG5cdFx0XHRpZiAoIWNvbW1hbmQpIGNvbnRpbnVlO1xuXG5cdFx0XHQvLyBXcmFwIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja1xuXHRcdFx0aWYgKGNvbW1hbmQuY2hlY2tDYWxsYmFjaykge1xuXHRcdFx0XHRjb25zdCBvcmlnaW5hbCA9IGNvbW1hbmQuY2hlY2tDYWxsYmFjaztcblx0XHRcdFx0Y29tbWFuZC5jaGVja0NhbGxiYWNrID0gKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gb3JpZ2luYWwoY2hlY2tpbmcpO1xuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRcdHJlY29yZENvbW1hbmRFeGVjdXRpb24oaWQpO1xuXHRcdFx0XHRcdFx0cmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR0aGlzLndyYXBwZWRDb21tYW5kcy5zZXQoaWQsIHtcblx0XHRcdFx0XHRyZXN0b3JlOiAoKSA9PiB7IGNvbW1hbmQuY2hlY2tDYWxsYmFjayA9IG9yaWdpbmFsOyB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmIChjb21tYW5kLmNhbGxiYWNrKSB7XG5cdFx0XHRcdGNvbnN0IG9yaWdpbmFsID0gY29tbWFuZC5jYWxsYmFjaztcblx0XHRcdFx0Y29tbWFuZC5jYWxsYmFjayA9ICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBvcmlnaW5hbCgpO1xuXHRcdFx0XHRcdHJlY29yZENvbW1hbmRFeGVjdXRpb24oaWQpO1xuXHRcdFx0XHRcdHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR0aGlzLndyYXBwZWRDb21tYW5kcy5zZXQoaWQsIHtcblx0XHRcdFx0XHRyZXN0b3JlOiAoKSA9PiB7IGNvbW1hbmQuY2FsbGJhY2sgPSBvcmlnaW5hbDsgfVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBpZiAoY29tbWFuZC5lZGl0b3JDaGVja0NhbGxiYWNrKSB7XG5cdFx0XHRcdGNvbnN0IG9yaWdpbmFsID0gY29tbWFuZC5lZGl0b3JDaGVja0NhbGxiYWNrO1xuXHRcdFx0XHRjb21tYW5kLmVkaXRvckNoZWNrQ2FsbGJhY2sgPSAoY2hlY2tpbmcsIGVkaXRvciwgY3R4KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gb3JpZ2luYWwoY2hlY2tpbmcsIGVkaXRvciwgY3R4KTtcblx0XHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XG5cdFx0XHRcdFx0XHRyZWNvcmRDb21tYW5kRXhlY3V0aW9uKGlkKTtcblx0XHRcdFx0XHRcdHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fTtcblx0XHRcdFx0dGhpcy53cmFwcGVkQ29tbWFuZHMuc2V0KGlkLCB7XG5cdFx0XHRcdFx0cmVzdG9yZTogKCkgPT4geyBjb21tYW5kLmVkaXRvckNoZWNrQ2FsbGJhY2sgPSBvcmlnaW5hbDsgfVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBpZiAoY29tbWFuZC5lZGl0b3JDYWxsYmFjaykge1xuXHRcdFx0XHRjb25zdCBvcmlnaW5hbCA9IGNvbW1hbmQuZWRpdG9yQ2FsbGJhY2s7XG5cdFx0XHRcdGNvbW1hbmQuZWRpdG9yQ2FsbGJhY2sgPSAoZWRpdG9yLCBjdHgpID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBvcmlnaW5hbChlZGl0b3IsIGN0eCk7XG5cdFx0XHRcdFx0cmVjb3JkQ29tbWFuZEV4ZWN1dGlvbihpZCk7XG5cdFx0XHRcdFx0cmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHRoaXMud3JhcHBlZENvbW1hbmRzLnNldChpZCwge1xuXHRcdFx0XHRcdHJlc3RvcmU6ICgpID0+IHsgY29tbWFuZC5lZGl0b3JDYWxsYmFjayA9IG9yaWdpbmFsOyB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuIiwgIi8qKlxuICogU2V0dGluZ3MgaW50ZXJmYWNlIGFuZCBkZWZhdWx0c1xuICovXG5cbmltcG9ydCB7IFVJVmlzaWJpbGl0eVN0YXRlLCBNb2JpbGVOYXZQb3NpdGlvbiwgQ29tbWFuZEljb25QYWlyLCBTdGF0dXNCYXJJdGVtLCBFeHBsb3JlckJ1dHRvbkl0ZW0sIFByb3BlcnR5SWNvbkl0ZW0gfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBVSVNldHRpbmdzIHtcblx0Ly8gQXV0by1oaWRlIGVsZW1lbnRzIChTaG93L0hpZGUvUmV2ZWFsKVxuXHR0aXRsZUJhcjogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdGZpbGVFeHBsb3Jlck5hdkhlYWRlcjogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdG90aGVyTmF2SGVhZGVyczogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdGxlZnRUYWJIZWFkZXJzOiBVSVZpc2liaWxpdHlTdGF0ZTtcblx0cmlnaHRUYWJIZWFkZXJzOiBVSVZpc2liaWxpdHlTdGF0ZTtcblx0cmliYm9uUmV2ZWFsT25Ib3ZlcjogYm9vbGVhbjsgLy8gQm9vbGVhbiB0b2dnbGUgZm9yIGF1dG8tY29sbGFwc2UgcmliYm9uXG5cdHZhdWx0U3dpdGNoZXI6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRoZWxwQnV0dG9uOiBVSVZpc2liaWxpdHlTdGF0ZTsgLy8gQ2hhbmdlZCB0byBzdXBwb3J0IFNob3cvSGlkZS9SZXZlYWxcblx0c2V0dGluZ3NCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlO1xuXG5cdC8vIFNpbXBsZSB0b2dnbGVzIChTaG93L0hpZGUgb25seSlcblx0dGFiQmFyOiBib29sZWFuO1xuXHR0YWJCYXJIaWRlV2hlblNpbmdsZTogYm9vbGVhbjtcblx0ZW5hYmxlV2luZG93RHJhZ2dpbmc6IGJvb2xlYW47XG5cdG5ld05vdGVCdXR0b246IGJvb2xlYW47XG5cdG5ld0ZvbGRlckJ1dHRvbjogYm9vbGVhbjtcblx0c29ydE9yZGVyQnV0dG9uOiBib29sZWFuO1xuXHRhdXRvUmV2ZWFsQnV0dG9uOiBib29sZWFuO1xuXHRjb2xsYXBzZUFsbEJ1dHRvbjogYm9vbGVhbjtcblx0cmVhZGluZ01vZGVCdXR0b246IGJvb2xlYW47XG5cdGJvb2ttYXJrZWRCdXR0b246IGJvb2xlYW47XG5cdHNlYXJjaFNldHRpbmdzQnV0dG9uOiBib29sZWFuO1xuXHR0YWJMaXN0SWNvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0bmV3VGFiSWNvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0dGFiQ2xvc2VCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHN0YXR1c0JhcjogYm9vbGVhbjtcblx0c2Nyb2xsQmFyczogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0bGVmdFNpZGViYXJUb2dnbGVCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHJpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbjogVUlWaXNpYmlsaXR5U3RhdGU7IC8vIENoYW5nZWQgdG8gc3VwcG9ydCBSZXZlYWxcblx0dG9vbHRpcHM6IGJvb2xlYW47XG5cdHNlYXJjaFN1Z2dlc3Rpb25zOiBib29sZWFuO1xuXHRzZWFyY2hUZXJtQ291bnRzOiBib29sZWFuO1xuXHRwcm9wZXJ0aWVzSW5SZWFkaW5nVmlldzogYm9vbGVhbjtcblx0cHJvcGVydGllc0luSGVhZGluZzogYm9vbGVhbjtcblx0YWRkUHJvcGVydHlCdXR0b246IGJvb2xlYW47XG5cdGRlZW1waGFzaXplUHJvcGVydGllczogYm9vbGVhbjtcblx0aW5zdHJ1Y3Rpb25zOiBib29sZWFuO1xuXG5cdC8vIE1vYmlsZS1zcGVjaWZpYyBzZXR0aW5ncyAoU2hvdy9IaWRlIG9ubHkpXG5cdG1vYmlsZUNoZXZyb25zSWNvbjogYm9vbGVhbjtcblx0bmF2aWdhdGVCYWNrQnV0dG9uOiBib29sZWFuO1xuXHRuYXZpZ2F0ZUZvcndhcmRCdXR0b246IGJvb2xlYW47XG5cdHF1aWNrU3dpdGNoZXJCdXR0b246IGJvb2xlYW47XG5cdG1vYmlsZU5ld1RhYkJ1dHRvbjogYm9vbGVhbjtcblx0b3BlblRhYkJ1dHRvbjogYm9vbGVhbjtcblx0cmliYm9uTWVudUJ1dHRvbjogYm9vbGVhbjtcblx0c3dhcE1vYmlsZU5ld1RhYkljb246IGJvb2xlYW47XG5cdGhpZGVNb2JpbGVUaXRsZTogYm9vbGVhbjtcblx0aGlkZU1vYmlsZVN5bmNJY29uOiBib29sZWFuO1xuXG5cdC8vIE1vYmlsZSBuYXZpZ2F0aW9uIG1lbnUgcG9zaXRpb25zXG5cdG5hdmlnYXRlQnV0dG9uUG9zaXRpb246IE1vYmlsZU5hdlBvc2l0aW9uO1xuXHRuYXZpZ2F0aW9uQnV0dG9uUG9zaXRpb246IE1vYmlsZU5hdlBvc2l0aW9uO1xuXHRxdWlja1N3aXRjaGVyUG9zaXRpb246IE1vYmlsZU5hdlBvc2l0aW9uO1xuXHRuZXdUYWJQb3NpdGlvbjogTW9iaWxlTmF2UG9zaXRpb247XG5cdG9wZW5UYWJzUG9zaXRpb246IE1vYmlsZU5hdlBvc2l0aW9uO1xuXHRyaWJib25NZW51UG9zaXRpb246IE1vYmlsZU5hdlBvc2l0aW9uO1xuXG5cdC8vIEFkdmFuY2VkIHNldHRpbmdzXG5cdHZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5OiBudW1iZXI7IC8vIDAtMVxuXHRoZWxwQnV0dG9uUmVwbGFjZW1lbnQ6IHtcblx0XHRlbmFibGVkOiBib29sZWFuO1xuXHRcdGNvbW1hbmRJZDogc3RyaW5nO1xuXHRcdGljb25JZDogc3RyaW5nO1xuXHR9O1xuXHRzeW5jQnV0dG9uUmVwbGFjZW1lbnQ6IHtcblx0XHRlbmFibGVkOiBib29sZWFuO1xuXHRcdGNvbW1hbmRJZDogc3RyaW5nO1xuXHRcdGljb25JZDogc3RyaW5nO1xuXHR9O1xuXG5cdC8vIFRhYiBCYXIgY3VzdG9tIGNvbW1hbmRzXG5cdHRhYkJhckNvbW1hbmRzOiBDb21tYW5kSWNvblBhaXJbXTtcblxuXHQvLyBTdGF0dXMgQmFyIGl0ZW1zICh1bmlmaWVkIGxpc3Qgb2YgZXhpc3RpbmcgKyBjdXN0b20pXG5cdHN0YXR1c0Jhckl0ZW1zOiBTdGF0dXNCYXJJdGVtW107XG5cblx0Ly8gRXhwbG9yZXIgY3VzdG9tIGNvbW1hbmRzIChsZWdhY3kgLSBrZXB0IGZvciBtaWdyYXRpb24pXG5cdGV4cGxvcmVyQ29tbWFuZHM6IENvbW1hbmRJY29uUGFpcltdO1xuXG5cdC8vIEV4cGxvcmVyIGJ1dHRvbiBpdGVtcyAodW5pZmllZCBsaXN0IG9mIG5hdGl2ZSArIGV4dGVybmFsICsgY3VzdG9tKVxuXHRleHBsb3JlckJ1dHRvbkl0ZW1zOiBFeHBsb3JlckJ1dHRvbkl0ZW1bXTtcblxuXHQvLyBOYXRpdmUgZXhwbG9yZXIgYnV0dG9uIGNvbG9ycyAob3B0aW9uYWwpXG5cdG5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzPzoge1xuXHRcdG5ld05vdGU/OiBzdHJpbmc7XG5cdFx0bmV3Rm9sZGVyPzogc3RyaW5nO1xuXHRcdHNvcnRPcmRlcj86IHN0cmluZztcblx0XHRhdXRvUmV2ZWFsPzogc3RyaW5nO1xuXHRcdGNvbGxhcHNlQWxsPzogc3RyaW5nO1xuXHR9O1xuXG5cdC8vIE5hdGl2ZSBleHBsb3JlciBidXR0b24gaWNvbiBvdmVycmlkZXMgKG9wdGlvbmFsKVxuXHRuYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zPzoge1xuXHRcdG5ld05vdGU/OiBzdHJpbmc7XG5cdFx0bmV3Rm9sZGVyPzogc3RyaW5nO1xuXHRcdHNvcnRPcmRlcj86IHN0cmluZztcblx0XHRhdXRvUmV2ZWFsPzogc3RyaW5nO1xuXHRcdGNvbGxhcHNlQWxsPzogc3RyaW5nO1xuXHR9O1xuXG5cdC8vIFByb3BlcnR5IGljb24gc2V0dGluZ3Ncblx0cHJvcGVydHlJY29uSXRlbXM6IFByb3BlcnR5SWNvbkl0ZW1bXTtcblx0bWluaW1hbFByb3BlcnR5SWNvbnM6IGJvb2xlYW47XG5cdHNob3dQcm9wZXJ0eU1lbnVBY3Rpb25zOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVUlTZXR0aW5ncyA9IHtcblx0Ly8gQXV0by1oaWRlIGVsZW1lbnRzXG5cdHRpdGxlQmFyOiAnc2hvdycsXG5cdGZpbGVFeHBsb3Jlck5hdkhlYWRlcjogJ3Nob3cnLFxuXHRvdGhlck5hdkhlYWRlcnM6ICdzaG93Jyxcblx0bGVmdFRhYkhlYWRlcnM6ICdzaG93Jyxcblx0cmlnaHRUYWJIZWFkZXJzOiAnc2hvdycsXG5cdHJpYmJvblJldmVhbE9uSG92ZXI6IGZhbHNlLFxuXHR2YXVsdFN3aXRjaGVyOiAnc2hvdycsXG5cdGhlbHBCdXR0b246ICdzaG93Jyxcblx0c2V0dGluZ3NCdXR0b246ICdzaG93JyxcblxuXHQvLyBTaW1wbGUgdG9nZ2xlc1xuXHR0YWJCYXI6IGZhbHNlLFxuXHR0YWJCYXJIaWRlV2hlblNpbmdsZTogZmFsc2UsXG5cdGVuYWJsZVdpbmRvd0RyYWdnaW5nOiBmYWxzZSxcblx0bmV3Tm90ZUJ1dHRvbjogZmFsc2UsXG5cdG5ld0ZvbGRlckJ1dHRvbjogZmFsc2UsXG5cdHNvcnRPcmRlckJ1dHRvbjogZmFsc2UsXG5cdGF1dG9SZXZlYWxCdXR0b246IGZhbHNlLFxuXHRjb2xsYXBzZUFsbEJ1dHRvbjogZmFsc2UsXG5cdHJlYWRpbmdNb2RlQnV0dG9uOiBmYWxzZSxcblx0Ym9va21hcmtlZEJ1dHRvbjogZmFsc2UsXG5cdHNlYXJjaFNldHRpbmdzQnV0dG9uOiBmYWxzZSxcblx0dGFiTGlzdEljb246ICdzaG93Jyxcblx0bmV3VGFiSWNvbjogJ3Nob3cnLFxuXHR0YWJDbG9zZUJ1dHRvbjogJ3Nob3cnLFxuXHRzdGF0dXNCYXI6IGZhbHNlLFxuXHRzY3JvbGxCYXJzOiAnc2hvdycsXG5cdGxlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uOiAnc2hvdycsXG5cdHJpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbjogJ3Nob3cnLFxuXHR0b29sdGlwczogZmFsc2UsXG5cdHNlYXJjaFN1Z2dlc3Rpb25zOiBmYWxzZSxcblx0c2VhcmNoVGVybUNvdW50czogZmFsc2UsXG5cdHByb3BlcnRpZXNJblJlYWRpbmdWaWV3OiBmYWxzZSxcblx0cHJvcGVydGllc0luSGVhZGluZzogZmFsc2UsXG5cdGFkZFByb3BlcnR5QnV0dG9uOiBmYWxzZSxcblx0ZGVlbXBoYXNpemVQcm9wZXJ0aWVzOiBmYWxzZSxcblx0aW5zdHJ1Y3Rpb25zOiBmYWxzZSxcblxuXHQvLyBNb2JpbGUtc3BlY2lmaWNcblx0bW9iaWxlQ2hldnJvbnNJY29uOiBmYWxzZSxcblx0bmF2aWdhdGVCYWNrQnV0dG9uOiBmYWxzZSxcblx0bmF2aWdhdGVGb3J3YXJkQnV0dG9uOiBmYWxzZSxcblx0cXVpY2tTd2l0Y2hlckJ1dHRvbjogZmFsc2UsXG5cdG1vYmlsZU5ld1RhYkJ1dHRvbjogZmFsc2UsXG5cdG9wZW5UYWJCdXR0b246IGZhbHNlLFxuXHRyaWJib25NZW51QnV0dG9uOiBmYWxzZSxcblx0c3dhcE1vYmlsZU5ld1RhYkljb246IGZhbHNlLFxuXHRoaWRlTW9iaWxlVGl0bGU6IGZhbHNlLFxuXHRoaWRlTW9iaWxlU3luY0ljb246IGZhbHNlLFxuXG5cdC8vIE1vYmlsZSBuYXZpZ2F0aW9uIG1lbnUgcG9zaXRpb25zXG5cdG5hdmlnYXRlQnV0dG9uUG9zaXRpb246ICcxJyxcblx0bmF2aWdhdGlvbkJ1dHRvblBvc2l0aW9uOiAnMicsXG5cdHF1aWNrU3dpdGNoZXJQb3NpdGlvbjogJzMnLFxuXHRuZXdUYWJQb3NpdGlvbjogJzQnLFxuXHRvcGVuVGFic1Bvc2l0aW9uOiAnNScsXG5cdHJpYmJvbk1lbnVQb3NpdGlvbjogJzYnLFxuXG5cdC8vIEFkdmFuY2VkXG5cdHZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5OiAwLjk4LFxuXHRoZWxwQnV0dG9uUmVwbGFjZW1lbnQ6IHtcblx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdH0sXG5cdHN5bmNCdXR0b25SZXBsYWNlbWVudDoge1xuXHRcdGVuYWJsZWQ6IGZhbHNlLFxuXHRcdGNvbW1hbmRJZDogJycsXG5cdFx0aWNvbklkOiAnd3JlbmNoJyxcblx0fSxcblxuXHQvLyBUYWIgQmFyXG5cdHRhYkJhckNvbW1hbmRzOiBbXSxcblxuXHQvLyBTdGF0dXMgQmFyXG5cdHN0YXR1c0Jhckl0ZW1zOiBbXSxcblxuXHQvLyBFeHBsb3JlclxuXHRleHBsb3JlckNvbW1hbmRzOiBbXSxcblx0ZXhwbG9yZXJCdXR0b25JdGVtczogW10sXG5cblx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBjb2xvcnNcblx0bmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnM6IHtcblx0XHRuZXdOb3RlOiB1bmRlZmluZWQsXG5cdFx0bmV3Rm9sZGVyOiB1bmRlZmluZWQsXG5cdFx0c29ydE9yZGVyOiB1bmRlZmluZWQsXG5cdFx0YXV0b1JldmVhbDogdW5kZWZpbmVkLFxuXHRcdGNvbGxhcHNlQWxsOiB1bmRlZmluZWQsXG5cdH0sXG5cblx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBpY29uIG92ZXJyaWRlc1xuXHRuYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zOiB7XG5cdFx0bmV3Tm90ZTogdW5kZWZpbmVkLFxuXHRcdG5ld0ZvbGRlcjogdW5kZWZpbmVkLFxuXHRcdHNvcnRPcmRlcjogdW5kZWZpbmVkLFxuXHRcdGF1dG9SZXZlYWw6IHVuZGVmaW5lZCxcblx0XHRjb2xsYXBzZUFsbDogdW5kZWZpbmVkLFxuXHR9LFxuXG5cdC8vIFByb3BlcnR5IGljb24gc2V0dGluZ3Ncblx0cHJvcGVydHlJY29uSXRlbXM6IFtdLFxuXHRtaW5pbWFsUHJvcGVydHlJY29uczogZmFsc2UsXG5cdHNob3dQcm9wZXJ0eU1lbnVBY3Rpb25zOiB0cnVlLFxufTtcbiIsICIvKipcbiAqIFVJIE1hbmFnZXIgLSBoYW5kbGVzIENTUyBjbGFzcyBpbmplY3Rpb24gYW5kIHJldmVhbC1vbi1ob3ZlciBmdW5jdGlvbmFsaXR5XG4gKi9cblxuaW1wb3J0IHsgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgQ29sbGFwc2libGVTcGxpdCB7XG5cdGNvbGxhcHNlZDogYm9vbGVhbjtcbn1cblxuaW1wb3J0IHsgZ2V0VmF1bHRTd2l0Y2hlck1hc2ssIHNldENzc1Byb3BzIH0gZnJvbSAnLi91dGlscy9jc3NVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBVSU1hbmFnZXIge1xuXHRwcml2YXRlIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xuXHRwcml2YXRlIHNldHRpbmdzOiBVSVNldHRpbmdzO1xuXHRwcml2YXRlIHJldmVhbExpc3RlbmVyczogTWFwPHN0cmluZywgKCkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG5cdHByaXZhdGUgdGFiT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBzaWRlYmFyT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbiwgc2V0dGluZ3M6IFVJU2V0dGluZ3MpIHtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdH1cblxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVUlTZXR0aW5ncykge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblx0XHR0aGlzLmFwcGx5U3R5bGVzKCk7XG5cdFx0Ly8gQXBwbHkgbmF0aXZlIGljb24gb3ZlcnJpZGVzIGFmdGVyIHN0eWxlcyBhcmUgYXBwbGllZFxuXHRcdC8vIE5vdGU6IGV4cGxvcmVyTWFuYWdlciBpcyBhY2Nlc3NlZCB2aWEgcGx1Z2luIGluc3RhbmNlLCBub3Qgc3RvcmVkIGhlcmVcblx0fVxuXG5cdHByaXZhdGUgZGV0ZWN0T1MoKTogJ3dpbmRvd3MnIHwgJ21hY29zJyB8ICduZXV0cmFsJyB7XG5cdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgUGxhdGZvcm0gQVBJXG5cdFx0aWYgKFBsYXRmb3JtLmlzTWFjT1MpIHtcblx0XHRcdHJldHVybiAnbWFjb3MnO1xuXHRcdH1cblx0XHRpZiAoUGxhdGZvcm0uaXNXaW4pIHtcblx0XHRcdHJldHVybiAnd2luZG93cyc7XG5cdFx0fVxuXG5cdFx0Ly8gRGVmYXVsdCB0byBuZXV0cmFsL0xpbnV4XG5cdFx0cmV0dXJuICduZXV0cmFsJztcblx0fVxuXG5cdGFwcGx5U3R5bGVzKCkge1xuXHRcdGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG5cdFx0Ly8gQXV0by1oaWRlIGVsZW1lbnRzIHdpdGggU2hvdy9IaWRlL1JldmVhbFxuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2F1dG8taGlkZS10aXRsZS1iYXInLCB0aGlzLnNldHRpbmdzLnRpdGxlQmFyLCB0cnVlKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtZmlsZS1leHBsb3Jlci1uYXYtaGVhZGVyJywgdGhpcy5zZXR0aW5ncy5maWxlRXhwbG9yZXJOYXZIZWFkZXIpO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2F1dG8taGlkZS1vdGhlci1uYXYtaGVhZGVycycsIHRoaXMuc2V0dGluZ3Mub3RoZXJOYXZIZWFkZXJzKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtbGVmdC10YWItaGVhZGVycycsIHRoaXMuc2V0dGluZ3MubGVmdFRhYkhlYWRlcnMpO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2F1dG8taGlkZS1yaWdodC10YWItaGVhZGVycycsIHRoaXMuc2V0dGluZ3MucmlnaHRUYWJIZWFkZXJzKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtdmF1bHQtc3dpdGNoZXInLCB0aGlzLnNldHRpbmdzLnZhdWx0U3dpdGNoZXIpO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2hpZGVyLWhlbHAtYnV0dG9uJywgdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtc2V0dGluZ3MtYnV0dG9uJywgdGhpcy5zZXR0aW5ncy5zZXR0aW5nc0J1dHRvbik7XG5cblx0XHQvLyBSaWJib24gLSBib29sZWFuIHRvZ2dsZSAoYXV0by1jb2xsYXBzZS1yaWJib24pXG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdhdXRvLWNvbGxhcHNlLXJpYmJvbicsIHRoaXMuc2V0dGluZ3MucmliYm9uUmV2ZWFsT25Ib3Zlcik7XG5cblx0XHQvLyBHbG9iYWwgcmVwbGFjZW1lbnQgdmlzaWJpbGl0eVxuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgndWktdHdlYWtlci1zeW5jLXJlcGxhY2VtZW50LWVuYWJsZWQnLCB0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCk7XG5cblx0XHQvLyBTaW1wbGUgdG9nZ2xlc1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItdGFicycsIHRoaXMuc2V0dGluZ3MudGFiQmFyKTtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy50YWJCYXIpIHtcblx0XHRcdGNvbnN0IG9zID0gdGhpcy5kZXRlY3RPUygpO1xuXHRcdFx0Ly8gUmVtb3ZlIE9TLXNwZWNpZmljIGNsYXNzZXMgZmlyc3Rcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZXItdGFicy13aW5kb3dzJywgJ2hpZGVyLXRhYnMtbWFjb3MnLCAnaGlkZXItdGFicy1uZXV0cmFsJyk7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYGhpZGVyLXRhYnMtJHtvc31gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlci10YWJzLXdpbmRvd3MnLCAnaGlkZXItdGFicy1tYWNvcycsICdoaWRlci10YWJzLW5ldXRyYWwnKTtcblx0XHR9XG5cblx0XHQvLyBBdXRvLWhpZGUgdGFiIGJhciB3aGVuIG9ubHkgb25lIHRhYlxuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnYXV0by1oaWRlLXRhYi1iYXItd2hlbi1zaW5nbGUtdGFiJywgdGhpcy5zZXR0aW5ncy50YWJCYXJIaWRlV2hlblNpbmdsZSk7XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MudGFiQmFySGlkZVdoZW5TaW5nbGUpIHtcblx0XHRcdGNvbnN0IG9zID0gdGhpcy5kZXRlY3RPUygpO1xuXHRcdFx0Ly8gUmVtb3ZlIE9TLXNwZWNpZmljIGNsYXNzZXMgZmlyc3Rcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYXV0by1oaWRlLXRhYi1iYXItd2luZG93cycsICdhdXRvLWhpZGUtdGFiLWJhci1tYWNvcycsICdhdXRvLWhpZGUtdGFiLWJhci1uZXV0cmFsJyk7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYGF1dG8taGlkZS10YWItYmFyLSR7b3N9YCk7XG5cdFx0XHR0aGlzLnNldHVwVGFiT2JzZXJ2ZXIoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jbGVhbnVwVGFiT2JzZXJ2ZXIoKTtcblx0XHR9XG5cblx0XHQvLyBXaW5kb3cgZHJhZ2dpbmcgLSBvbmx5IGFwcGx5IHdoZW4gdGFiIGJhciBpcyBoaWRkZW5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy50YWJCYXIgJiYgdGhpcy5zZXR0aW5ncy5lbmFibGVXaW5kb3dEcmFnZ2luZykge1xuXHRcdFx0Y29uc3Qgb3MgPSB0aGlzLmRldGVjdE9TKCk7XG5cdFx0XHQvLyBSZW1vdmUgYWxsIHdpbmRvdyBkcmFnZ2luZyBjbGFzc2VzIGZpcnN0XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctd2luZG93cycsICdlbmFibGUtd2luZG93LWRyYWdnaW5nLW1hY29zJywgJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctbmV1dHJhbCcpO1xuXHRcdFx0Ly8gQXBwbHkgT1Mtc3BlY2lmaWMgY2xhc3Ncblx0XHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy0ke29zfWApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBSZW1vdmUgYWxsIHdpbmRvdyBkcmFnZ2luZyBjbGFzc2VzIGlmIG5vdCBlbmFibGVkXG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctd2luZG93cycsICdlbmFibGUtd2luZG93LWRyYWdnaW5nLW1hY29zJywgJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctbmV1dHJhbCcpO1xuXHRcdH1cblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW5ldy1ub3RlJywgdGhpcy5zZXR0aW5ncy5uZXdOb3RlQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW5ldy1mb2xkZXInLCB0aGlzLnNldHRpbmdzLm5ld0ZvbGRlckJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1zb3J0LW9yZGVyJywgdGhpcy5zZXR0aW5ncy5zb3J0T3JkZXJCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tYXV0by1yZXZlYWwnLCB0aGlzLnNldHRpbmdzLmF1dG9SZXZlYWxCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tY29sbGFwc2UtYWxsJywgdGhpcy5zZXR0aW5ncy5jb2xsYXBzZUFsbEJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1yZWFkaW5nLW1vZGUnLCB0aGlzLnNldHRpbmdzLnJlYWRpbmdNb2RlQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLWJvb2ttYXJrZWQnLCB0aGlzLnNldHRpbmdzLmJvb2ttYXJrZWRCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tc2VhcmNoLXNldHRpbmdzJywgdGhpcy5zZXR0aW5ncy5zZWFyY2hTZXR0aW5nc0J1dHRvbik7XG5cblx0XHQvLyBUYWIgaWNvbnMgLSBub3cgc3VwcG9ydCBSZXZlYWxcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlLXRhYi1saXN0LWljb24nLCB0aGlzLnNldHRpbmdzLnRhYkxpc3RJY29uKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlLW5ldy10YWItaWNvbicsIHRoaXMuc2V0dGluZ3MubmV3VGFiSWNvbik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZS10YWItY2xvc2UtYnV0dG9uJywgdGhpcy5zZXR0aW5ncy50YWJDbG9zZUJ1dHRvbik7XG5cblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXN0YXR1cycsIHRoaXMuc2V0dGluZ3Muc3RhdHVzQmFyKTtcblxuXHRcdC8vIFNjcm9sbGJhcnMgLSBub3cgc3VwcG9ydCBTaG93L0hpZGUvUmV2ZWFsXG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZXItc2Nyb2xsJywgdGhpcy5zZXR0aW5ncy5zY3JvbGxCYXJzKTtcblxuXHRcdC8vIFNldCB1cCBzY3JvbGxiYXIgcmV2ZWFsIGhvdmVyIGxpc3RlbmVycyBpZiBuZWVkZWRcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zY3JvbGxCYXJzID09PSAncmV2ZWFsJykge1xuXHRcdFx0dGhpcy5zZXR1cFNjcm9sbGJhclJldmVhbExpc3RlbmVycygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJlbW92ZVNjcm9sbGJhclJldmVhbExpc3RlbmVycygpO1xuXHRcdH1cblxuXHRcdC8vIFNpZGViYXIgdG9nZ2xlIGJ1dHRvbnMgLSBub3cgc3VwcG9ydCBSZXZlYWxcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlci1sZWZ0LXNpZGViYXItYnV0dG9uJywgdGhpcy5zZXR0aW5ncy5sZWZ0U2lkZWJhclRvZ2dsZUJ1dHRvbik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZXItcmlnaHQtc2lkZWJhci1idXR0b24nLCB0aGlzLnNldHRpbmdzLnJpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbik7XG5cblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXRvb2x0aXBzJywgdGhpcy5zZXR0aW5ncy50b29sdGlwcyk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci1zZWFyY2gtc3VnZ2VzdGlvbnMnLCB0aGlzLnNldHRpbmdzLnNlYXJjaFN1Z2dlc3Rpb25zKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXNlYXJjaC1jb3VudHMnLCB0aGlzLnNldHRpbmdzLnNlYXJjaFRlcm1Db3VudHMpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItbWV0YScsIHRoaXMuc2V0dGluZ3MucHJvcGVydGllc0luUmVhZGluZ1ZpZXcpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgndWktdHdlYWtlci1kZWVtcGhhc2l6ZS1wcm9wZXJ0aWVzJywgdGhpcy5zZXR0aW5ncy5kZWVtcGhhc2l6ZVByb3BlcnRpZXMpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbWV0YWRhdGEtaGVhZGluZy1vZmYnLCB0aGlzLnNldHRpbmdzLnByb3BlcnRpZXNJbkhlYWRpbmcpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbWV0YWRhdGEtYWRkLXByb3BlcnR5LW9mZicsIHRoaXMuc2V0dGluZ3MuYWRkUHJvcGVydHlCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItaW5zdHJ1Y3Rpb25zJywgdGhpcy5zZXR0aW5ncy5pbnN0cnVjdGlvbnMpO1xuXG5cdFx0Ly8gTW9iaWxlLXNwZWNpZmljXG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWljb24tbW9iaWxlLWNoZXZyb25zJywgdGhpcy5zZXR0aW5ncy5tb2JpbGVDaGV2cm9uc0ljb24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tYmFjaycsIHRoaXMuc2V0dGluZ3MubmF2aWdhdGVCYWNrQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW1vYmlsZS1uYXZiYXItYWN0aW9uLWZvcndhcmQnLCB0aGlzLnNldHRpbmdzLm5hdmlnYXRlRm9yd2FyZEJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1xdWljay1zd2l0Y2hlcicsIHRoaXMuc2V0dGluZ3MucXVpY2tTd2l0Y2hlckJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1uZXctdGFiJywgdGhpcy5zZXR0aW5ncy5tb2JpbGVOZXdUYWJCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tdGFicycsIHRoaXMuc2V0dGluZ3Mub3BlblRhYkJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1tZW51JywgdGhpcy5zZXR0aW5ncy5yaWJib25NZW51QnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3N3YXAtbW9iaWxlLW5ldy10YWItaWNvbicsIHRoaXMuc2V0dGluZ3Muc3dhcE1vYmlsZU5ld1RhYkljb24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1tb2JpbGUtdGl0bGUnLCB0aGlzLnNldHRpbmdzLmhpZGVNb2JpbGVUaXRsZSk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLW1vYmlsZS1zeW5jLWljb24nLCB0aGlzLnNldHRpbmdzLmhpZGVNb2JpbGVTeW5jSWNvbik7XG5cblx0XHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51IHBvc2l0aW9uc1xuXHRcdC8vIFJlbW92ZSBhbGwgZXhpc3Rpbmcgb3JkZXIgY2xhc3NlcyBmaXJzdFxuXHRcdGNvbnN0IG9yZGVyQ2xhc3NlcyA9IEFycmF5LmZyb20oYm9keS5jbGFzc0xpc3QpLmZpbHRlcigoY2xzKSA9PlxuXHRcdFx0Y2xzLnN0YXJ0c1dpdGgoJ29yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLScpXG5cdFx0KTtcblx0XHRvcmRlckNsYXNzZXMuZm9yRWFjaCgoY2xzKSA9PiBib2R5LmNsYXNzTGlzdC5yZW1vdmUoY2xzKSk7XG5cblx0XHQvLyBBZGQgdGhlIHNlbGVjdGVkIG9yZGVyIGNsYXNzZXNcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTEtJHt0aGlzLnNldHRpbmdzLm5hdmlnYXRlQnV0dG9uUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC0yLSR7dGhpcy5zZXR0aW5ncy5uYXZpZ2F0aW9uQnV0dG9uUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC0zLSR7dGhpcy5zZXR0aW5ncy5xdWlja1N3aXRjaGVyUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC00LSR7dGhpcy5zZXR0aW5ncy5uZXdUYWJQb3NpdGlvbn1gKTtcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTUtJHt0aGlzLnNldHRpbmdzLm9wZW5UYWJzUG9zaXRpb259YCk7XG5cdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGBvcmRlci1uYXZiYXItYnV0dG9uLW50aC1jaGlsZC02LSR7dGhpcy5zZXR0aW5ncy5yaWJib25NZW51UG9zaXRpb259YCk7XG5cblx0XHQvLyBVc2UgZ2V0VmF1bHRTd2l0Y2hlck1hc2sgdXRpbGl0eVxuXHRcdGNvbnN0IG1hc2tWYWx1ZSA9IGdldFZhdWx0U3dpdGNoZXJNYXNrKHRoaXMuc2V0dGluZ3MudmF1bHRTd2l0Y2hlckJhY2tncm91bmRUcmFuc3BhcmVuY3kpO1xuXG5cdFx0c2V0Q3NzUHJvcHMoYm9keSwge1xuXHRcdFx0Jy0tYXV0by1oaWRlLXZhdWx0LXN3aXRjaGVyLWJnLXRyYW5zcGFyZW5jeSc6IFN0cmluZyh0aGlzLnNldHRpbmdzLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5KSxcblx0XHRcdCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1tYXNrJzogbWFza1ZhbHVlLFxuXHRcdH0pO1xuXG5cdFx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBjb2xvcnMgYXJlIG5vdyBhcHBsaWVkIGRpcmVjdGx5IHZpYSBFeHBsb3Jlck1hbmFnZXIuYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKClcblx0XHQvLyBObyBDU1MgdmFyaWFibGVzIG5lZWRlZCAtIGNvbG9ycyBhcmUgYXBwbGllZCBhcyBpbmxpbmUgc3R5bGVzIG9ubHkgd2hlbiBzZXRcblx0fVxuXG5cdHByaXZhdGUgYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keTogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nLCBzdGF0ZTogVUlWaXNpYmlsaXR5U3RhdGUsIHVzZUFsd2F5c1Nob3c6IGJvb2xlYW4gPSBmYWxzZSkge1xuXHRcdC8vIFJlbW92ZSBhbGwgc3RhdGVzIGZpcnN0XG5cdFx0aWYgKHVzZUFsd2F5c1Nob3cpIHtcblx0XHRcdGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYWx3YXlzLXNob3ctdGl0bGUtYmFyJywgYCR7Y2xhc3NOYW1lfS1oaWRlYCwgYCR7Y2xhc3NOYW1lfS1yZXZlYWxgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKGAke2NsYXNzTmFtZX0tc2hvd2AsIGAke2NsYXNzTmFtZX0taGlkZWAsIGAke2NsYXNzTmFtZX0tcmV2ZWFsYCk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGN1cnJlbnQgc3RhdGVcblx0XHRpZiAoc3RhdGUgPT09ICdzaG93Jykge1xuXHRcdFx0aWYgKHVzZUFsd2F5c1Nob3cpIHtcblx0XHRcdFx0Ym9keS5jbGFzc0xpc3QuYWRkKCdhbHdheXMtc2hvdy10aXRsZS1iYXInKTtcblx0XHRcdH1cblx0XHRcdC8vIE5vIGNsYXNzIG5lZWRlZCBmb3Igc2hvdyBzdGF0ZSAob3IgdXNlIGFsd2F5cy1zaG93IGZvciB0aXRsZSBiYXIpXG5cdFx0fSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2hpZGUnKSB7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYCR7Y2xhc3NOYW1lfS1oaWRlYCk7XG5cdFx0fSBlbHNlIGlmIChzdGF0ZSA9PT0gJ3JldmVhbCcpIHtcblx0XHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgJHtjbGFzc05hbWV9LXJldmVhbGApO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2V0dXBTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKSB7XG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIGxpc3RlbmVycyBmaXJzdFxuXHRcdHRoaXMucmVtb3ZlU2Nyb2xsYmFyUmV2ZWFsTGlzdGVuZXJzKCk7XG5cblx0XHQvLyBIZWxwZXIgdG8gY2hlY2sgaWYgYW4gZWxlbWVudCBpcyBzY3JvbGxhYmxlXG5cdFx0Y29uc3QgaXNTY3JvbGxhYmxlID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogYm9vbGVhbiA9PiB7XG5cdFx0XHRjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXHRcdFx0Y29uc3Qgb3ZlcmZsb3cgPSBzdHlsZS5vdmVyZmxvdyArIHN0eWxlLm92ZXJmbG93WSArIHN0eWxlLm92ZXJmbG93WDtcblx0XHRcdGlmICghb3ZlcmZsb3cuaW5jbHVkZXMoJ3Njcm9sbCcpICYmICFvdmVyZmxvdy5pbmNsdWRlcygnYXV0bycpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdC8vIENoZWNrIGlmIGVsZW1lbnQgYWN0dWFsbHkgaGFzIHNjcm9sbGFibGUgY29udGVudFxuXHRcdFx0cmV0dXJuIGVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZWxlbWVudC5zY3JvbGxXaWR0aCA+IGVsZW1lbnQuY2xpZW50V2lkdGg7XG5cdFx0fTtcblxuXHRcdC8vIFRyYWNrIHdoaWNoIHNjcm9sbGFibGUgZWxlbWVudHMgc2hvdWxkIGhhdmUgaG92ZXIgY2xhc3Ncblx0XHRjb25zdCBob3ZlcmVkRWxlbWVudHMgPSBuZXcgU2V0PEhUTUxFbGVtZW50PigpO1xuXG5cdFx0Ly8gVXNlIG1vdXNlbW92ZSB0byB0cmFjayBtb3VzZSBwb3NpdGlvbiBhbmQgb25seSBhZGQgaG92ZXIgY2xhc3Mgd2hlbiBuZWFyIHNjcm9sbGJhclxuXHRcdGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICghdGFyZ2V0KSByZXR1cm47XG5cblx0XHRcdC8vIENsZWFyIGFsbCBob3ZlciBjbGFzc2VzIGZpcnN0XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1zY3JvbGxiYXItaG92ZXInKTtcblx0XHRcdH0pO1xuXHRcdFx0aG92ZXJlZEVsZW1lbnRzLmNsZWFyKCk7XG5cblx0XHRcdC8vIEZpbmQgc2Nyb2xsYWJsZSBjb250YWluZXJzIGFuZCBjaGVjayBpZiBtb3VzZSBpcyBuZWFyIHRoZSBzY3JvbGxiYXIgYXJlYVxuXHRcdFx0bGV0IGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IHRhcmdldDtcblx0XHRcdHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkgJiYgZWxlbWVudCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG5cdFx0XHRcdGlmIChpc1Njcm9sbGFibGUoZWxlbWVudCkpIHtcblx0XHRcdFx0XHRjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdFx0XHRjb25zdCBzY3JvbGxiYXJBcmVhID0gMjU7IC8vIFdpZHRoIG9mIGFyZWEgbmVhciBlZGdlcyB3aGVyZSBzY3JvbGxiYXIgd291bGQgYmVcblxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIG1vdXNlIGlzIGluIHRoZSBzY3JvbGxiYXIgYXJlYSAocmlnaHQgZWRnZSBmb3IgdmVydGljYWwsIGJvdHRvbSBlZGdlIGZvciBob3Jpem9udGFsKVxuXHRcdFx0XHRcdGNvbnN0IGlzSW5WZXJ0aWNhbFNjcm9sbGJhckFyZWEgPSBlLmNsaWVudFggPj0gcmVjdC5yaWdodCAtIHNjcm9sbGJhckFyZWEgJiYgZS5jbGllbnRYIDw9IHJlY3QucmlnaHQ7XG5cdFx0XHRcdFx0Y29uc3QgaXNJbkhvcml6b250YWxTY3JvbGxiYXJBcmVhID0gZS5jbGllbnRZID49IHJlY3QuYm90dG9tIC0gc2Nyb2xsYmFyQXJlYSAmJiBlLmNsaWVudFkgPD0gcmVjdC5ib3R0b207XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFkZCBob3ZlciBjbGFzcyBpZiBtb3VzZSBpcyBpbiB0aGUgc2Nyb2xsYmFyIGFyZWFcblx0XHRcdFx0XHRpZiAoaXNJblZlcnRpY2FsU2Nyb2xsYmFyQXJlYSB8fCBpc0luSG9yaXpvbnRhbFNjcm9sbGJhckFyZWEpIHtcblx0XHRcdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndWktdHdlYWtlci1zY3JvbGxiYXItaG92ZXInKTtcblx0XHRcdFx0XHRcdGhvdmVyZWRFbGVtZW50cy5hZGQoZWxlbWVudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIENsZWFyIGhvdmVyIHdoZW4gbW91c2UgbGVhdmVzIGRvY3VtZW50XG5cdFx0Y29uc3QgaGFuZGxlTW91c2VMZWF2ZSA9ICgpID0+IHtcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLXNjcm9sbGJhci1ob3ZlcicpO1xuXHRcdFx0fSk7XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuY2xlYXIoKTtcblx0XHR9O1xuXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlLCB0cnVlKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlTW91c2VMZWF2ZSwgdHJ1ZSk7XG5cblx0XHQvLyBTdG9yZSBjbGVhbnVwIGZ1bmN0aW9uXG5cdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuc2V0KCdzY3JvbGxiYXItcmV2ZWFsJywgKCkgPT4ge1xuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlLCB0cnVlKTtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBoYW5kbGVNb3VzZUxlYXZlLCB0cnVlKTtcblx0XHRcdC8vIFJlbW92ZSBhbGwgaG92ZXIgY2xhc3Nlc1xuXHRcdFx0aG92ZXJlZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItc2Nyb2xsYmFyLWhvdmVyJyk7XG5cdFx0XHR9KTtcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5jbGVhcigpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmVTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKSB7XG5cdFx0Y29uc3QgY2xlYW51cCA9IHRoaXMucmV2ZWFsTGlzdGVuZXJzLmdldCgnc2Nyb2xsYmFyLXJldmVhbCcpO1xuXHRcdGlmIChjbGVhbnVwKSB7XG5cdFx0XHRjbGVhbnVwKCk7XG5cdFx0XHR0aGlzLnJldmVhbExpc3RlbmVycy5kZWxldGUoJ3Njcm9sbGJhci1yZXZlYWwnKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU2V0IHVwIE11dGF0aW9uT2JzZXJ2ZXIgdG8gZGV0ZWN0IHNpbmdsZSB0YWIgc3RhdGUgYW5kIHNpZGViYXIgc3RhdGVcblx0ICogUG9ydGVkIGZyb20gb2JzaWRpYW4tb3h5Z2VuLXNldHRpbmdzXG5cdCAqL1xuXHRwcml2YXRlIHNldHVwVGFiT2JzZXJ2ZXIoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMudGFiT2JzZXJ2ZXIpIHtcblx0XHRcdHJldHVybjsgLy8gQWxyZWFkeSBzZXQgdXBcblx0XHR9XG5cblx0XHRjb25zdCBjaGVja1NpZGViYXJzID0gKCkgPT4ge1xuXHRcdFx0Y29uc3Qgd29ya3NwYWNlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZTtcblx0XHRcdGNvbnN0IHJpZ2h0U2lkZWJhckNvbGxhcHNlZCA9ICh3b3Jrc3BhY2UucmlnaHRTcGxpdCBhcyB1bmtub3duIGFzIENvbGxhcHNpYmxlU3BsaXQpPy5jb2xsYXBzZWQgIT09IGZhbHNlO1xuXHRcdFx0Y29uc3QgbGVmdFNpZGViYXJDb2xsYXBzZWQgPSAod29ya3NwYWNlLmxlZnRTcGxpdCBhcyB1bmtub3duIGFzIENvbGxhcHNpYmxlU3BsaXQpPy5jb2xsYXBzZWQgIT09IGZhbHNlO1xuXG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2lzLXJpZ2h0LXNpZGViYXItY29sbGFwc2VkJywgcmlnaHRTaWRlYmFyQ29sbGFwc2VkKTtcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtbGVmdC1zaWRlYmFyLWNvbGxhcHNlZCcsIGxlZnRTaWRlYmFyQ29sbGFwc2VkKTtcblx0XHR9O1xuXG5cdFx0Ly8gRGVib3VuY2UgZnVuY3Rpb25cblx0XHRsZXQgY2hlY2tUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblx0XHRjb25zdCBkZWJvdW5jZWRDaGVjayA9ICgpID0+IHtcblx0XHRcdGlmIChjaGVja1RpbWVvdXQpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KGNoZWNrVGltZW91dCk7XG5cdFx0XHR9XG5cdFx0XHRjaGVja1RpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGNoZWNrU2lkZWJhcnMoKTtcblx0XHRcdFx0Y2hlY2tUaW1lb3V0ID0gbnVsbDtcblx0XHRcdH0sIDE1MCk7XG5cdFx0fTtcblxuXHRcdC8vIEluaXRpYWwgY2hlY2tcblx0XHRzZXRUaW1lb3V0KGNoZWNrU2lkZWJhcnMsIDEwMCk7XG5cblx0XHQvLyBXYXRjaCBmb3IgY2hhbmdlcyBpbiB3b3Jrc3BhY2Vcblx0XHR0aGlzLnRhYk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0ZGVib3VuY2VkQ2hlY2soKTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IHdvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UnKTtcblx0XHRpZiAod29ya3NwYWNlKSB7XG5cdFx0XHR0aGlzLnRhYk9ic2VydmVyLm9ic2VydmUod29ya3NwYWNlLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gTGlzdGVuIHRvIHdvcmtzcGFjZSBsYXlvdXQgYW5kIHJlc2l6ZSBldmVudHNcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcblx0XHRcdFx0ZGVib3VuY2VkQ2hlY2soKTtcblx0XHRcdH0pXG5cdFx0KTtcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbigncmVzaXplJywgKCkgPT4ge1xuXHRcdFx0XHRkZWJvdW5jZWRDaGVjaygpO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGNsYXNzIGNoYW5nZXMgb24gd29ya3NwYWNlIGVsZW1lbnQgKHNpZGViYXIgdG9nZ2xlcylcblx0XHRjb25zdCB3b3Jrc3BhY2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UnKTtcblx0XHRpZiAod29ya3NwYWNlRWwpIHtcblx0XHRcdHRoaXMuc2lkZWJhck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuXHRcdFx0XHRsZXQgc2hvdWxkQ2hlY2sgPSBmYWxzZTtcblx0XHRcdFx0bXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XG5cdFx0XHRcdFx0aWYgKG11dGF0aW9uLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJiBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnY2xhc3MnKSB7XG5cdFx0XHRcdFx0XHRzaG91bGRDaGVjayA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHNob3VsZENoZWNrKSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaW1tZWRpYXRlbHkgZm9yIHNpZGViYXIgdG9nZ2xlcyB0byBzeW5jIGFuaW1hdGlvblxuXHRcdFx0XHRcdGNoZWNrU2lkZWJhcnMoKTtcblx0XHRcdFx0XHQvLyBTdGlsbCBydW4gZGVib3VuY2VkIGNoZWNrIGFzIGEgc2FmZXR5IGZhbGxiYWNrXG5cdFx0XHRcdFx0ZGVib3VuY2VkQ2hlY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuc2lkZWJhck9ic2VydmVyLm9ic2VydmUod29ya3NwYWNlRWwsIHtcblx0XHRcdFx0YXR0cmlidXRlczogdHJ1ZSxcblx0XHRcdFx0YXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ11cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDbGVhbnVwIHRhYiBvYnNlcnZlclxuXHQgKi9cblx0cHJpdmF0ZSBjbGVhbnVwVGFiT2JzZXJ2ZXIoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMudGFiT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMudGFiT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0dGhpcy50YWJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIGFsbCBzaWRlYmFyIHJlbGF0ZWQgY2xhc3Nlc1xuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtcmlnaHQtc2lkZWJhci1jb2xsYXBzZWQnLCAnaXMtbGVmdC1zaWRlYmFyLWNvbGxhcHNlZCcpO1xuXG5cdFx0Ly8gUmVtb3ZlIE9TLXNwZWNpZmljIGNsYXNzZXNcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2F1dG8taGlkZS10YWItYmFyLXdpbmRvd3MnLCAnYXV0by1oaWRlLXRhYi1iYXItbWFjb3MnLCAnYXV0by1oaWRlLXRhYi1iYXItbmV1dHJhbCcpO1xuXHR9XG5cblx0Y2xlYW51cCgpIHtcblx0XHR0aGlzLmNsZWFudXBUYWJPYnNlcnZlcigpO1xuXHRcdC8vIFJlbW92ZSBhbGwgZXZlbnQgbGlzdGVuZXJzXG5cdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuZm9yRWFjaCgoY2xlYW51cCkgPT4gY2xlYW51cCgpKTtcblx0XHR0aGlzLnJldmVhbExpc3RlbmVycy5jbGVhcigpO1xuXG5cdFx0Ly8gUmVtb3ZlIGFsbCBjbGFzc2VzXG5cdFx0Y29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdFx0Y29uc3QgY2xhc3Nlc1RvUmVtb3ZlOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmZvckVhY2goKGNsYXNzTmFtZSkgPT4ge1xuXHRcdFx0aWYgKGNsYXNzTmFtZS5zdGFydHNXaXRoKCd1aS10d2Vha2VyLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdhdXRvLWhpZGUtJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lLnN0YXJ0c1dpdGgoJ2hpZGVyLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdoaWRlLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdtZXRhZGF0YS0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnb3JkZXItbmF2YmFyLWJ1dHRvbi0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUgPT09ICdhdXRvLWNvbGxhcHNlLXJpYmJvbicgfHxcblx0XHRcdFx0Y2xhc3NOYW1lID09PSAnc3dhcC1tb2JpbGUtbmV3LXRhYi1pY29uJyB8fFxuXHRcdFx0XHRjbGFzc05hbWUgPT09ICdhbHdheXMtc2hvdy10aXRsZS1iYXInKSB7XG5cdFx0XHRcdGNsYXNzZXNUb1JlbW92ZS5wdXNoKGNsYXNzTmFtZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y2xhc3Nlc1RvUmVtb3ZlLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gYm9keS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSkpO1xuXG5cdFx0Ly8gUmVtb3ZlIENTUyB2YXJpYWJsZXNcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1iZy10cmFuc3BhcmVuY3knKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1tYXNrJyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLW5ldy1ub3RlJyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLW5ldy1mb2xkZXInKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3Itc29ydC1vcmRlcicpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1hdXRvLXJldmVhbCcpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1jb2xsYXBzZS1hbGwnKTtcblx0fVxufVxuIiwgIi8qKlxyXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgQ1NTIGdlbmVyYXRpb25cclxuICovXHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgbWFzay1pbWFnZSB2YWx1ZSBmb3IgdGhlIHZhdWx0IHN3aXRjaGVyIGJhc2VkIG9uIHRyYW5zcGFyZW5jeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhdWx0U3dpdGNoZXJNYXNrKHRyYW5zcGFyZW5jeTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGlmICh0cmFuc3BhcmVuY3kgPj0gMSkge1xyXG4gICAgICAgIHJldHVybiAnbm9uZSc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ2xpbmVhci1ncmFkaWVudCh0byB0b3AsIGhzbCgwLCAwJSwgMCUpIDAlLCBoc2xhKDAsIDAlLCAwJSwgMC45OSkgMTguNCUsIGhzbGEoMCwgMCUsIDAlLCAwLjk2MykgMzMuNyUsIGhzbGEoMCwgMCUsIDAlLCAwLjkyKSA0Ni40JSwgaHNsYSgwLCAwJSwgMCUsIDAuODY0KSA1Ni43JSwgaHNsYSgwLCAwJSwgMCUsIDAuNzk2KSA2NC44JSwgaHNsYSgwLCAwJSwgMCUsIDAuNzIpIDcxLjIlLCBoc2xhKDAsIDAlLCAwJSwgMC42MzcpIDc2LjElLCBoc2xhKDAsIDAlLCAwJSwgMC41NSkgNzkuOSUsIGhzbGEoMCwgMCUsIDAlLCAwLjQ2KSA4Mi44JSwgaHNsYSgwLCAwJSwgMCUsIDAuMzcpIDg1LjIlLCBoc2xhKDAsIDAlLCAwJSwgMC4yODMpIDg3LjMlLCBoc2xhKDAsIDAlLCAwJSwgMC4yKSA4OS42JSwgaHNsYSgwLCAwJSwgMCUsIDAuMTI0KSA5Mi4zJSwgaHNsYSgwLCAwJSwgMCUsIDAuMDU2KSA5NS42JSwgaHNsYSgwLCAwJSwgMCUsIDApIDEwMCUpJztcclxufVxyXG5cclxuLyoqXHJcbiAqIExpZ2h0d2VpZ2h0IGhlbHBlciB0aGF0IG1pcnJvcnMgT2JzaWRpYW4ncyBzZXRDc3NQcm9wcyBBUEkgd2hlcmUgdW5hdmFpbGFibGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDc3NQcm9wcyhlbDogSFRNTEVsZW1lbnQsIHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KSB7XHJcbiAgICBPYmplY3QuZW50cmllcyhwcm9wcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCBTdHJpbmcodmFsdWUpKTtcclxuICAgIH0pO1xyXG59XHJcbiIsICIvKipcclxuICogQ29tbWFuZCByZWdpc3RyYXRpb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFVJU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgVUlWaXNpYmlsaXR5U3RhdGUgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmludGVyZmFjZSBDb21tYW5kQ29udGV4dCB7XHJcblx0cGx1Z2luOiBQbHVnaW47XHJcblx0c2V0dGluZ3M6IFVJU2V0dGluZ3M7XHJcblx0c2F2ZVNldHRpbmdzOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG5cdHJlZnJlc2g6ICgpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKGNvbnRleHQ6IENvbW1hbmRDb250ZXh0KSB7XHJcblx0Y29uc3QgeyBwbHVnaW4sIHNldHRpbmdzLCBzYXZlU2V0dGluZ3MsIHJlZnJlc2ggfSA9IGNvbnRleHQ7XHJcblxyXG5cdC8vIFRvZ2dsZSBjb21tYW5kcyBmb3IgYXV0by1oaWRlIGVsZW1lbnRzIChTaG93L0hpZGUvUmV2ZWFsKVxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdGl0bGUtYmFyJywgJ1RvZ2dsZSB0aXRsZSBiYXInLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy50aXRsZUJhciA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy50aXRsZUJhcik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1maWxlLWV4cGxvcmVyLW5hdi1oZWFkZXInLCAnVG9nZ2xlIGZpbGUgZXhwbG9yZXIgbmF2aWdhdGlvbiBoZWFkZXInLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5maWxlRXhwbG9yZXJOYXZIZWFkZXIgPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MuZmlsZUV4cGxvcmVyTmF2SGVhZGVyKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW90aGVyLW5hdi1oZWFkZXJzJywgJ1RvZ2dsZSBvdGhlciBuYXZpZ2F0aW9uIGhlYWRlcnMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5vdGhlck5hdkhlYWRlcnMgPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3Mub3RoZXJOYXZIZWFkZXJzKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWxlZnQtdGFiLWhlYWRlcnMnLCAnVG9nZ2xlIGxlZnQgdGFiIGhlYWRlcnMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5sZWZ0VGFiSGVhZGVycyA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5sZWZ0VGFiSGVhZGVycyk7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1yaWdodC10YWItaGVhZGVycycsICdUb2dnbGUgcmlnaHQgdGFiIGhlYWRlcnMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5yaWdodFRhYkhlYWRlcnMgPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MucmlnaHRUYWJIZWFkZXJzKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBOb3RlOiBSaWJib24gdG9nZ2xlIGV4Y2x1ZGVkIC0gdXNlcyBiYXNlIE9ic2lkaWFuIGNvbW1hbmRcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS12YXVsdC1zd2l0Y2hlcicsICdUb2dnbGUgdmF1bHQgc3dpdGNoZXInLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy52YXVsdFN3aXRjaGVyID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnZhdWx0U3dpdGNoZXIpO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtaGVscC1idXR0b24nLCAnVG9nZ2xlIGhlbHAgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MuaGVscEJ1dHRvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5oZWxwQnV0dG9uKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNldHRpbmdzLWJ1dHRvbicsICdUb2dnbGUgc2V0dGluZ3MgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Muc2V0dGluZ3NCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3Muc2V0dGluZ3NCdXR0b24pO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIE9wZW4gc2V0dGluZ3MgY29tbWFuZFxyXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdGlkOiAnb3Blbi1zZXR0aW5ncycsXHJcblx0XHRuYW1lOiAnT3BlbiBzZXR0aW5ncycsXHJcblx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHQvLyBBY2Nlc3MgYXBwIHRocm91Z2ggcGx1Z2luIGluc3RhbmNlIChQbHVnaW4gY2xhc3MgaGFzIGFwcCBwcm9wZXJ0eSlcclxuXHRcdFx0Y29uc3QgYXBwID0gcGx1Z2luLmFwcDtcclxuXHRcdFx0Ly8gVXNlIHR5cGUgYXNzZXJ0aW9uIGZvciBzZXR0aW5nIEFQSSBhcyBpdCdzIG5vdCBpbiB0aGUgcHVibGljIHR5cGUgZGVmaW5pdGlvbnNcclxuXHRcdFx0Ly8gYnV0IGlzIGF2YWlsYWJsZSBpbiB0aGUgcnVudGltZSBBUElcclxuXHRcdFx0Y29uc3Qgc2V0dGluZ0FwaSA9IChhcHAgYXMgeyBzZXR0aW5nPzogeyBvcGVuPzogKCkgPT4gdm9pZDsgb3BlblRhYkJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCB9IH0pLnNldHRpbmc7XHJcblx0XHRcdGlmIChzZXR0aW5nQXBpKSB7XHJcblx0XHRcdFx0c2V0dGluZ0FwaS5vcGVuPy4oKTtcclxuXHRcdFx0XHQvLyBPcGVuIHRoZSBwbHVnaW4ncyBzZXR0aW5ncyB0YWJcclxuXHRcdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIHNldHRpbmdUYWIgYXMgaXQncyBhIHByaXZhdGUgcHJvcGVydHlcclxuXHRcdFx0XHRjb25zdCBwbHVnaW5JbnN0YW5jZSA9IHBsdWdpbiBhcyB7IHNldHRpbmdUYWI/OiB7IGlkPzogc3RyaW5nIH0gfTtcclxuXHRcdFx0XHRpZiAocGx1Z2luSW5zdGFuY2Uuc2V0dGluZ1RhYj8uaWQgJiYgc2V0dGluZ0FwaS5vcGVuVGFiQnlJZCkge1xyXG5cdFx0XHRcdFx0c2V0dGluZ0FwaS5vcGVuVGFiQnlJZChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiLmlkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0fSk7XHJcblxyXG5cdC8vIFRvZ2dsZSBjb21tYW5kcyBmb3Igc2ltcGxlIHRvZ2dsZXNcclxuXHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdGFiLWJhcicsICdUb2dnbGUgdGFiIGJhcicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnRhYkJhciA9ICFzZXR0aW5ncy50YWJCYXI7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS10YWItYmFyLXNpbmdsZScsICdUb2dnbGUgaGlkZSB0YWIgYmFyIHdoZW4gb25seSBvbmUgdGFiJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MudGFiQmFySGlkZVdoZW5TaW5nbGUgPSAhc2V0dGluZ3MudGFiQmFySGlkZVdoZW5TaW5nbGU7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1uZXctbm90ZS1idXR0b24nLCAnVG9nZ2xlIG5ldyBub3RlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm5ld05vdGVCdXR0b24gPSAhc2V0dGluZ3MubmV3Tm90ZUJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW5ldy1mb2xkZXItYnV0dG9uJywgJ1RvZ2dsZSBuZXcgZm9sZGVyIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm5ld0ZvbGRlckJ1dHRvbiA9ICFzZXR0aW5ncy5uZXdGb2xkZXJCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zb3J0LW9yZGVyLWJ1dHRvbicsICdUb2dnbGUgc29ydCBvcmRlciBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5zb3J0T3JkZXJCdXR0b24gPSAhc2V0dGluZ3Muc29ydE9yZGVyQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtYXV0by1yZXZlYWwtYnV0dG9uJywgJ1RvZ2dsZSBhdXRvIHJldmVhbCBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5hdXRvUmV2ZWFsQnV0dG9uID0gIXNldHRpbmdzLmF1dG9SZXZlYWxCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1jb2xsYXBzZS1hbGwtYnV0dG9uJywgJ1RvZ2dsZSBjb2xsYXBzZSBhbGwgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MuY29sbGFwc2VBbGxCdXR0b24gPSAhc2V0dGluZ3MuY29sbGFwc2VBbGxCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1yZWFkaW5nLW1vZGUtYnV0dG9uJywgJ1RvZ2dsZSByZWFkaW5nIG1vZGUgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MucmVhZGluZ01vZGVCdXR0b24gPSAhc2V0dGluZ3MucmVhZGluZ01vZGVCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zZWFyY2gtc2V0dGluZ3MtYnV0dG9uJywgJ1RvZ2dsZSBzZWFyY2ggc2V0dGluZ3MgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Muc2VhcmNoU2V0dGluZ3NCdXR0b24gPSAhc2V0dGluZ3Muc2VhcmNoU2V0dGluZ3NCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gVGFiIGljb25zIC0gbm93IHN1cHBvcnQgU2hvdy9IaWRlL1JldmVhbFxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdGFiLWxpc3QtaWNvbicsICdUb2dnbGUgdGFiIGxpc3QgaWNvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnRhYkxpc3RJY29uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnRhYkxpc3RJY29uKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW5ldy10YWItaWNvbicsICdUb2dnbGUgbmV3IHRhYiBpY29uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubmV3VGFiSWNvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5uZXdUYWJJY29uKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXRhYi1jbG9zZS1idXR0b24nLCAnVG9nZ2xlIHRhYiBjbG9zZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy50YWJDbG9zZUJ1dHRvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy50YWJDbG9zZUJ1dHRvbik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zdGF0dXMtYmFyJywgJ1RvZ2dsZSBzdGF0dXMgYmFyJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Muc3RhdHVzQmFyID0gIXNldHRpbmdzLnN0YXR1c0JhcjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBTY3JvbGwgYmFycyAtIG5vdyBzdXBwb3J0IFNob3cvSGlkZS9SZXZlYWxcclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNjcm9sbC1iYXJzJywgJ1RvZ2dsZSBzY3JvbGwgYmFycycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnNjcm9sbEJhcnMgPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3Muc2Nyb2xsQmFycyk7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gU2lkZWJhciB0b2dnbGUgYnV0dG9ucyAtIG5vdyBzdXBwb3J0IFNob3cvSGlkZS9SZXZlYWxcclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWxlZnQtc2lkZWJhci10b2dnbGUtYnV0dG9uJywgJ1RvZ2dsZSBsZWZ0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmxlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLmxlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uKTtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXJpZ2h0LXNpZGViYXItdG9nZ2xlLWJ1dHRvbicsICdUb2dnbGUgcmlnaHQgc2lkZWJhciB0b2dnbGUgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MucmlnaHRTaWRlYmFyVG9nZ2xlQnV0dG9uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnJpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbik7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS10b29sdGlwcycsICdUb2dnbGUgdG9vbHRpcHMnLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy50b29sdGlwcyA9ICFzZXR0aW5ncy50b29sdGlwcztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNlYXJjaC1zdWdnZXN0aW9ucycsICdUb2dnbGUgc2VhcmNoIHN1Z2dlc3Rpb25zJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Muc2VhcmNoU3VnZ2VzdGlvbnMgPSAhc2V0dGluZ3Muc2VhcmNoU3VnZ2VzdGlvbnM7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zZWFyY2gtdGVybS1jb3VudHMnLCAnVG9nZ2xlIHNlYXJjaCB0ZXJtIGNvdW50cycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnNlYXJjaFRlcm1Db3VudHMgPSAhc2V0dGluZ3Muc2VhcmNoVGVybUNvdW50cztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXByb3BlcnRpZXMtcmVhZGluZy12aWV3JywgJ1RvZ2dsZSBwcm9wZXJ0aWVzIGluIFJlYWRpbmcgdmlldycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnByb3BlcnRpZXNJblJlYWRpbmdWaWV3ID0gIXNldHRpbmdzLnByb3BlcnRpZXNJblJlYWRpbmdWaWV3O1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtZGVlbXBoYXNpemUtcHJvcGVydGllcycsICdUb2dnbGUgZGVlbXBoYXNpemUgcHJvcGVydGllcycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLmRlZW1waGFzaXplUHJvcGVydGllcyA9ICFzZXR0aW5ncy5kZWVtcGhhc2l6ZVByb3BlcnRpZXM7XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1wcm9wZXJ0aWVzLWhlYWRpbmcnLCAnVG9nZ2xlIHByb3BlcnRpZXMgaGVhZGluZycsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnByb3BlcnRpZXNJbkhlYWRpbmcgPSAhc2V0dGluZ3MucHJvcGVydGllc0luSGVhZGluZztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWFkZC1wcm9wZXJ0eS1idXR0b24nLCAnVG9nZ2xlIGFkZCBwcm9wZXJ0eSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5hZGRQcm9wZXJ0eUJ1dHRvbiA9ICFzZXR0aW5ncy5hZGRQcm9wZXJ0eUJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWluc3RydWN0aW9ucycsICdUb2dnbGUgaW5zdHJ1Y3Rpb25zJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MuaW5zdHJ1Y3Rpb25zID0gIXNldHRpbmdzLmluc3RydWN0aW9ucztcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBNb2JpbGUgdG9nZ2xlIGNvbW1hbmRzXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1tb2JpbGUtY2hldnJvbnMtaWNvbicsICdUb2dnbGUgbW9iaWxlIGNoZXZyb25zIGljb24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5tb2JpbGVDaGV2cm9uc0ljb24gPSAhc2V0dGluZ3MubW9iaWxlQ2hldnJvbnNJY29uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmF2aWdhdGUtYmFjay1idXR0b24nLCAnVG9nZ2xlIG5hdmlnYXRlIGJhY2sgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubmF2aWdhdGVCYWNrQnV0dG9uID0gIXNldHRpbmdzLm5hdmlnYXRlQmFja0J1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW5hdmlnYXRlLWZvcndhcmQtYnV0dG9uJywgJ1RvZ2dsZSBuYXZpZ2F0ZSBmb3J3YXJkIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLm5hdmlnYXRlRm9yd2FyZEJ1dHRvbiA9ICFzZXR0aW5ncy5uYXZpZ2F0ZUZvcndhcmRCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxuXHJcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1xdWljay1zd2l0Y2hlci1idXR0b24nLCAnVG9nZ2xlIHF1aWNrIHN3aXRjaGVyIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuXHRcdHNldHRpbmdzLnF1aWNrU3dpdGNoZXJCdXR0b24gPSAhc2V0dGluZ3MucXVpY2tTd2l0Y2hlckJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW1vYmlsZS1uZXctdGFiLWJ1dHRvbicsICdUb2dnbGUgbW9iaWxlIG5ldyB0YWIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3MubW9iaWxlTmV3VGFiQnV0dG9uID0gIXNldHRpbmdzLm1vYmlsZU5ld1RhYkJ1dHRvbjtcclxuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmVmcmVzaCgpO1xyXG5cdH0pO1xyXG5cclxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW9wZW4tdGFiLWJ1dHRvbicsICdUb2dnbGUgb3BlbiB0YWIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0c2V0dGluZ3Mub3BlblRhYkJ1dHRvbiA9ICFzZXR0aW5ncy5vcGVuVGFiQnV0dG9uO1xyXG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRyZWZyZXNoKCk7XHJcblx0fSk7XHJcblxyXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmliYm9uLW1lbnUtYnV0dG9uJywgJ1RvZ2dsZSByaWJib24gbWVudSBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcblx0XHRzZXR0aW5ncy5yaWJib25NZW51QnV0dG9uID0gIXNldHRpbmdzLnJpYmJvbk1lbnVCdXR0b247XHJcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJlZnJlc2goKTtcclxuXHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbjogUGx1Z2luLCBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikge1xyXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdGlkOiBpZCxcclxuXHRcdG5hbWU6IG5hbWUsXHJcblx0XHRjYWxsYmFjazogY2FsbGJhY2ssXHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShjdXJyZW50U3RhdGU6IFVJVmlzaWJpbGl0eVN0YXRlKTogVUlWaXNpYmlsaXR5U3RhdGUge1xyXG5cdC8vIElmIGN1cnJlbnQgc3RhdGUgaXMgXCJyZXZlYWxcIiwgcmVzZXQgdG8gXCJzaG93XCIgZmlyc3RcclxuXHRpZiAoY3VycmVudFN0YXRlID09PSAncmV2ZWFsJykge1xyXG5cdFx0cmV0dXJuICdoaWRlJztcclxuXHR9XHJcblx0Ly8gVG9nZ2xlIGJldHdlZW4gXCJzaG93XCIgYW5kIFwiaGlkZVwiXHJcblx0cmV0dXJuIGN1cnJlbnRTdGF0ZSA9PT0gJ3Nob3cnID8gJ2hpZGUnIDogJ3Nob3cnO1xyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IFVJVHdlYWtlclBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuL2NvbW1vbi9UYWJSZW5kZXJlcic7XHJcbmltcG9ydCB7IEhpZGVyVGFiIH0gZnJvbSAnLi90YWJzL0hpZGVyVGFiJztcclxuaW1wb3J0IHsgVGFiQmFyVGFiIH0gZnJvbSAnLi90YWJzL1RhYkJhclRhYic7XHJcbmltcG9ydCB7IFN0YXR1c0JhclRhYiB9IGZyb20gJy4vdGFicy9TdGF0dXNCYXJUYWInO1xyXG5pbXBvcnQgeyBFeHBsb3JlclRhYiB9IGZyb20gJy4vdGFicy9FeHBsb3JlclRhYic7XHJcbmltcG9ydCB7IE1vYmlsZVRhYiB9IGZyb20gJy4vdGFicy9Nb2JpbGVUYWInO1xyXG5pbXBvcnQgeyBQcm9wZXJ0aWVzVGFiIH0gZnJvbSAnLi90YWJzL1Byb3BlcnRpZXNUYWInO1xyXG5cclxudHlwZSBUYWJJZCA9ICdoaWRlcicgfCAnc3RhdHVzLWJhcicgfCAndGFiLWJhcicgfCAnZXhwbG9yZXInIHwgJ3Byb3BlcnRpZXMnIHwgJ21vYmlsZSc7XHJcblxyXG5pbnRlcmZhY2UgVGFiRGVmaW5pdGlvbiB7XHJcblx0aWQ6IFRhYklkO1xyXG5cdG5hbWU6IHN0cmluZztcclxuXHRyZW5kZXJlcjogVGFiUmVuZGVyZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBVSVR3ZWFrZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW47XHJcblx0cHVibGljIGljb24gPSAnbHVjaWRlLXdyZW5jaCc7XHJcblx0cHVibGljIGlkID0gJ3VpLXR3ZWFrZXInO1xyXG5cclxuXHRwcml2YXRlIHRhYkNvbnRlbnRNYXA6IE1hcDxUYWJJZCwgSFRNTEVsZW1lbnQ+ID0gbmV3IE1hcCgpO1xyXG5cdHByaXZhdGUgdGFiQnV0dG9uczogTWFwPFRhYklkLCBCdXR0b25Db21wb25lbnQ+ID0gbmV3IE1hcCgpO1xyXG5cdHByaXZhdGUgYWN0aXZlVGFiSWQ6IFRhYklkIHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcygndWktdHdlYWtlci1zZXR0aW5ncy10YWItcm9vdCcpO1xyXG5cclxuXHRcdHRoaXMudGFiQ29udGVudE1hcC5jbGVhcigpO1xyXG5cdFx0dGhpcy50YWJCdXR0b25zLmNsZWFyKCk7XHJcblxyXG5cdFx0Y29uc3QgdGFiczogVGFiRGVmaW5pdGlvbltdID0gW1xyXG5cdFx0XHR7IGlkOiAnaGlkZXInLCBuYW1lOiAnSGlkZXInLCByZW5kZXJlcjogbmV3IEhpZGVyVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikgfSxcclxuXHRcdFx0eyBpZDogJ3N0YXR1cy1iYXInLCBuYW1lOiAnU3RhdHVzIGJhcicsIHJlbmRlcmVyOiBuZXcgU3RhdHVzQmFyVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikgfSxcclxuXHRcdFx0eyBpZDogJ3RhYi1iYXInLCBuYW1lOiAnVGFiIGJhcicsIHJlbmRlcmVyOiBuZXcgVGFiQmFyVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikgfSxcclxuXHRcdFx0eyBpZDogJ2V4cGxvcmVyJywgbmFtZTogJ0V4cGxvcmVyJywgcmVuZGVyZXI6IG5ldyBFeHBsb3JlclRhYih0aGlzLmFwcCwgdGhpcy5wbHVnaW4pIH0sXHJcblx0XHRcdHsgaWQ6ICdwcm9wZXJ0aWVzJywgbmFtZTogJ1Byb3BlcnRpZXMnLCByZW5kZXJlcjogbmV3IFByb3BlcnRpZXNUYWIodGhpcy5hcHAsIHRoaXMucGx1Z2luKSB9LFxyXG5cdFx0XHR7IGlkOiAnbW9iaWxlJywgbmFtZTogJ01vYmlsZScsIHJlbmRlcmVyOiBuZXcgTW9iaWxlVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikgfVxyXG5cdFx0XTtcclxuXHJcblx0XHRjb25zdCB0YWJzV3JhcHBlciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigndWktdHdlYWtlci1zZXR0aW5ncy10YWJzJyk7XHJcblx0XHRjb25zdCBuYXZFbCA9IHRhYnNXcmFwcGVyLmNyZWF0ZURpdigndWktdHdlYWtlci1zZXR0aW5ncy10YWJzLW5hdicpO1xyXG5cdFx0bmF2RWwuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3RhYmxpc3QnKTtcclxuXHRcdGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGFic1dyYXBwZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXNldHRpbmdzLXRhYnMtY29udGVudCcpO1xyXG5cclxuXHRcdHRhYnMuZm9yRWFjaCh0YWIgPT4ge1xyXG5cdFx0XHRjb25zdCBidXR0b25Db21wb25lbnQgPSBuZXcgQnV0dG9uQ29tcG9uZW50KG5hdkVsKTtcclxuXHRcdFx0YnV0dG9uQ29tcG9uZW50LnNldEJ1dHRvblRleHQodGFiLm5hbWUpO1xyXG5cdFx0XHRidXR0b25Db21wb25lbnQucmVtb3ZlQ3RhKCk7XHJcblx0XHRcdGJ1dHRvbkNvbXBvbmVudC5idXR0b25FbC5hZGRDbGFzcygndWktdHdlYWtlci1zZXR0aW5ncy10YWItYnV0dG9uJyk7XHJcblx0XHRcdGJ1dHRvbkNvbXBvbmVudC5idXR0b25FbC5hZGRDbGFzcygnY2xpY2thYmxlLWljb24nKTtcclxuXHRcdFx0YnV0dG9uQ29tcG9uZW50LmJ1dHRvbkVsLnNldEF0dHJpYnV0ZSgncm9sZScsICd0YWInKTtcclxuXHRcdFx0YnV0dG9uQ29tcG9uZW50LmJ1dHRvbkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xyXG5cdFx0XHRidXR0b25Db21wb25lbnQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0dm9pZCB0aGlzLmFjdGl2YXRlVGFiKHRhYi5pZCwgdGFicywgY29udGVudFdyYXBwZXIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy50YWJCdXR0b25zLnNldCh0YWIuaWQsIGJ1dHRvbkNvbXBvbmVudCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBY3RpdmF0ZSBpbml0aWFsIHRhYlxyXG5cdFx0Y29uc3QgaW5pdGlhbFRhYklkID0gdGhpcy5hY3RpdmVUYWJJZCAmJiB0YWJzLnNvbWUodCA9PiB0LmlkID09PSB0aGlzLmFjdGl2ZVRhYklkKVxyXG5cdFx0XHQ/IHRoaXMuYWN0aXZlVGFiSWRcclxuXHRcdFx0OiB0YWJzWzBdLmlkO1xyXG5cclxuXHRcdHZvaWQgdGhpcy5hY3RpdmF0ZVRhYihpbml0aWFsVGFiSWQsIHRhYnMsIGNvbnRlbnRXcmFwcGVyKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgYWN0aXZhdGVUYWIoXHJcblx0XHRpZDogVGFiSWQsXHJcblx0XHR0YWJzOiBUYWJEZWZpbml0aW9uW10sXHJcblx0XHRjb250ZW50V3JhcHBlcjogSFRNTEVsZW1lbnRcclxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGRlZmluaXRpb24gPSB0YWJzLmZpbmQodGFiID0+IHRhYi5pZCA9PT0gaWQpO1xyXG5cdFx0aWYgKCFkZWZpbml0aW9uKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gTGF6eSBsb2FkIHRhYiBjb250ZW50XHJcblx0XHRpZiAoIXRoaXMudGFiQ29udGVudE1hcC5oYXMoaWQpKSB7XHJcblx0XHRcdGNvbnN0IHRhYkNvbnRhaW5lciA9IGNvbnRlbnRXcmFwcGVyLmNyZWF0ZURpdigndWktdHdlYWtlci1zZXR0aW5ncy10YWInKTtcclxuXHRcdFx0YXdhaXQgZGVmaW5pdGlvbi5yZW5kZXJlci5yZW5kZXIodGFiQ29udGFpbmVyKTtcclxuXHRcdFx0dGhpcy50YWJDb250ZW50TWFwLnNldChpZCwgdGFiQ29udGFpbmVyKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZWFjdGl2YXRlIHByZXZpb3VzIHRhYlxyXG5cdFx0aWYgKHRoaXMuYWN0aXZlVGFiSWQgJiYgdGhpcy5hY3RpdmVUYWJJZCAhPT0gaWQpIHtcclxuXHRcdFx0Y29uc3QgcHJldkNvbnRlbnQgPSB0aGlzLnRhYkNvbnRlbnRNYXAuZ2V0KHRoaXMuYWN0aXZlVGFiSWQpO1xyXG5cdFx0XHRpZiAocHJldkNvbnRlbnQpIHByZXZDb250ZW50LnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHJcblx0XHRcdGNvbnN0IHByZXZCdXR0b24gPSB0aGlzLnRhYkJ1dHRvbnMuZ2V0KHRoaXMuYWN0aXZlVGFiSWQpO1xyXG5cdFx0XHRpZiAocHJldkJ1dHRvbikge1xyXG5cdFx0XHRcdHByZXZCdXR0b24uYnV0dG9uRWwucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHRcdHByZXZCdXR0b24uYnV0dG9uRWwuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XHJcblx0XHRcdFx0cHJldkJ1dHRvbi5yZW1vdmVDdGEoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFjdGl2YXRlIG5ldyB0YWJcclxuXHRcdGNvbnN0IG5ld0NvbnRlbnQgPSB0aGlzLnRhYkNvbnRlbnRNYXAuZ2V0KGlkKTtcclxuXHRcdGlmIChuZXdDb250ZW50KSBuZXdDb250ZW50LmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHJcblx0XHRjb25zdCBuZXdCdXR0b24gPSB0aGlzLnRhYkJ1dHRvbnMuZ2V0KGlkKTtcclxuXHRcdGlmIChuZXdCdXR0b24pIHtcclxuXHRcdFx0bmV3QnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHRcdFx0bmV3QnV0dG9uLmJ1dHRvbkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XHJcblx0XHRcdG5ld0J1dHRvbi5zZXRDdGEoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmFjdGl2ZVRhYklkID0gaWQ7XHJcblx0XHRjb250ZW50V3JhcHBlci5zY3JvbGxUb3AgPSAwO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBzZXR0aW5ncyB0YWJzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRhYlJlbmRlcmVyIHtcclxuXHRwcm90ZWN0ZWQgYXBwOiBBcHA7XHJcblx0cHJvdGVjdGVkIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW4pIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRhYnN0cmFjdCByZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xyXG5cclxuXHRwcm90ZWN0ZWQgZ2V0U2V0dGluZ3MoKTogVUlTZXR0aW5ncyB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgYXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoKCk7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgY3JlYXRlRHJvcGRvd25TZXR0aW5nKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdG5hbWU6IHN0cmluZyxcclxuXHRcdGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcblx0XHR2YWx1ZTogc3RyaW5nLFxyXG5cdFx0b3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcclxuXHRcdG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZFxyXG5cdCk6IFNldHRpbmcge1xyXG5cdFx0cmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzY3JpcHRpb24pXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcblx0XHRcdFx0T2JqZWN0LmVudHJpZXMob3B0aW9ucykuZm9yRWFjaCgoW2tleSwgbGFiZWxdKSA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oa2V5LCBsYWJlbCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0XHRcdGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0b25DaGFuZ2UodmFsdWUpO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZXR1cm4gZHJvcGRvd247XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGNyZWF0ZVRvZ2dsZVNldHRpbmcoXHJcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0bmFtZTogc3RyaW5nLFxyXG5cdFx0ZGVzY3JpcHRpb246IHN0cmluZyxcclxuXHRcdHZhbHVlOiBib29sZWFuLFxyXG5cdFx0b25DaGFuZ2U6ICh2YWx1ZTogYm9vbGVhbikgPT4gdm9pZFxyXG5cdCk6IFNldHRpbmcge1xyXG5cdFx0cmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuXHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0LnNldERlc2MoZGVzY3JpcHRpb24pXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodmFsdWUpO1xyXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdG9uQ2hhbmdlKHZhbHVlKTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuIHRvZ2dsZTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcm90ZWN0ZWQgY3JlYXRlU2xpZGVyU2V0dGluZyhcclxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRuYW1lOiBzdHJpbmcsXHJcblx0XHRkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG5cdFx0dmFsdWU6IG51bWJlcixcclxuXHRcdG1pbjogbnVtYmVyLFxyXG5cdFx0bWF4OiBudW1iZXIsXHJcblx0XHRzdGVwOiBudW1iZXIsXHJcblx0XHRvbkNoYW5nZTogKHZhbHVlOiBudW1iZXIpID0+IHZvaWRcclxuXHQpOiBTZXR0aW5nIHtcclxuXHRcdHJldHVybiBuZXcgU2V0dGluZyhjb250YWluZXIpXHJcblx0XHRcdC5zZXROYW1lKG5hbWUpXHJcblx0XHRcdC5zZXREZXNjKGRlc2NyaXB0aW9uKVxyXG5cdFx0XHQuYWRkU2xpZGVyKHNsaWRlciA9PiB7XHJcblx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHQuc2V0TGltaXRzKG1pbiwgbWF4LCBzdGVwKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHZhbHVlKVxyXG5cdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0b25DaGFuZ2UodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuIHNsaWRlcjtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Ly8gZm9yIG9sZGVyIFR5cGVTY3JpcHQgdmVyc2lvbnMsIGJ1dCBleGlzdHMgYXQgcnVudGltZSBpbiBPYnNpZGlhbiAxLjExLjArXHJcblx0XHQvLyBVc2luZyB1bmtub3duIGluc3RlYWQgb2YgYW55IHRvIHNhdGlzZnkgZXNsaW50IHdoaWxlIG1haW50YWluaW5nIHR5cGUgc2FmZXR5XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHRcdFxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZyBcclxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxyXG5cdFx0XHRcdDogbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0Ly8gQWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdGlmIChtYW5pZmVzdElkKSB7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhgJHttYW5pZmVzdElkfS1zZXR0aW5ncy1jb21wYXRgKTtcclxuXHR9XHJcblx0XHJcblx0e1xyXG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xyXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxyXG5cdFx0Ly8gaXMgZm9yIHZlcnNpb25zIHRoYXQgbWF5IG5vdCBzdXBwb3J0IGl0LCBzbyBtYW51YWwgaGVhZGluZyBpcyBhcHByb3ByaWF0ZSBoZXJlXHJcblx0XHRpZiAoaGVhZGluZykge1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIENvbW1hbmQgUGlja2VyIE1vZGFsXHJcbiAqIFNlYXJjaGFibGUgbW9kYWwgZm9yIHNlbGVjdGluZyBhbiBPYnNpZGlhbiBjb21tYW5kXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBDb21tYW5kT3B0aW9uIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1hbmRQaWNrZXJNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPENvbW1hbmRPcHRpb24+IHtcclxuXHRwcml2YXRlIG9uU2VsZWN0OiAoY29tbWFuZElkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdDogKGNvbW1hbmRJZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogQ29tbWFuZE9wdGlvbltdIHtcclxuXHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBsaXN0Q29tbWFuZHM/OiAoKSA9PiBDb21tYW5kT3B0aW9uW10gfSB9KS5jb21tYW5kcztcclxuXHRcdGNvbnN0IGNvbW1hbmRNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29tbWFuZE9wdGlvbj4oKTtcclxuXHJcblx0XHRpZiAoY29tbWFuZFJlZ2lzdHJ5ICYmIHR5cGVvZiBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGNvbW1hbmRzKSB7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZCAmJiBjb21tYW5kLmlkICYmIGNvbW1hbmQubmFtZSAmJiAhY29tbWFuZE1hcC5oYXMoY29tbWFuZC5pZCkpIHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZSxcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBFcnJvciBnZXR0aW5nIGNvbW1hbmRzIC0gZmFsbCBiYWNrIHRvIGVtcHR5IGxpc3RcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBBcnJheS5mcm9tKGNvbW1hbmRNYXAudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbVRleHQoaXRlbTogQ29tbWFuZE9wdGlvbik6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gaXRlbS5uYW1lO1xyXG5cdH1cclxuXHJcblx0b25DaG9vc2VJdGVtKGl0ZW06IENvbW1hbmRPcHRpb24sIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMub25TZWxlY3QoaXRlbS5pZCk7XHJcblx0XHQvLyBEb24ndCBjbG9zZSBoZXJlIC0gbGV0IHRoZSBjYWxsYmFjayBoYW5kbGUgaXRcclxuXHR9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogSWNvbiBQaWNrZXIgTW9kYWxcclxuICogU2VhcmNoYWJsZSBtb2RhbCBmb3Igc2VsZWN0aW5nIGEgTHVjaWRlIGljb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBzZXRJY29uLCBnZXRJY29uSWRzLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBJY29uT3B0aW9uIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuLy8gR2V0IGljb24gbGlzdCBmcm9tIE9ic2lkaWFuIEFQSSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgZmFsbGJhY2sgbGlzdFxyXG5jb25zdCBnZXRJY29uTGlzdCA9ICgpOiBzdHJpbmdbXSA9PiB7XHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uICYmIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjcuMycpICYmIGdldEljb25JZHMpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHJldHVybiBnZXRJY29uSWRzKCk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Ly8gRXJyb3IgZ2V0dGluZyBpY29uIElEcyAtIGZhbGwgYmFjayB0byBiYXNpYyBsaXN0XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIEZhbGxiYWNrIHRvIGEgYmFzaWMgbGlzdCBpZiBBUEkgaXMgbm90IGF2YWlsYWJsZVxyXG5cdHJldHVybiBbXHJcblx0XHQnc2V0dGluZ3MtMicsICdzZXR0aW5ncycsICdoZWxwLWNpcmNsZScsICdpbmZvJywgJ3N0YXInLCAnaGVhcnQnLCAnYm9va21hcmsnLFxyXG5cdFx0J2hvbWUnLCAnc2VhcmNoJywgJ2JlbGwnLCAnbWFpbCcsICd1c2VyJywgJ3VzZXJzJywgJ2ZvbGRlcicsICdmaWxlJywgJ2ZpbGUtdGV4dCcsXHJcblx0XHQnaW1hZ2UnLCAndmlkZW8nLCAnbXVzaWMnLCAnY2FsZW5kYXInLCAnY2xvY2snLCAnZWRpdCcsICdwZW5jaWwnLCAndHJhc2gnLFxyXG5cdFx0J2NvcHknLCAnY3V0JywgJ3Bhc3RlJywgJ2Rvd25sb2FkJywgJ3VwbG9hZCcsICdzYXZlJywgJ3NoYXJlJywgJ2xpbmsnLFxyXG5cdFx0J2V4dGVybmFsLWxpbmsnLCAnbG9jaycsICd1bmxvY2snLCAnZXllJywgJ2V5ZS1vZmYnLCAna2V5JywgJ3NoaWVsZCcsXHJcblx0XHQnY2hlY2snLCAneCcsICdwbHVzJywgJ21pbnVzJywgJ2Fycm93LWxlZnQnLCAnYXJyb3ctcmlnaHQnLCAnYXJyb3ctdXAnLFxyXG5cdFx0J2Fycm93LWRvd24nLCAnY2hldnJvbi1sZWZ0JywgJ2NoZXZyb24tcmlnaHQnLCAnY2hldnJvbi11cCcsICdjaGV2cm9uLWRvd24nLFxyXG5cdFx0J21lbnUnLCAnbW9yZS1ob3Jpem9udGFsJywgJ21vcmUtdmVydGljYWwnLCAnZ3JpZCcsICdsaXN0JywgJ2xheW91dCcsXHJcblx0XHQnY29sdW1ucycsICdyb3dzJywgJ21heGltaXplJywgJ21pbmltaXplJywgJ3pvb20taW4nLCAnem9vbS1vdXQnLFxyXG5cdFx0J3JlZnJlc2gtY3cnLCAncGxheScsICdwYXVzZScsICdzdG9wJywgJ3N1bicsICdtb29uJywgJ2Nsb3VkJywgJ3phcCcsXHJcblx0XHQnd2FuZC0yJywgJ3dhbmQnLCAnd2FuZC1zcGFya2xlcycsICdwYWxldHRlJywgJ2JydXNoJywgJ3NsaWRlcnMnLFxyXG5cdFx0J3Bvd2VyJywgJ3dpZmknLCAnYmx1ZXRvb3RoJywgJ21vbml0b3InLCAnbGFwdG9wJywgJ3NtYXJ0cGhvbmUnLFxyXG5cdFx0J2NhbWVyYScsICdtaWMnLCAnaGVhZHBob25lcycsICdjb2RlJywgJ3Rlcm1pbmFsJywgJ3Rlcm1pbmFsLXNxdWFyZScsXHJcblx0XHQnZ2l0aHViJywgJ2dpdGxhYicsICdnaXQtYnJhbmNoJywgJ2dpdC1jb21taXQnLCAnZGF0YWJhc2UnLCAnc2VydmVyJyxcclxuXHRcdCdjbG91ZC1kb3dubG9hZCcsICdjbG91ZC11cGxvYWQnLCAndGFnJywgJ3RhZ3MnLCAnZmxhZycsICdwaW4nLFxyXG5cdFx0J21hcC1waW4nLCAnY29tcGFzcycsICdnbG9iZScsICdyb2NrZXQnLCAnY2FyJywgJ2Jpa2UnLCAncm9ib3QnLFxyXG5cdFx0J2FwcGxlJywgJ3dpbmRvd3MnLCAnbGludXgnLCAnY2hyb21lJywgJ2ZpcmVmb3gnLCAnc2FmYXJpJyxcclxuXHRcdCdjcmVkaXQtY2FyZCcsICd3YWxsZXQnLCAnY29pbnMnLCAnYm9vaycsICdib29rLW9wZW4nLCAnYXdhcmQnLFxyXG5cdFx0J3Ryb3BoeScsICdiYWRnZScsICd3cmVuY2gnLCAndG9vbCcsICdwYWNrYWdlJywgJ2JveCcsICdhcmNoaXZlJyxcclxuXHRcdCdzZW5kJywgJ3JlcGx5JywgJ2ZvcndhcmQnLCAnbWFpbC1vcGVuJywgJ3RhZy1wbHVzJywgJ3RhZy1taW51cycsXHJcblx0XHQnZmxhZy1vZmYnLCAncGluLW9mZicsICdtYXAtcGluLW9mZicsICduYXZpZ2F0aW9uJywgJ21hcCcsICdlYXJ0aCcsXHJcblx0XHQncGxhbmUnLCAnc2hpcCcsICdhbmNob3InLCAnaGVsaWNvcHRlcicsICdkcm9uZScsICdhbmRyb2lkJyxcclxuXHRcdCdrZXlob2xlJywgJ2tleXMnLCAnZmluZ2VycHJpbnQnLCAnc2NhbicsICdxci1jb2RlJywgJ2JhcmNvZGUnLFxyXG5cdFx0J3JlY2VpcHQnLCAncGlnZ3ktYmFuaycsICdiYW5rbm90ZSdcclxuXHRdO1xyXG59O1xyXG5cclxuLy8gQ29udmVydCBpY29uIElEcyB0byBJY29uT3B0aW9uIGZvcm1hdFxyXG5jb25zdCBMVUNJREVfSUNPTlM6IEljb25PcHRpb25bXSA9IGdldEljb25MaXN0KCkubWFwKGlkID0+ICh7XHJcblx0aWQ6IGlkLFxyXG5cdG5hbWU6IGlkXHJcblx0XHQucmVwbGFjZSgvXmx1Y2lkZS0vLCAnJykgLy8gUmVtb3ZlIGx1Y2lkZS0gcHJlZml4IGZvciBkaXNwbGF5XHJcblx0XHQucmVwbGFjZSgvLS9nLCAnICcpXHJcblx0XHQucmVwbGFjZSgvKF5cXHd7MX0pfChcXHMrXFx3ezF9KS9nLCAobGV0dGVyKSA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKSlcclxufSkpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEljb25QaWNrZXJNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPEljb25PcHRpb24+IHtcclxuXHRwcml2YXRlIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdDogKGljb25JZDogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xyXG5cdH1cclxuXHJcblx0Z2V0SXRlbXMoKTogSWNvbk9wdGlvbltdIHtcclxuXHRcdHJldHVybiBMVUNJREVfSUNPTlM7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtVGV4dChpdGVtOiBJY29uT3B0aW9uKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBpdGVtLm5hbWU7XHJcblx0fVxyXG5cclxuXHRvbkNob29zZUl0ZW0oaXRlbTogSWNvbk9wdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblNlbGVjdChpdGVtLmlkKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcblxyXG5cdC8vIE92ZXJyaWRlIHRvIHNob3cgaWNvbiBwcmV2aWV3XHJcblx0cmVuZGVyU3VnZ2VzdGlvbihtYXRjaDogeyBpdGVtOiBJY29uT3B0aW9uIH0sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaXRlbSA9IG1hdGNoLml0ZW07XHJcblx0XHRlbC5hZGRDbGFzcygnbW9kLWNvbXBsZXgnKTtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWNvbnRlbnQnIH0pO1xyXG5cdFx0Y29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJywgdGV4dDogaXRlbS5uYW1lIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBDcmVhdGUgaWNvbiBwcmV2aWV3IHVzaW5nIE9ic2lkaWFuJ3Mgc2V0SWNvbiAtIG5vIGJhY2tncm91bmQgYm94XHJcblx0XHRjb25zdCBhdXggPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWF1eCcgfSk7XHJcblx0XHRjb25zdCBpY29uU3BhbiA9IGF1eC5jcmVhdGVTcGFuKHsgY2xzOiAnc3VnZ2VzdGlvbi1mbGFpciB1aS10d2Vha2VyLWljb24tbm8tYmcnIH0pO1xyXG5cdFx0c2V0SWNvbihpY29uU3BhbiwgaXRlbS5pZCk7XHJcblx0fVxyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIEhpZGVyIFRhYiAtIEF1dG8taGlkZSBhbmQgdmlzaWJpbGl0eSBzZXR0aW5ncyAoZXhjbHVkaW5nIG1vYmlsZSBhbmQgZXhwbG9yZXIgYnV0dG9ucylcclxuICovXHJcblxyXG5pbXBvcnQgeyBUYWJSZW5kZXJlciB9IGZyb20gJy4uL2NvbW1vbi9UYWJSZW5kZXJlcic7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAsIFNldHRpbmdzQ29udGFpbmVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuaW1wb3J0IHsgQ29tbWFuZFBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0NvbW1hbmRQaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uLy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIaWRlclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHQvLyBBdXRvLWhpZGUgZWxlbWVudHNcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdGNvbnN0IGdlbmVyYWxHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxyXG5cdFx0XHQnVGl0bGUgYmFyJyxcclxuXHRcdFx0J0hpZGUgdGl0bGUgYmFyIHVudGlsIGhvdmVyLiBUdXJuIG9mZiB0byBhbHdheXMgc2hvdy4nLFxyXG5cdFx0XHQndGl0bGVCYXInXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdGdlbmVyYWxHcm91cCxcclxuXHRcdFx0J0ZpbGUgZXhwbG9yZXIgbmF2IGhlYWRlcicsXHJcblx0XHRcdCdIaWRlIGZpbGUgZXhwbG9yZXIgbmF2aWdhdGlvbiBoZWFkZXIgdW50aWwgaG92ZXIuIEVsZWdhbnRseSByZXZlYWxzIG9uIGhvdmVyLicsXHJcblx0XHRcdCdmaWxlRXhwbG9yZXJOYXZIZWFkZXInXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdGdlbmVyYWxHcm91cCxcclxuXHRcdFx0J090aGVyIG5hdiBoZWFkZXJzJyxcclxuXHRcdFx0J0hpZGUgbmF2aWdhdGlvbiBoZWFkZXJzIGZvciB0YWcsIGJhY2tsaW5rcywgb3V0Z29pbmcgbGlua3MsIG91dGxpbmUsIGFuZCBib29rbWFya3MgcGFuZXMgdW50aWwgaG92ZXIuJyxcclxuXHRcdFx0J290aGVyTmF2SGVhZGVycydcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxyXG5cdFx0XHQnTGVmdCB0YWIgaGVhZGVycycsXHJcblx0XHRcdCdIaWRlIGxlZnQgcGFuZWwgdGFiIGhlYWRlcnMgdW50aWwgaG92ZXIuIEVsZWdhbnRseSByZXZlYWxzIG9uIGhvdmVyLicsXHJcblx0XHRcdCdsZWZ0VGFiSGVhZGVycydcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxyXG5cdFx0XHQnUmlnaHQgdGFiIGhlYWRlcnMnLFxyXG5cdFx0XHQnSGlkZSByaWdodCBwYW5lbCB0YWIgaGVhZGVycyB1bnRpbCBob3Zlci4gRWxlZ2FudGx5IHJldmVhbHMgb24gaG92ZXIuJyxcclxuXHRcdFx0J3JpZ2h0VGFiSGVhZGVycydcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmliYm9uIC0gYm9vbGVhbiB0b2dnbGVcclxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ29sbGFwc2UgcmliYm9uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQ29sbGFwc2UgdGhlIGxlZnQgcmliYm9uIHRvIGEgdGhpbiBzdHJpcCB1bnRpbCBob3Zlci4gRWxlZ2FudGx5IGV4cGFuZHMgb24gaG92ZXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5nZXRTZXR0aW5ncygpLnJpYmJvblJldmVhbE9uSG92ZXIpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmdldFNldHRpbmdzKCkucmliYm9uUmV2ZWFsT25Ib3ZlciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHQvLyBOYXZpZ2F0aW9uXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBuYXZpZ2F0aW9uR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ05hdmlnYXRpb24nLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhuYXZpZ2F0aW9uR3JvdXAsICdIaWRlIHRhYiBiYXInLCAnSGlkZXMgdGhlIHRhYiBjb250YWluZXIgYXQgdGhlIHRvcCBvZiB0aGUgd2luZG93LicsICd0YWJCYXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobmF2aWdhdGlvbkdyb3VwLCAnTWFrZSB0b3Agb2Ygd2luZG93IGRyYWdnYWJsZSB3aXRob3V0IHRhYiBiYXInLCAnRW5hYmxlcyB3aW5kb3cgZHJhZ2dpbmcgZnJvbSB0aGUgdG9wIG9mIHRoZSB3aW5kb3cgd2hlbiB0aGUgdGFiIGJhciBpcyBoaWRkZW4uIE9ubHkgd29ya3Mgd2hlbiBcIkhpZGUgdGFiIGJhclwiIGlzIGVuYWJsZWQuJywgJ2VuYWJsZVdpbmRvd0RyYWdnaW5nJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgdGFiIGhlYWRlciB3aGVuIG9ubHkgb25lIHRhYicsICdIaWRlIHRoZSB0YWIgYmFyIGF1dG9tYXRpY2FsbHkgd2hlbiBvbmx5IDEgdGFiIGlzIG9wZW4uJywgJ3RhYkJhckhpZGVXaGVuU2luZ2xlJyk7XHJcblxyXG5cdFx0Ly8gVmlldyBoZWFkZXIgYnV0dG9uc1xyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgXCJSZWFkaW5nIG1vZGVcIiBidXR0b24nLCAnSGlkZSBcIlJlYWRpbmcgbW9kZVwiIGJ1dHRvbiBpbiB2aWV3IGhlYWRlcnMuJywgJ3JlYWRpbmdNb2RlQnV0dG9uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgXCJCb29rbWFya2VkXCIgYnV0dG9uJywgJ0hpZGUgXCJCb29rbWFya2VkXCIgYnV0dG9uIGluIHZpZXcgaGVhZGVycy4nLCAnYm9va21hcmtlZEJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhuYXZpZ2F0aW9uR3JvdXAsICdIaWRlIFwiU2VhcmNoIHNldHRpbmdzXCIgYnV0dG9uJywgJ0hpZGUgXCJTZWFyY2ggc2V0dGluZ3NcIiBidXR0b24gaW4gc2VhcmNoIHBhbmUuJywgJ3NlYXJjaFNldHRpbmdzQnV0dG9uJyk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gVmF1bHQgcHJvZmlsZSBhcmVhXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCB2YXVsdFByb2ZpbGVHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnVmF1bHQgcHJvZmlsZSBhcmVhJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHR2YXVsdFByb2ZpbGVHcm91cCxcclxuXHRcdFx0J1ZhdWx0IHN3aXRjaGVyJyxcclxuXHRcdFx0J0hpZGUgdmF1bHQgc3dpdGNoZXIgdW50aWwgaG92ZXIuIERvZXMgbm90IHdvcmsgd2hlbiB2YXVsdCBuYW1lIGlzIGhpZGRlbi4nLFxyXG5cdFx0XHQndmF1bHRTd2l0Y2hlcidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0dmF1bHRQcm9maWxlR3JvdXAsXHJcblx0XHRcdCdIZWxwIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlIGhlbHAgYnV0dG9uIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQnaGVscEJ1dHRvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVwbGFjZSBoZWxwIGJ1dHRvbiB3aXRoIGN1c3RvbSBhY3Rpb25cclxuXHRcdHRoaXMucmVuZGVySGVscEJ1dHRvblJlcGxhY2VtZW50KGNvbnRhaW5lciwgdmF1bHRQcm9maWxlR3JvdXApO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdHZhdWx0UHJvZmlsZUdyb3VwLFxyXG5cdFx0XHQnU2V0dGluZ3MgYnV0dG9uJyxcclxuXHRcdFx0J0hpZGUgc2V0dGluZ3MgYnV0dG9uIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxyXG5cdFx0XHQnc2V0dGluZ3NCdXR0b24nXHJcblx0XHQpO1xyXG5cclxuXHRcdHZhdWx0UHJvZmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdWYXVsdCBzd2l0Y2hlciBiYWNrZ3JvdW5kIHRyYW5zcGFyZW5jeScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FkanVzdCB0aGUgdHJhbnNwYXJlbmN5IG9mIHRoZSB2YXVsdCBzd2l0Y2hlciBiYWNrZ3JvdW5kIHdoZW4gaGlkZGVuLiBSYW5nZTogMCAoZnVsbHkgdHJhbnNwYXJlbnQpIHRvIDEgKGZ1bGx5IG9wYXF1ZSkuJylcclxuXHRcdFx0XHQuYWRkU2xpZGVyKChzbGlkZXIpID0+XHJcblx0XHRcdFx0XHRzbGlkZXJcclxuXHRcdFx0XHRcdFx0LnNldExpbWl0cygwLCAxLCAwLjAxKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5nZXRTZXR0aW5ncygpLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5KVxyXG5cdFx0XHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5nZXRTZXR0aW5ncygpLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHQvLyBUYWIgaWNvbnNcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdGNvbnN0IHRhYkljb25zR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1RhYiBpY29ucycsICd1aS10d2Vha2VyJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0dGFiSWNvbnNHcm91cCxcclxuXHRcdFx0J0hpZGUgdGFiIGxpc3QgaWNvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgdGFiIGxpc3QgaWNvbi4gWW91IGNhbiBzdGlsbCBhY2Nlc3MgdGFicyB2aWEgb3RoZXIgbWV0aG9kcy4nLFxyXG5cdFx0XHQndGFiTGlzdEljb24nXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXHJcblx0XHRcdHRhYkljb25zR3JvdXAsXHJcblx0XHRcdCdIaWRlIG5ldyB0YWIgaWNvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgbmV3IHRhYiBpY29uLiBZb3UgY2FuIHN0aWxsIGNyZWF0ZSBuZXcgdGFicyB3aXRoIEN0cmwrVCAoQ21kK1Qgb24gTWFjKS4nLFxyXG5cdFx0XHQnbmV3VGFiSWNvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcclxuXHRcdFx0dGFiSWNvbnNHcm91cCxcclxuXHRcdFx0J0hpZGUgdGFiIGNsb3NlIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgY2xvc2UgYnV0dG9uIG9uIHRhYnMuIFlvdSBjYW4gc3RpbGwgY2xvc2UgdGFicyB3aXRoIG1pZGRsZSBjbGljayBvciBvdGhlciBtZXRob2RzLicsXHJcblx0XHRcdCd0YWJDbG9zZUJ1dHRvbidcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gU3RhdHVzICYgVUkgZWxlbWVudHNcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdGNvbnN0IHN0YXR1c1VJR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1N0YXR1cyAmIFVJIGVsZW1lbnRzJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc3RhdHVzVUlHcm91cCwgJ0hpZGUgc3RhdHVzIGJhcicsICdIaWRlcyB3b3JkIGNvdW50LCBjaGFyYWN0ZXIgY291bnQgYW5kIGJhY2tsaW5rIGNvdW50LicsICdzdGF0dXNCYXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRzdGF0dXNVSUdyb3VwLFxyXG5cdFx0XHQnU2Nyb2xsIGJhcnMnLFxyXG5cdFx0XHQnQ29udHJvbCBzY3JvbGxiYXIgdmlzaWJpbGl0eS4gUmV2ZWFsIG9wdGlvbiBoaWRlcyBzY3JvbGxiYXJzIHVudGlsIGhvdmVyLicsXHJcblx0XHRcdCdzY3JvbGxCYXJzJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRzdGF0dXNVSUdyb3VwLFxyXG5cdFx0XHQnSGlkZSBsZWZ0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbicsXHJcblx0XHRcdCdIaWRlcyB0aGUgbGVmdCBzaWRlYmFyIHRvZ2dsZSBidXR0b24uJyxcclxuXHRcdFx0J2xlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxyXG5cdFx0XHRzdGF0dXNVSUdyb3VwLFxyXG5cdFx0XHQnSGlkZSByaWdodCBzaWRlYmFyIHRvZ2dsZSBidXR0b24nLFxyXG5cdFx0XHQnSGlkZXMgdGhlIHJpZ2h0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbi4nLFxyXG5cdFx0XHQncmlnaHRTaWRlYmFyVG9nZ2xlQnV0dG9uJ1xyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc3RhdHVzVUlHcm91cCwgJ0hpZGUgdG9vbHRpcHMnLCAnSGlkZXMgYWxsIHRvb2x0aXBzLicsICd0b29sdGlwcycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhzdGF0dXNVSUdyb3VwLCAnSGlkZSBpbnN0cnVjdGlvbnMnLCAnSGlkZXMgaW5zdHJ1Y3Rpb25hbCB0aXBzIGluIG1vZGFscy4nLCAnaW5zdHJ1Y3Rpb25zJyk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gU2VhcmNoXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBzZWFyY2hHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnU2VhcmNoJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc2VhcmNoR3JvdXAsICdIaWRlIHNlYXJjaCBzdWdnZXN0aW9ucycsICdIaWRlcyBzdWdnZXN0aW9ucyBpbiBzZWFyY2ggcGFuZS4nLCAnc2VhcmNoU3VnZ2VzdGlvbnMnKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc2VhcmNoR3JvdXAsICdIaWRlIGNvdW50IG9mIHNlYXJjaCB0ZXJtIG1hdGNoZXMnLCAnSGlkZXMgdGhlIG51bWJlciBvZiBtYXRjaGVzIHdpdGhpbiBlYWNoIHNlYXJjaCByZXN1bHQuJywgJ3NlYXJjaFRlcm1Db3VudHMnKTtcclxuXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHQvLyBQcm9wZXJ0aWVzXHJcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0XHRjb25zdCBwcm9wZXJ0aWVzR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1Byb3BlcnRpZXMnLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdIaWRlIHByb3BlcnRpZXMgaW4gUmVhZGluZyB2aWV3JywgJ0hpZGVzIHRoZSBwcm9wZXJ0aWVzIHNlY3Rpb24gaW4gUmVhZGluZyB2aWV3LicsICdwcm9wZXJ0aWVzSW5SZWFkaW5nVmlldycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdEZWVtcGhhc2l6ZSBwcm9wZXJ0aWVzJywgJ1NvZnRlbnMgdmlzdWFsIHByb21pbmVuY2Ugb2YgZmlsZSBwcm9wZXJ0aWVzLiBUaGV5IGJlY29tZSBtb3JlIHZpc2libGUgb24gaG92ZXIuJywgJ2RlZW1waGFzaXplUHJvcGVydGllcycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdIaWRlIHByb3BlcnRpZXMgaGVhZGluZycsICdIaWRlIFwiUHJvcGVydGllc1wiIGhlYWRpbmcgYWJvdmUgcHJvcGVydGllcy4nLCAncHJvcGVydGllc0luSGVhZGluZycpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdIaWRlIFwiQWRkIHByb3BlcnR5XCIgYnV0dG9uJywgJ0hpZGUgXCJBZGQgcHJvcGVydHlcIiBidXR0b24gYmVsb3cgcHJvcGVydGllcy4nLCAnYWRkUHJvcGVydHlCdXR0b24nKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkVmlzaWJpbGl0eVNldHRpbmcoZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyLCBuYW1lOiBzdHJpbmcsIGRlc2M6IHN0cmluZywga2V5OiBrZXlvZiBVSVNldHRpbmdzKSB7XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5nZXRTZXR0aW5ncygpW2tleV07XHJcblx0XHRcdFx0XHRjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdzdHJpbmcnID8gY3VycmVudFZhbHVlIDogJ3Nob3cnO1xyXG5cdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignc2hvdycsICdTaG93JylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignaGlkZScsICdIaWRlJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbigncmV2ZWFsJywgJ1JldmVhbCcpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzdHJpbmdWYWx1ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdCh0aGlzLmdldFNldHRpbmdzKClba2V5XSBhcyBVSVZpc2liaWxpdHlTdGF0ZSkgPSB2YWx1ZSBhcyBVSVZpc2liaWxpdHlTdGF0ZTtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFRvZ2dsZVNldHRpbmcoZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyLCBuYW1lOiBzdHJpbmcsIGRlc2M6IHN0cmluZywga2V5OiBrZXlvZiBVSVNldHRpbmdzKSB7XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZShuYW1lKVxyXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKEJvb2xlYW4odGhpcy5nZXRTZXR0aW5ncygpW2tleV0pKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0KHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldIGFzIGJvb2xlYW4pID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJIZWxwQnV0dG9uUmVwbGFjZW1lbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGlmICghc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50KSB7XHJcblx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcclxuXHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxyXG5cdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZGVwZW5kZW50U2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUmVwbGFjZSBoZWxwIGJ1dHRvbiB3aXRoIGN1c3RvbSBhY3Rpb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdSZXBsYWNlIHRoZSBoZWxwIGJ1dHRvbiB3aXRoIGEgY3VzdG9tIGljb24gYW5kIGNvbW1hbmQuIFRoaXMgd2lsbCBoaWRlIHRoZSBvcmlnaW5hbCBoZWxwIGJ1dHRvbiBhbmQgc2hvdyB5b3VyIGN1c3RvbSBidXR0b24gaW5zdGVhZC4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5lbmFibGVkID0gdmFsdWU7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBUb2dnbGUgdmlzaWJpbGl0eSBvZiBkZXBlbmRlbnQgc2V0dGluZ3MgaW5zdGFudGx5XHJcblx0XHRcdFx0XHRcdGRlcGVuZGVudFNldHRpbmdzLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICcnIDogJ25vbmUnO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IGdldENvbW1hbmROYW1lID0gKGNvbW1hbmRJZDogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuXHRcdFx0aWYgKCFjb21tYW5kSWQpIHJldHVybiAnU2VsZWN0IGNvbW1hbmQuLi4nO1xyXG5cclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kUmVnaXN0cnkgPSAodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgbGlzdENvbW1hbmRzPzogKCkgPT4gQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT4gfSB9KS5jb21tYW5kcztcclxuXHRcdFx0XHRpZiAoY29tbWFuZFJlZ2lzdHJ5ICYmIHR5cGVvZiBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kcyA9IGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMoKTtcclxuXHRcdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcy5maW5kKChjbWQpID0+IGNtZCAmJiBjbWQuaWQgPT09IGNvbW1hbmRJZCk7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZD8ubmFtZSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gY29tbWFuZC5uYW1lO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gRXJyb3IgZ2V0dGluZyBjb21tYW5kIG5hbWVcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gJ1NlbGVjdCBjb21tYW5kLi4uJztcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgZ2V0SWNvbk5hbWUgPSAoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0XHRpZiAoIWljb25JZCkgcmV0dXJuICcnO1xyXG5cdFx0XHRyZXR1cm4gaWNvbklkXHJcblx0XHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpXHJcblx0XHRcdFx0LnNwbGl0KCctJylcclxuXHRcdFx0XHQubWFwKCh3b3JkKSA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKSlcclxuXHRcdFx0XHQuam9pbignICcpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBDb21tYW5kIFNldHRpbmdcclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0ZGVwZW5kZW50U2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnN0eWxlLmRpc3BsYXkgPSBzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCA/ICcnIDogJ25vbmUnO1xyXG5cclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2VsZWN0IHRoZSBjb21tYW5kIHRvIGV4ZWN1dGUgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQnKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGdldENvbW1hbmROYW1lKHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQpKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHRoaXMuYXBwLCAoY29tbWFuZElkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmNvbW1hbmRJZCA9IGNvbW1hbmRJZDtcclxuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChnZXRDb21tYW5kTmFtZShjb21tYW5kSWQpKTtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBJY29uIFNldHRpbmdcclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0ZGVwZW5kZW50U2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnN0eWxlLmRpc3BsYXkgPSBzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCA/ICcnIDogJ25vbmUnO1xyXG5cclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdJY29uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2VsZWN0IHRoZSBpY29uIHRvIGRpc3BsYXkgb24gdGhlIGJ1dHRvbicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoZ2V0SWNvbk5hbWUoc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCkgfHwgJ1NlbGVjdCBpY29uLi4uJykub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5pY29uSWQgPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoZ2V0SWNvbk5hbWUoaWNvbklkKSk7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVGFiIEJhciBUYWIgLSBDdXN0b20gY29tbWFuZCBidXR0b25zIGZvciBwYWdlIGhlYWRlcnNcclxuICovXHJcblxyXG5pbXBvcnQgeyBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUYWJSZW5kZXJlciB9IGZyb20gJy4uL2NvbW1vbi9UYWJSZW5kZXJlcic7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5pbXBvcnQgeyBDb21tYW5kSWNvblBhaXIgfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IGNob29zZU5ld0NvbW1hbmQgfSBmcm9tICcuLi8uLi91dGlscy9jaG9vc2VDb21tYW5kJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5cclxuLy8gU2ltcGxlIGFycmF5IG1vdmUgdXRpbGl0eVxyXG5mdW5jdGlvbiBhcnJheU1vdmVNdXRhYmxlPFQ+KGFycmF5OiBUW10sIGZyb206IG51bWJlciwgdG86IG51bWJlcik6IHZvaWQge1xyXG5cdGNvbnN0IGl0ZW0gPSBhcnJheVtmcm9tXTtcclxuXHRhcnJheS5zcGxpY2UoZnJvbSwgMSk7XHJcblx0YXJyYXkuc3BsaWNlKHRvLCAwLCBpdGVtKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhYkJhclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRwcml2YXRlIGV4cGFuZGVkU3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XHJcblxyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIEVuc3VyZSB0YWJCYXJDb21tYW5kcyBleGlzdHNcclxuXHRcdGlmICghc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHtcclxuXHRcdFx0c2V0dGluZ3MudGFiQmFyQ29tbWFuZHMgPSBbXTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBMaXN0IG9mIGNvbW1hbmRzIHVzaW5nIFNldHRpbmcgY29tcG9uZW50cyAobGlrZSBIaWRlclRhYilcclxuXHRcdHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLmZvckVhY2goKHBhaXIsIGluZGV4KSA9PiB7XHJcblx0XHRcdHRoaXMucmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyLCBwYWlyLCBpbmRleCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXHJcblx0XHRpZiAoc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBBZGQgc2VwYXJhdG9yXHJcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaHInKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBhZGRHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XHJcblx0XHRhZGRHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQWRkIGNvbW1hbmQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdBZGQgYSBuZXcgY29tbWFuZCBidXR0b24gdG8gdGhlIHRhYiBiYXInKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gQWRkIGljb24gdG8gdGhlIGJ1dHRvblxyXG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBidXR0b24uYnV0dG9uRWw7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gYnV0dG9uRWwuY3JlYXRlU3Bhbih7IGNsczogJ3VpLXR3ZWFrZXItYWRkLWljb24nIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLWltYWdlLXBsdXMnKTtcclxuXHRcdFx0XHRcdGJ1dHRvbkVsLmluc2VydEJlZm9yZShpY29uQ29udGFpbmVyLCBidXR0b25FbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdBZGQgY29tbWFuZCcpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhaXIgPSBhd2FpdCBjaG9vc2VOZXdDb21tYW5kKHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGFkZENvbW1hbmQgd2lsbCBwdXNoIHRvIHNldHRpbmdzLnRhYkJhckNvbW1hbmRzIGFuZCBzYXZlXHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5hZGRDb21tYW5kKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVzZXIgY2FuY2VsbGVkXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHQvLyBDb21tYW5kIG5hbWUgd2l0aCBlZGl0YWJsZSBuYW1lIChsaWtlIFZhdWx0IENNUykgYW5kIGljb24gcHJldmlldyB3aXRoIGNvbG9yXHJcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IHBhaXIuZGlzcGxheU5hbWUgfHwgcGFpci5uYW1lO1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHQvLyBDb21wbGV0ZWx5IHByZXZlbnQgY29sbGFwc2Ugb24gc2V0dGluZyBlbGVtZW50IC0gT05MWSBjaGV2cm9uIGNhbiB0b2dnbGVcclxuXHRcdFx0Ly8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gaW50ZXJjZXB0IEFMTCBjbGlja3MgYmVmb3JlIHRoZXkgcmVhY2ggT2JzaWRpYW4ncyBoYW5kbGVyc1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0Ly8gQWxsb3cgY29sbGFwc2UgaWYgY2xpY2tpbmcgb24gY2hldnJvbiBpY29uIE9SIG9uIGV4dHJhIGJ1dHRvbnMgKGRlbGV0ZSwgbW92ZSB1cC9kb3duLCBldGMuKVxyXG5cdFx0XHRcdC8vIE9SIG9uIG5hbWUgZGlzcGxheS9wZW5jaWwgaWNvbiBmb3IgcmVuYW1pbmdcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHQvLyBCbG9jayBBTEwgb3RoZXIgY2xpY2tzIGZyb20gYWZmZWN0aW5nIGNvbGxhcHNlXHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRydWUpOyAvLyBDYXB0dXJlIHBoYXNlIC0gcnVucyBiZWZvcmUgb3RoZXIgaGFuZGxlcnNcclxuXHJcblx0XHRcdC8vIEFsc28gcHJldmVudCBvbiBidWJibGUgcGhhc2UgYXMgYmFja3VwXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIGZhbHNlKTsgLy8gQnViYmxlIHBoYXNlIC0gYmFja3VwXHJcblxyXG5cdFx0XHQvLyBNYWtlIG5hbWVFbCBhIGZsZXggY29udGFpbmVyIHNvIGNoZXZyb24gY2FuIGJlIHBvc2l0aW9uZWQgdG8gdGhlIGxlZnRcclxuXHRcdFx0Y29uc3QgbmFtZUVsID0gc2V0dGluZy5uYW1lRWw7XHJcblx0XHRcdHNldENzc1Byb3BzKG5hbWVFbCwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nLCB3aWR0aDogJzEwMCUnIH0pO1xyXG5cclxuXHRcdFx0Ly8gQWRkIGNoZXZyb25zLXVwLWRvd24gaWNvbiB0byB0aGUgTEVGVCBvZiB0aGUgbmFtZSAoYmVmb3JlIG5hbWUgY29udGFpbmVyKVxyXG5cdFx0XHRjb25zdCBjaGV2cm9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuY2xhc3NOYW1lID0gJ3VpLXR3ZWFrZXItY29sbGFwc2UtaWNvbic7XHJcblx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHtcclxuXHRcdFx0XHRjdXJzb3I6ICdkZWZhdWx0JyxcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxyXG5cdFx0XHRcdHBhZGRpbmc6ICcwJyxcclxuXHRcdFx0XHRtYXJnaW46ICcwJyxcclxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxyXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly8gSW5zZXJ0IGFzIGZpcnN0IGNoaWxkIHRvIGVuc3VyZSBpdCdzIG9uIHRoZSBsZWZ0XHJcblx0XHRcdG5hbWVFbC5pbnNlcnRCZWZvcmUoY2hldnJvbkNvbnRhaW5lciwgbmFtZUVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHQvLyBSZXN0b3JlIGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwLCBkZWZhdWx0IHRvIGZhbHNlIGlmIG5vdCBzZXRcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcclxuXHJcblx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrIC0gT05MWSB3YXkgdG8gY2hhbmdlIGNvbGxhcHNlIHN0YXRlXHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xyXG5cdFx0XHRcdC8vIFN0b3JlIHN0YXRlIGluIE1hcCBmb3IgcGVyc2lzdGVuY2UgYWNyb3NzIHJlLXJlbmRlcnNcclxuXHRcdFx0XHR0aGlzLmV4cGFuZGVkU3RhdGVzLnNldChwYWlyLmlkLCBpc0V4cGFuZGVkKTtcclxuXHRcdFx0XHQvLyBTd2FwIGljb246IGNoZXZyb25zLXVwLWRvd24gKGNvbGxhcHNlZCkgPC0+IGNoZXZyb25zLWRvd24tdXAgKGV4cGFuZGVkKVxyXG5cdFx0XHRcdHNldEljb24oY2hldnJvbkNvbnRhaW5lciwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogaXNFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBlZGl0YWJsZSBuYW1lIGNvbnRhaW5lciB3aXRoIHBlbmNpbCBpY29uXHJcblx0XHRcdGNvbnN0IG5hbWVDb250YWluZXIgPSBuYW1lRWwuY3JlYXRlRGl2KHsgY2xzOiAndWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJyB9KTtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUNvbnRhaW5lciwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nIH0pO1xyXG5cclxuXHRcdFx0Ly8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBkaXNwbGF5IGVsZW1lbnQgd2l0aCBjbGljayBoYW5kbGVyXHJcblx0XHRcdGNvbnN0IGNyZWF0ZU5hbWVEaXNwbGF5ID0gKG5hbWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdG5hbWVDb250YWluZXIuZW1wdHkoKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgZGlzcGxheSA9IG5hbWVDb250YWluZXIuY3JlYXRlU3Bhbih7XHJcblx0XHRcdFx0XHR0ZXh0OiBuYW1lID09PSBkaXNwbGF5TmFtZSA/IG5hbWUgOiBgJHtuYW1lfSAoJHtkaXNwbGF5TmFtZX0pYCxcclxuXHRcdFx0XHRcdGNsczogJ3VpLXR3ZWFrZXItbmFtZS1kaXNwbGF5J1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgcGVuY2lsIGljb25cclxuXHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXQtaWNvbicgfSk7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsICdsdWNpZGUtcGVuY2lsLWxpbmUnKTtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0Y29uc3Qgc3RhcnRFZGl0ID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBwYWlyLm5hbWU7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2xlYXIgY29udGFpbmVyXHJcblx0XHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGlucHV0IHVzaW5nIG5hdGl2ZSBPYnNpZGlhbiBzdHlsaW5nXHJcblx0XHRcdFx0XHRjb25zdCBuYW1lSW5wdXQgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuXHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHR2YWx1ZTogY3VycmVudE5hbWVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEZvY3VzIGFuZCBzZWxlY3QgdGV4dFxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBibHVyXHJcblx0XHRcdFx0XHRjb25zdCBzYXZlTmFtZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblxyXG5cdFx0XHRcdFx0XHRsZXQgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdGlmICghbmV3TmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdG5ld05hbWUgPSBjdXJyZW50TmFtZTsgLy8gUmV2ZXJ0IHRvIG9yaWdpbmFsIGlmIGVtcHR5XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cGFpci5uYW1lID0gbmV3TmFtZTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBleGlzdGluZyBidXR0b25zIGltbWVkaWF0ZWx5IChkb24ndCB3YWl0IGZvciByZS1yZW5kZXIpXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnVwZGF0ZUJ1dHRvbk5hbWVzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gdXBkYXRlIGRpc3BsYXkgYW5kIHNhdmVcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBFbnRlclxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0c2F2ZU5hbWUoKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQ2FuY2VsOiByZXZlcnQgdG8gb3JpZ2luYWxcclxuXHRcdFx0XHRcdFx0XHRjcmVhdGVOYW1lRGlzcGxheShjdXJyZW50TmFtZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdC8vIFNhdmUgb24gYmx1clxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIGNsaWNrIGhhbmRsZXJzIHRvIGJvdGggbmFtZSBhbmQgaWNvblxyXG5cdFx0XHRcdGRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xyXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgaG92ZXIgZWZmZWN0IHRvIGljb25cclxuXHRcdFx0XHRpY29uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcxJyB9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRpY29uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcwLjYnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIGluaXRpYWwgZGlzcGxheVxyXG5cdFx0XHRjcmVhdGVOYW1lRGlzcGxheShwYWlyLm5hbWUpO1xyXG5cclxuXHRcdFx0c2V0dGluZy5zZXREZXNjKCcnKVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBDaGFuZ2UgaWNvbiAtIHByZXZpZXcgd2l0aCBjb2xvciAocmVhbC10aW1lIHVwZGF0ZXMpXHJcblx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBidXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIHBhaXIuaWNvbik7XHJcblx0XHRcdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgZm9yIGNvbG9yIHVwZGF0ZXNcclxuXHRcdFx0XHRcdGljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29tbWFuZC1pZCcsIHBhaXIuaWQpO1xyXG5cdFx0XHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25FbCwgeyBjb2xvcjogcGFpci5jb2xvciB9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGljb25FbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdDaGFuZ2UgaWNvbicpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkICYmIGljb25JZCAhPT0gcGFpci5pY29uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuaWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSB1cCAtIGFsd2F5cyBzaG93LCBidXQgZGlzYWJsZSB3aGVuIGF0IHRvcFxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ2NoZXZyb24tdXAnKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA+IDApIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ01vdmUgdXAnKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGZsaWNrZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmUgbW9yZSBhdHRlbXB0IGFmdGVyIGEgbG9uZ2VyIGRlbGF5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IHRvcCcpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGhvdmVyIGVmZmVjdHMgb24gZGlzYWJsZWQgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSBkb3duIC0gYWx3YXlzIHNob3csIGJ1dCBkaXNhYmxlIHdoZW4gYXQgYm90dG9tXHJcblx0XHRcdFx0XHRidXR0b24uc2V0SWNvbignY2hldnJvbi1kb3duJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPCBzZXR0aW5ncy50YWJCYXJDb21tYW5kcy5sZW5ndGggLSAxKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIGRvd24nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGZsaWNrZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLCBpbmRleCwgaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmUgbW9yZSBhdHRlbXB0IGFmdGVyIGEgbG9uZ2VyIGRlbGF5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IGJvdHRvbScpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGhvdmVyIGVmZmVjdHMgb24gZGlzYWJsZWQgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gRGVsZXRlIC0gcmVkL3dhcm5pbmcgc3R5bGVcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCd0cmFzaCcpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0RlbGV0ZScpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0XHRcdC8vIE1ha2UgaWNvbiByZWRcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy50YWJCYXJDb21tYW5kcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVtb3ZlQ29tbWFuZChwYWlyKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTW9kZSBzZWxlY3Rpb24gZHJvcGRvd25cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEZXZpY2UgbW9kZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSB3aGljaCBkZXZpY2VzIHRoaXMgY29tbWFuZCBhcHBlYXJzIG9uJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBhcHBJZCA9ICh0aGlzLmFwcCBhcyB7IGFwcElkPzogc3RyaW5nIH0pLmFwcElkIHx8ICd0aGlzLWRldmljZSc7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhbnknLCAnQWxsIGRldmljZXMnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdkZXNrdG9wJywgJ0Rlc2t0b3Agb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oYXBwSWQsICdUaGlzIGRldmljZScpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFNldCBjdXJyZW50IHZhbHVlIC0gaWYgbW9kZSBpcyBub3Qgb25lIG9mIHRoZSBzdGFuZGFyZCBvbmVzLCBpdCdzIFwidGhpcyBkZXZpY2VcIlxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gKHBhaXIubW9kZSA9PT0gJ2FueScgfHwgcGFpci5tb2RlID09PSAnZGVza3RvcCcgfHwgcGFpci5tb2RlID09PSAnbW9iaWxlJylcclxuXHRcdFx0XHRcdFx0PyBwYWlyLm1vZGVcclxuXHRcdFx0XHRcdFx0OiBhcHBJZDtcclxuXHRcdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKGN1cnJlbnRWYWx1ZSk7XHJcblxyXG5cdFx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLm1vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBjb2xvciBwaWNrZXIgd2l0aCByZXNldCBidXR0b24gKGxpa2UgQ29tbWFuZGVyIC0gYWx3YXlzIHNob3cgY29sb3IgcGlja2VyKVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIGNvbG9yJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFVzZSBDb21tYW5kZXIncyBhcHByb2FjaDogYWx3YXlzIHNob3cgY29sb3IgcGlja2VyLCBkZWZhdWx0IHRvICMwMDAgaWYgbm90IHNldFxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgY29udHJvbCBlbGVtZW50IC0gY29sb3IgcGlja2VyIGlzIGFkZGVkIHRvIGl0XHJcblx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNvbG9yIHBpY2tlciBjbGlja3NcclxuXHRcdFx0XHRcdGNvbnRyb2xFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiB0byB0aGUgbGVmdCBvZiBjb2xvciBwaWNrZXIgaWYgY29sb3IgaGFzIGJlZW4gc2V0XHJcblx0XHRcdFx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgY29sb3IgcGlja2VyIGlzIGFkZGVkIGZpcnN0LCB0aGVuIGluc2VydCByZXNldCBidXR0b24gYmVmb3JlIGl0XHJcblx0XHRcdFx0XHRpZiAoaGFzQ29sb3IpIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRmluZCB0aGUgY29sb3IgcGlja2VyIGVsZW1lbnQgKGl0J3MgdHlwaWNhbGx5IHRoZSBsYXN0IGNoaWxkIG9yIGhhcyBhIHNwZWNpZmljIGNsYXNzKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGNvbG9yIGVudGlyZWx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IHRvIHJlbW92ZSBjb2xvclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpY29uQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbkJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IHJlc2V0IGJ1dHRvbiBiZWZvcmUgY29sb3IgcGlja2VyXHJcblx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbG9yUGlja2VyRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjazogaW5zZXJ0IGF0IHN0YXJ0XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgc2V0IHRvIGJsYWNrICgjMDAwMDAwKSwgdHJlYXQgYXMgXCJubyBjdXN0b20gY29sb3JcIiBhbmQgcmVtb3ZlIGl0XHJcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRcdFx0cGFpci5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIHByZXZpZXcgY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25CdXR0b24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBTYXZlIGFuZCByZW9yZGVyLCB0aGVuIHJlLXJlbmRlciB0byBzaG93L2hpZGUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUb2dnbGUgaWNvbiBjb25maWd1cmF0aW9uXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdGNvbnN0IGhhc1RvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVG9nZ2xlIGljb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdJY29uIHRvIHNob3cgd2hlbiBjb21tYW5kIGlzIHRvZ2dsZWQgb24gKGxlYXZlIGVtcHR5IHRvIGRpc2FibGUgdG9nZ2xlKS4gQ29tbWFuZHMgd2l0aCBjaGVjayBjYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSByZWFkbWUgZm9yIHBsdWdpbiBkZXZlbG9wZXIgY29tcGF0aWJpbGl0eSBub3Rlcy4nKVxyXG5cdFx0XHRcdC5zZXRUb29sdGlwKCdGb3IgcGx1Z2luIGRldmVsb3BlcnM6IENvbW1hbmRzIHdpdGggY2hlY2tDYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWR2a2ltYmFsbC9vYnNpZGlhbi11aS10d2Vha2VyI3RvZ2dsZS1pY29uLWZlYXR1cmUtY29tcGF0aWJpbGl0eSBmb3IgZGV0YWlscy4nKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFRvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gfHwgJ05vbmUnO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudFRvZ2dsZUljb24gPT09ICdOb25lJyA/ICdTZXQgdG9nZ2xlIGljb24uLi4nIDogY3VycmVudFRvZ2dsZUljb24pLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIHRvZ2dsZSBpY29uIGlzIHNldFxyXG5cdFx0XHRcdFx0aWYgKGhhc1RvZ2dsZUljb24pIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignYnV0dG9uJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLXRvZ2dsZS1pY29uLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG9nZ2xlIGljb24nIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lcicpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSB0b2dnbGUgaWNvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlciB3aXRoIG11bHRpcGxlIGF0dGVtcHRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGlmIChidXR0b25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgb25seSBvbiB0aGVzZSBmaWxlIHR5cGVzXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBvbmx5IG9uIHRoZXNlIGZpbGUgdHlwZXMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGJ1dHRvbiBvbmx5IG9uIHNwZWNpZmllZCBmaWxlIHR5cGVzIG9yIHZpZXdzLiBFbnRlciBjb21tYS1zZXBhcmF0ZWQgZmlsZSBleHRlbnNpb25zIChsaWtlIFwibWQsbWR4XCIpIG9yIHZpZXcgdHlwZXMgZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMgKGxpa2UgXCJ7e2dyYXBofX1cIikuIExlYXZlIGVtcHR5IHRvIHNob3cgb24gYWxsLiBVc2Uge3tncmFwaH19IGZvciBncmFwaCB2aWV3IGFuZCB7e2VtcHR5fX0gZm9yIGJsYW5rL25ldyB0YWJzLicpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ0V4YW1wbGU6IG1kLCBtZHgnKTtcclxuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUocGFpci5zaG93T25GaWxlVHlwZXMgPz8gJycpO1xyXG5cdFx0XHRcdFx0dGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHBhaXIuc2hvd09uRmlsZVR5cGVzID0gdmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGljay9mb2N1c1xyXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTmV2ZXIgc2hvdyBvbiB0aGVzZSBmaWxlIHR5cGVzXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnTmV2ZXIgc2hvdyBvbiB0aGVzZSBmaWxlIHR5cGVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSGlkZSBidXR0b24gb24gc3BlY2lmaWVkIGZpbGUgdHlwZXMgb3Igdmlld3MuIEVudGVyIGNvbW1hLXNlcGFyYXRlZCBmaWxlIGV4dGVuc2lvbnMgKGxpa2UgXCJqcGcscG5nXCIpIG9yIHZpZXcgdHlwZXMgZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMgKGxpa2UgXCJ7e2dyYXBofX1cIikuIExlYXZlIGVtcHR5IHRvIGFsbG93IGFsbC4gVXNlIHt7Z3JhcGh9fSBmb3IgZ3JhcGggdmlldyBhbmQge3tlbXB0eX19IGZvciBibGFuay9uZXcgdGFicy4nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCd7e2dyYXBofX0se3tlbXB0eX19Jyk7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHBhaXIuaGlkZU9uRmlsZVR5cGVzID8/ICcnKTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLmhpZGVPbkZpbGVUeXBlcyA9IHZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2svZm9jdXNcclxuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFmdGVyIGFsbCBzZXR0aW5ncyBhcmUgYWRkZWQsIGFwcGx5IGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc2F2ZWRFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KHBhaXIuaWQpID8/IGZhbHNlO1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogc2F2ZWRFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDApO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE5hbWUgUGlja2VyIE1vZGFsXHJcbiAqIFNpbXBsZSBtb2RhbCBmb3IgZW50ZXJpbmcgYSBjdXN0b20gbmFtZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFRleHRDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgTmFtZVBpY2tlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBkZWZhdWx0TmFtZTogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZGVmYXVsdE5hbWU6IHN0cmluZywgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmRlZmF1bHROYW1lID0gZGVmYXVsdE5hbWU7XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFbnRlciBuYW1lJyB9KTtcclxuXHJcblx0XHRjb25zdCBpbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGNvbnN0IGlucHV0ID0gbmV3IFRleHRDb21wb25lbnQoaW5wdXRDb250YWluZXIpO1xyXG5cdFx0aW5wdXQuc2V0VmFsdWUodGhpcy5kZWZhdWx0TmFtZSk7XHJcblx0XHRpbnB1dC5zZXRQbGFjZWhvbGRlcignRW50ZXIgY3VzdG9tIG5hbWUuLi4nKTtcclxuXHRcdGlucHV0LmlucHV0RWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbmFtZS1pbnB1dCcpO1xyXG5cdFx0aW5wdXQuaW5wdXRFbC5zZWxlY3QoKTtcclxuXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ09LJywgY2xzOiAnbW9kLWN0YScgfSk7XHJcblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XHJcblxyXG5cdFx0Y29uc3QgaGFuZGxlU3VibWl0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0XHRjb25zdCB2YWx1ZSA9IGlucHV0LmdldFZhbHVlKCkudHJpbSgpO1xyXG5cdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHR0aGlzLm9uU3VibWl0KHZhbHVlKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU3VibWl0KTtcclxuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblx0XHRpbnB1dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XHJcblx0XHRcdGlmIChldnQua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aGFuZGxlU3VibWl0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjaG9vc2UgYSBuZXcgY29tbWFuZCAoc2ltaWxhciB0byBDb21tYW5kZXIncyBjaG9vc2VOZXdDb21tYW5kKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IENvbW1hbmRJY29uUGFpciB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgQ29tbWFuZFBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0NvbW1hbmRQaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xyXG5pbXBvcnQgeyBOYW1lUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvTmFtZVBpY2tlck1vZGFsJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaG9vc2VOZXdDb21tYW5kKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogUHJvbWlzZTxDb21tYW5kSWNvblBhaXI+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0bGV0IGNvbW1hbmRTZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0bGV0IGljb25TZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHQvLyBTdGVwIDE6IENob29zZSBjb21tYW5kXHJcblx0XHRjb25zdCBjb21tYW5kTW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIChjb21tYW5kSWQpID0+IHtcclxuXHRcdFx0Y29tbWFuZFNlbGVjdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEdldCBjb21tYW5kIHRvIGNoZWNrIGlmIGl0IGhhcyBhbiBpY29uXHJcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHBsdWdpbi5hcHAgYXMgeyBjb21tYW5kcz86IHsgY29tbWFuZHM/OiB7IFtpZDogc3RyaW5nXTogQ29tbWFuZCB9IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcz8uY29tbWFuZHM/Lltjb21tYW5kSWRdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2xvc2UgY29tbWFuZCBtb2RhbCBmaXJzdFxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRjb21tYW5kTW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0fSwgMCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBbHdheXMgc2hvdyBpY29uIHBpY2tlciAoZXZlbiBpZiBjb21tYW5kIGhhcyBhbiBpY29uLCBsZXQgdXNlciBjaG9vc2UpXHJcblx0XHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gY29tbWFuZD8ubmFtZSB8fCAnQ3VzdG9tIENvbW1hbmQnO1xyXG5cdFx0XHRjb25zdCBpY29uTW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRpY29uU2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGljb25Nb2RhbC5jbG9zZSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFN0ZXAgMzogQ2hvb3NlIGN1c3RvbSBuYW1lXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRsZXQgbmFtZVNlbGVjdGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRjb25zdCBuYW1lTW9kYWwgPSBuZXcgTmFtZVBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIGRpc3BsYXlOYW1lLCAoY3VzdG9tTmFtZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRuYW1lU2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRuYW1lTW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kSWQsXHJcblx0XHRcdFx0XHRcdFx0aWNvbjogaWNvbklkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGN1c3RvbU5hbWUsXHJcblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lLFxyXG5cdFx0XHRcdFx0XHRcdG1vZGU6ICdhbnknLFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRuYW1lTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFuYW1lU2VsZWN0ZWQgJiYgaWNvblNlbGVjdGVkICYmIGNvbW1hbmRTZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcignTm8gbmFtZSBzZWxlY3RlZCcpKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0bmFtZU1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGljb25Nb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xyXG5cdFx0XHRcdC8vIFVzZSBzZXRUaW1lb3V0IHRvIGFsbG93IG9uU2VsZWN0IHRvIHNldCBpY29uU2VsZWN0ZWQgZmlyc3RcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdGlmICghaWNvblNlbGVjdGVkICYmIGNvbW1hbmRTZWxlY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKCdObyBpY29uIHNlbGVjdGVkJykpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDApO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWNvbk1vZGFsLm9wZW4oKTtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRjb21tYW5kTW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuXHRcdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gYWxsb3cgb25DaG9vc2VJdGVtIHRvIHNldCBjb21tYW5kU2VsZWN0ZWQgZmlyc3RcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWYgKCFjb21tYW5kU2VsZWN0ZWQpIHtcclxuXHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoJ05vIGNvbW1hbmQgc2VsZWN0ZWQnKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCAwKTtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGNvbW1hbmRNb2RhbC5vcGVuKCk7XHJcblx0fSk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBTdGF0dXMgQmFyIFRhYiAtIFVuaWZpZWQgbGlzdCBvZiBleGlzdGluZyArIGN1c3RvbSBzdGF0dXMgYmFyIGl0ZW1zXHJcbiAqIEVYQUNUTFkgbWF0Y2hlcyBTdGF0dXMgQmFyIE9yZ2FuaXplcidzIGRlc2lnbiAxOjFcclxuICovXHJcblxyXG5pbXBvcnQgeyBzZXRJY29uLCBDb2xvckNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBTdGF0dXNCYXJJdGVtIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBjaG9vc2VOZXdDb21tYW5kIH0gZnJvbSAnLi4vLi4vdXRpbHMvY2hvb3NlQ29tbWFuZCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuXHJcbi8vIFNpbXBsZSBhcnJheSBtb3ZlIHV0aWxpdHlcclxuZnVuY3Rpb24gYXJyYXlNb3ZlTXV0YWJsZTxUPihhcnJheTogVFtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpOiB2b2lkIHtcclxuXHRjb25zdCBpdGVtID0gYXJyYXlbZnJvbV07XHJcblx0YXJyYXkuc3BsaWNlKGZyb20sIDEpO1xyXG5cdGFycmF5LnNwbGljZSh0bywgMCwgaXRlbSk7XHJcbn1cclxuXHJcbmxldCBkcmFnZ2luZyA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0YXR1c0JhclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcclxuXHRwcml2YXRlIGNvbnRhaW5lcj86IEhUTUxFbGVtZW50O1xyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0Ly8gU3RvcmUgY29udGFpbmVyIHJlZmVyZW5jZSBmb3IgcmUtcmVuZGVyc1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblxyXG5cdFx0Ly8gRW5zdXJlIHN0YXR1c0Jhckl0ZW1zIGV4aXN0c1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xyXG5cdFx0XHRzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcyA9IFtdO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSB3cmFwcGVyXHJcblx0XHRjb25zdCB3cmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZURpdigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvd3Mtd3JhcHBlcicpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSByb3dzIGNvbnRhaW5lclxyXG5cdFx0Y29uc3Qgcm93c0NvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy1jb250YWluZXInKTtcclxuXHJcblx0XHQvLyBSZW5kZXIgYWxsIGl0ZW1zIGFzIHNpbXBsZSByb3dzIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJFeGlzdGluZ1Jvdyhyb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncywgaW5kZXgsIHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmxlbmd0aCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJDdXN0b21Sb3cocm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MsIGluZGV4LCBzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5sZW5ndGgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXHJcblx0XHRpZiAoc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYWRkR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgdW5kZWZpbmVkLCAndWktdHdlYWtlcicpO1xyXG5cdFx0YWRkR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0FkZCBjb21tYW5kJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQWRkIGEgbmV3IGNvbW1hbmQgYnV0dG9uIHRvIHRoZSBzdGF0dXMgYmFyJylcclxuXHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIEFkZCBpY29uIHRvIHRoZSBidXR0b25cclxuXHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gYnV0dG9uLmJ1dHRvbkVsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbkNvbnRhaW5lciA9IGJ1dHRvbkVsLmNyZWF0ZVNwYW4oeyBjbHM6ICd1aS10d2Vha2VyLWFkZC1pY29uJyB9KTtcclxuXHRcdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ2x1Y2lkZS1pbWFnZS1wbHVzJyk7XHJcblx0XHRcdFx0XHRidXR0b25FbC5pbnNlcnRCZWZvcmUoaWNvbkNvbnRhaW5lciwgYnV0dG9uRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dCgnQWRkIGNvbW1hbmQnKS5zZXRDdGEoKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYWlyID0gYXdhaXQgY2hvb3NlTmV3Q29tbWFuZCh0aGlzLnBsdWdpbik7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5hZGRDdXN0b21Db21tYW5kKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2F2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgYW5kIHJlc3RvcmUgc2Nyb2xsXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlciBjYW5jZWxsZWRcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVyIGFuIGV4aXN0aW5nIHN0YXR1cyBiYXIgaXRlbSByb3cgKEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlbmRlckV4aXN0aW5nUm93KHJvd3NDb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtOiBTdGF0dXNCYXJJdGVtLCBzZXR0aW5nczogVUlTZXR0aW5ncywgaW5kZXg6IG51bWJlciwgdG90YWxJdGVtczogbnVtYmVyKTogdm9pZCB7XHJcblx0XHQvLyBHZXQgdGhlIGFjdHVhbCBzdGF0dXMgYmFyIGVsZW1lbnQgZm9yIHByZXZpZXdcclxuXHRcdGNvbnN0IHN0YXR1c0JhckNvbnRhaW5lciA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgeyBzdGF0dXNCYXI/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSB9KS5zdGF0dXNCYXI/LmNvbnRhaW5lckVsO1xyXG5cdFx0Y29uc3QgYWN0dWFsRWxlbWVudCA9IHN0YXR1c0JhckNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkPVwiJHtpdGVtLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y29uc3QgZXhpc3RzID0gISFhY3R1YWxFbGVtZW50O1xyXG5cclxuXHRcdC8vIENyZWF0ZSByb3dcclxuXHRcdGNvbnN0IGVudHJ5ID0gcm93c0NvbnRhaW5lci5jcmVhdGVEaXYoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3cnKTtcclxuXHRcdGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXJvdycpO1xyXG5cdFx0aWYgKCFleGlzdHMpIGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWRpc2FibGVkJyk7XHJcblx0XHRpZiAoaXRlbS5oaWRkZW4pIGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xyXG5cdFx0ZW50cnkuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItaWQnLCBpdGVtLmlkKTtcclxuXHJcblx0XHQvLyBEcmFnIGhhbmRsZVxyXG5cdFx0Y29uc3QgaGFuZGxlID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oYW5kbGUnKTtcclxuXHRcdGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+XHJcblx0XHRcdHRoaXMuaGFuZGxlTW91c2VEb3duKGV2ZW50LCByb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncylcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gVGl0bGVcclxuXHRcdGNvbnN0IHRpdGxlU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdGl0bGUnKTtcclxuXHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcclxuXHJcblx0XHQvLyBQcmV2aWV3XHJcblx0XHRjb25zdCBwcmV2aWV3U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcHJldmlldycpO1xyXG5cdFx0aWYgKGV4aXN0cyAmJiBhY3R1YWxFbGVtZW50KSB7XHJcblx0XHRcdC8vIENsb25lIHRoZSBlbGVtZW50IGluc3RlYWQgb2YgdXNpbmcgaW5uZXJIVE1MXHJcblx0XHRcdGNvbnN0IGNsb25lZCA9IGFjdHVhbEVsZW1lbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHQvLyBFbnN1cmUgY2xvbmVkIGVsZW1lbnQgYW5kIGFsbCBjaGlsZHJlbiBhcmUgdmlzaWJsZVxyXG5cdFx0XHRzZXRDc3NQcm9wcyhjbG9uZWQsIHsgZGlzcGxheTogJycsIHZpc2liaWxpdHk6ICcnLCBvcGFjaXR5OiAnJyB9KTtcclxuXHRcdFx0Ly8gTWFrZSBzdXJlIGFsbCBjaGlsZCBlbGVtZW50cyBhcmUgdmlzaWJsZVxyXG5cdFx0XHRjbG9uZWQucXVlcnlTZWxlY3RvckFsbCgnKicpLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoY2hpbGQgYXMgSFRNTEVsZW1lbnQsIHsgZGlzcGxheTogJycsIHZpc2liaWxpdHk6ICcnLCBvcGFjaXR5OiAnJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHByZXZpZXdTcGFuLmFwcGVuZENoaWxkKGNsb25lZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRW1wdHkgc3BhbnMgZm9yIGN1c3RvbSBpdGVtIG9wdGlvbnMgKGV4aXN0aW5nIGl0ZW1zIGRvbid0IGhhdmUgdGhlc2UpXHJcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXJlc2V0LWNvbG9yJyk7IC8vIEVtcHR5XHJcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWNvbG9yLXBpY2tlcicpOyAvLyBFbXB0eVxyXG5cdFx0Ly8gRGV2aWNlIG1vZGUgaWNvbiByZW1vdmVkIC0gc3RhdHVzIGJhciBub3QgdmlzaWJsZSBvbiBtb2JpbGUsIHNvIG5vIG5lZWQgZm9yIGRldmljZSBpbmRpY2F0b3JzXHJcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LW1kLW9ubHknKTsgLy8gRW1wdHlcclxuXHJcblx0XHQvLyBMb2NrIGljb24gKG5ldyBmZWF0dXJlKVxyXG5cdFx0Y29uc3QgbG9ja1NwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWxvY2snKTtcclxuXHRcdGNvbnN0IGxvY2tJY29uID0gaXRlbS5zdGlja3kgPT09ICdyaWdodCcgPyAnY29ybmVyLXJpZ2h0LWRvd24nIDogKGl0ZW0uc3RpY2t5ID09PSAnbGVmdCcgPyAnY29ybmVyLXJpZ2h0LXVwJyA6ICd1bmxvY2snKTtcclxuXHRcdGxvY2tTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uc3RpY2t5ID8gYFBpbm5lZCB0byAke2l0ZW0uc3RpY2t5ID09PSAncmlnaHQnID8gJ0VuZCcgOiAnU3RhcnQnfWAgOiAnVW5sb2NrZWQgLSBjbGljayB0byBwaW4gdG8gZW5kJyk7XHJcblx0XHRsb2NrU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdHRoaXMudG9nZ2xlTG9jayhpdGVtLCBsb2NrU3BhbiwgaW5kZXgsIHRvdGFsSXRlbXMsIHJvd3NDb250YWluZXIsIHNldHRpbmdzKTtcclxuXHRcdH0pO1xyXG5cdFx0c2V0SWNvbihsb2NrU3BhbiwgbG9ja0ljb24pO1xyXG5cdFx0aWYgKGl0ZW0uc3RpY2t5KSB7XHJcblx0XHRcdGxvY2tTcGFuLmFkZENsYXNzKCd1aS10d2Vha2VyLWxvY2tlZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERlbGV0ZSBpY29uIGZvciBjdXN0b20gaXRlbXMsIHZpc2liaWxpdHkgaWNvbiBmb3IgZXhpc3RpbmcgaXRlbXNcclxuXHRcdGNvbnN0IHZpc2liaWxpdHlTcGFuID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy12aXNpYmlsaXR5Jyk7XHJcblx0XHRpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHQvLyBDdXN0b20gaXRlbXM6IHNob3cgdHJhc2ggaWNvbiAocmVkL3dhcm5pbmcpXHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdEZWxldGUgaXRlbScpO1xyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRDbGFzcygnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0c2V0Q3NzUHJvcHModmlzaWJpbGl0eVNwYW4sIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5yZW1vdmVJdGVtKHJvd3NDb250YWluZXIsIGl0ZW0sIHNldHRpbmdzKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sICd0cmFzaC0yJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBFeGlzdGluZyBpdGVtczogc2hvdyB2aXNpYmlsaXR5IHRvZ2dsZVxyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLmhpZGRlbiA/ICdIaWRkZW4gLSBjbGljayB0byBzaG93JyA6ICdWaXNpYmxlIC0gY2xpY2sgdG8gaGlkZScpO1xyXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnRvZ2dsZVZpc2liaWxpdHkoaXRlbSwgdmlzaWJpbGl0eVNwYW4sIGVudHJ5KTtcclxuXHRcdFx0XHQvLyB0b2dnbGVWaXNpYmlsaXR5IGFscmVhZHkgY2FsbHMgc2F2ZVNldHRpbmdzKClcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sIGl0ZW0uaGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVyIGEgY3VzdG9tIHN0YXR1cyBiYXIgaXRlbSByb3cgKEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplciwgYnV0IHdpdGggZWRpdGFibGUgbmFtZSlcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlbmRlckN1c3RvbVJvdyhyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogU3RhdHVzQmFySXRlbSwgc2V0dGluZ3M6IFVJU2V0dGluZ3MsIGluZGV4OiBudW1iZXIsIHRvdGFsSXRlbXM6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0Ly8gQ3JlYXRlIHJvd1xyXG5cdFx0Y29uc3QgZW50cnkgPSByb3dzQ29udGFpbmVyLmNyZWF0ZURpdigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdycpO1xyXG5cdFx0ZW50cnkuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItcm93Jyk7XHJcblx0XHRpZiAoaXRlbS5oaWRkZW4pIGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xyXG5cdFx0ZW50cnkuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItaWQnLCBpdGVtLmlkKTtcclxuXHJcblx0XHQvLyBEcmFnIGhhbmRsZVxyXG5cdFx0Y29uc3QgaGFuZGxlID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oYW5kbGUnKTtcclxuXHRcdGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+XHJcblx0XHRcdHRoaXMuaGFuZGxlTW91c2VEb3duKGV2ZW50LCByb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncylcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gVGl0bGUgd2l0aCBlZGl0YWJsZSBuYW1lXHJcblx0XHRjb25zdCB0aXRsZVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXRpdGxlJyk7XHJcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGl0ZW0uZGlzcGxheU5hbWUgfHwgaXRlbS5uYW1lO1xyXG5cdFx0Y29uc3QgbmFtZVRleHQgPSBpdGVtLm5hbWUgPT09IGRpc3BsYXlOYW1lID8gaXRlbS5uYW1lIDogYCR7aXRlbS5uYW1lfSAoJHtkaXNwbGF5TmFtZX0pYDtcclxuXHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IG5hbWVUZXh0O1xyXG5cclxuXHRcdC8vIE1ha2UgdGl0bGUgZWRpdGFibGUgb24gY2xpY2tcclxuXHRcdHRpdGxlU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBpdGVtLm5hbWU7XHJcblx0XHRcdGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdFx0aW5wdXQudHlwZSA9ICd0ZXh0JztcclxuXHRcdFx0aW5wdXQudmFsdWUgPSBjdXJyZW50TmFtZTtcclxuXHRcdFx0aW5wdXQuYWRkQ2xhc3MoJ21vZC10ZXh0LWlucHV0Jyk7XHJcblx0XHRcdHNldENzc1Byb3BzKGlucHV0LCB7IHdpZHRoOiAnMTAwJScgfSk7XHJcblx0XHRcdHRpdGxlU3Bhbi5lbXB0eSgpO1xyXG5cdFx0XHR0aXRsZVNwYW4uYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG5cdFx0XHRpbnB1dC5mb2N1cygpO1xyXG5cdFx0XHRpbnB1dC5zZWxlY3QoKTtcclxuXHJcblx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRcdGxldCBuZXdOYW1lID0gaW5wdXQudmFsdWUudHJpbSgpO1xyXG5cdFx0XHRcdGlmICghbmV3TmFtZSkgbmV3TmFtZSA9IGN1cnJlbnROYW1lO1xyXG5cdFx0XHRcdGl0ZW0ubmFtZSA9IG5ld05hbWU7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8udXBkYXRlQnV0dG9uTmFtZXMoKTtcclxuXHRcdFx0XHR0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBuZXdOYW1lID09PSBkaXNwbGF5TmFtZSA/IG5ld05hbWUgOiBgJHtuZXdOYW1lfSAoJHtkaXNwbGF5TmFtZX0pYDtcclxuXHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRcdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHNhdmVOYW1lKCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IG5hbWVUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBQcmV2aWV3XHJcblx0XHRjb25zdCBwcmV2aWV3U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcHJldmlldycpO1xyXG5cdFx0aWYgKGl0ZW0uaWNvbikge1xyXG5cdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IHByZXZpZXdTcGFuLmNyZWF0ZVNwYW4oJ3N0YXR1cy1iYXItaXRlbSBtb2QtY2xpY2thYmxlJyk7XHJcblx0XHRcdHNldEljb24ocHJldmlld0ljb24sIGl0ZW0uaWNvbik7XHJcblx0XHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKHByZXZpZXdJY29uLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVzZXQgY29sb3IgYnV0dG9uIChvbmx5IHNob3cgaWYgY29sb3IgaXMgc2V0KVxyXG5cdFx0Y29uc3QgcmVzZXRDb2xvckNvbnRhaW5lciA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcmVzZXQtY29sb3InKTtcclxuXHRcdGlmIChpdGVtLmNvbG9yKSB7XHJcblx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gcmVzZXRDb2xvckNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ3JvdGF0ZS1jdycpO1xyXG5cdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRpdGVtLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBwcmV2aWV3IGljb25cclxuXHRcdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IHByZXZpZXdTcGFuLnF1ZXJ5U2VsZWN0b3IoJy5jbGlja2FibGUtaWNvbicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGlmIChwcmV2aWV3SWNvbikge1xyXG5cdFx0XHRcdFx0cHJldmlld0ljb24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHVwZGF0ZSBVSVxyXG5cdFx0XHRcdGlmICh0aGlzLmNvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXIodGhpcy5jb250YWluZXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ29sb3IgcGlja2VyIChPYnNpZGlhbidzIG5hdGl2ZSBjb21wb25lbnQpXHJcblx0XHRjb25zdCBjb2xvclBpY2tlckNvbnRhaW5lciA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY29sb3ItcGlja2VyJyk7XHJcblx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29sb3JQaWNrZXJDb250YWluZXIuY3JlYXRlRGl2KCk7XHJcblx0XHRjb25zdCBjb2xvclBpY2tlciA9IG5ldyBDb2xvckNvbXBvbmVudChjb2xvclBpY2tlckVsKTtcclxuXHRcdGNvbG9yUGlja2VyLnNldFZhbHVlKGl0ZW0uY29sb3IgfHwgJyMwMDAwMDAnKTtcclxuXHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRpZiAodmFsdWUgPT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdGl0ZW0uY29sb3IgPSB1bmRlZmluZWQ7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aXRlbS5jb2xvciA9IHZhbHVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFVwZGF0ZSBwcmV2aWV3IGljb24gY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdGNvbnN0IHByZXZpZXdJY29uID0gcHJldmlld1NwYW4ucXVlcnlTZWxlY3RvcignLmNsaWNrYWJsZS1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmIChwcmV2aWV3SWNvbikge1xyXG5cdFx0XHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMocHJldmlld0ljb24sIHsgY29sb3I6IGl0ZW0uY29sb3IgfSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHByZXZpZXdJY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSByZXNldCBidXR0b25cclxuXHRcdFx0aWYgKHRoaXMuY29udGFpbmVyKSB7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXIodGhpcy5jb250YWluZXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEZXZpY2UgbW9kZSBpY29uIC0gcmVtb3ZlZCAoc3RhdHVzIGJhciBub3QgdmlzaWJsZSBvbiBtb2JpbGUsIHNvIG5vIG5lZWQgZm9yIGRldmljZSBpbmRpY2F0b3JzKVxyXG5cclxuXHRcdC8vIE1ELW9ubHkgaWNvblxyXG5cdFx0Y29uc3QgbWRPbmx5U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbWQtb25seScpO1xyXG5cdFx0bWRPbmx5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLm1kT25seSA/ICdPbmx5IHNob3cgb24gTWFya2Rvd24gZmlsZXMgKGVuYWJsZWQpJyA6ICdPbmx5IHNob3cgb24gTWFya2Rvd24gZmlsZXMgKGRpc2FibGVkKScpO1xyXG5cdFx0bWRPbmx5U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGl0ZW0ubWRPbmx5ID0gIWl0ZW0ubWRPbmx5O1xyXG5cdFx0XHRzZXRJY29uKG1kT25seVNwYW4sIGl0ZW0ubWRPbmx5ID8gJ2ZpbGUtY2hlY2snIDogJ2ZpbGUteCcpO1xyXG5cdFx0XHRtZE9ubHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0ubWRPbmx5ID8gJ09ubHkgc2hvdyBvbiBNYXJrZG93biBmaWxlcyAoZW5hYmxlZCknIDogJ09ubHkgc2hvdyBvbiBNYXJrZG93biBmaWxlcyAoZGlzYWJsZWQpJyk7XHJcblx0XHRcdGlmIChpdGVtLm1kT25seSkge1xyXG5cdFx0XHRcdG1kT25seVNwYW4uYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItYWN0aXZlJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bWRPbmx5U3Bhbi5yZW1vdmVDbGFzcygndWktdHdlYWtlci1hY3RpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH0pO1xyXG5cdFx0c2V0SWNvbihtZE9ubHlTcGFuLCBpdGVtLm1kT25seSA/ICdmaWxlLWNoZWNrJyA6ICdmaWxlLXgnKTtcclxuXHRcdGlmIChpdGVtLm1kT25seSkge1xyXG5cdFx0XHRtZE9ubHlTcGFuLmFkZENsYXNzKCd1aS10d2Vha2VyLWFjdGl2ZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIExvY2sgaWNvbiAobmV3IGZlYXR1cmUpXHJcblx0XHRjb25zdCBsb2NrU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbG9jaycpO1xyXG5cdFx0Y29uc3QgbG9ja0ljb24gPSBpdGVtLnN0aWNreSA9PT0gJ3JpZ2h0JyA/ICdjb3JuZXItcmlnaHQtZG93bicgOiAoaXRlbS5zdGlja3kgPT09ICdsZWZ0JyA/ICdjb3JuZXItcmlnaHQtdXAnIDogJ3VubG9jaycpO1xyXG5cdFx0bG9ja1NwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5zdGlja3kgPyBgUGlubmVkIHRvICR7aXRlbS5zdGlja3kgPT09ICdyaWdodCcgPyAnRW5kJyA6ICdTdGFydCd9YCA6ICdVbmxvY2tlZCAtIGNsaWNrIHRvIHBpbiB0byBlbmQnKTtcclxuXHRcdGxvY2tTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0dGhpcy50b2dnbGVMb2NrKGl0ZW0sIGxvY2tTcGFuLCBpbmRleCwgdG90YWxJdGVtcywgcm93c0NvbnRhaW5lciwgc2V0dGluZ3MpO1xyXG5cdFx0fSk7XHJcblx0XHRzZXRJY29uKGxvY2tTcGFuLCBsb2NrSWNvbik7XHJcblx0XHRpZiAoaXRlbS5zdGlja3kpIHtcclxuXHRcdFx0bG9ja1NwYW4uYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbG9ja2VkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGVsZXRlIGljb24gZm9yIGN1c3RvbSBpdGVtcywgdmlzaWJpbGl0eSBpY29uIGZvciBleGlzdGluZyBpdGVtc1xyXG5cdFx0Y29uc3QgdmlzaWJpbGl0eVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXZpc2liaWxpdHknKTtcclxuXHRcdGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdC8vIEN1c3RvbSBpdGVtczogc2hvdyB0cmFzaCBpY29uIChyZWQvd2FybmluZylcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0RlbGV0ZSBpdGVtJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRzZXRDc3NQcm9wcyh2aXNpYmlsaXR5U3BhbiwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUl0ZW0ocm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgJ3RyYXNoLTInKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEV4aXN0aW5nIGl0ZW1zOiBzaG93IHZpc2liaWxpdHkgdG9nZ2xlXHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uaGlkZGVuID8gJ0hpZGRlbiAtIGNsaWNrIHRvIHNob3cnIDogJ1Zpc2libGUgLSBjbGljayB0byBoaWRlJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMudG9nZ2xlVmlzaWJpbGl0eShpdGVtLCB2aXNpYmlsaXR5U3BhbiwgZW50cnkpO1xyXG5cdFx0XHRcdC8vIHRvZ2dsZVZpc2liaWxpdHkgYWxyZWFkeSBjYWxscyBzYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgaXRlbS5oaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUb2dnbGUgbG9jayBwb3NpdGlvbiBiYXNlZCBvbiBjdXJyZW50IHBvc2l0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSB0b2dnbGVMb2NrKFxyXG5cdFx0aXRlbTogU3RhdHVzQmFySXRlbSxcclxuXHRcdGxvY2tTcGFuOiBIVE1MRWxlbWVudCxcclxuXHRcdGN1cnJlbnRJbmRleDogbnVtYmVyLFxyXG5cdFx0dG90YWxJdGVtczogbnVtYmVyLFxyXG5cdFx0cm93c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRzZXR0aW5nczogVUlTZXR0aW5nc1xyXG5cdCk6IHZvaWQge1xyXG5cdFx0Ly8gQ3ljbGU6IGZhbHNlIC0+ICdyaWdodCcgKEVuZCkgLT4gJ2xlZnQnIChTdGFydCkgLT4gZmFsc2UgKFVubG9jaylcclxuXHRcdGlmICghaXRlbS5zdGlja3kpIHtcclxuXHRcdFx0aXRlbS5zdGlja3kgPSAncmlnaHQnO1xyXG5cdFx0XHQvLyBNb3ZlIHRvIGVuZCBvZiBhcnJheVxyXG5cdFx0XHRjb25zdCBvbGRJbmRleCA9IHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmZpbmRJbmRleChpID0+IGkuaWQgPT09IGl0ZW0uaWQpO1xyXG5cdFx0XHRpZiAob2xkSW5kZXggIT09IC0xKSB7XHJcblx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcywgb2xkSW5kZXgsIHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmxlbmd0aCAtIDEpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnKSB7XHJcblx0XHRcdGl0ZW0uc3RpY2t5ID0gJ2xlZnQnO1xyXG5cdFx0XHQvLyBNb3ZlIHRvIHN0YXJ0IG9mIGFycmF5XHJcblx0XHRcdGNvbnN0IG9sZEluZGV4ID0gc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gaXRlbS5pZCk7XHJcblx0XHRcdGlmIChvbGRJbmRleCAhPT0gLTEpIHtcclxuXHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLCBvbGRJbmRleCwgMCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGl0ZW0uc3RpY2t5ID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXBkYXRlIHN0YXR1cyBiYXIgb3JkZXJcclxuXHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHJcblx0XHQvLyBGdWxsIHJlLXJlbmRlciBvZiB0aGUgc2V0dGluZ3MgdGFiIHRvIHJlZmxlY3QgbmV3IG9yZGVyIGluIHRoZSBVSSBsaXN0XHJcblx0XHRpZiAodGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0dGhpcy5yZW5kZXIodGhpcy5jb250YWluZXIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVG9nZ2xlIHZpc2liaWxpdHkgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHQgKi9cclxuXHRwcml2YXRlIHRvZ2dsZVZpc2liaWxpdHkoaXRlbTogU3RhdHVzQmFySXRlbSwgdmlzaWJpbGl0eVNwYW46IEhUTUxFbGVtZW50LCBlbnRyeTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGl0ZW0uaGlkZGVuID0gIWl0ZW0uaGlkZGVuO1xyXG5cclxuXHRcdGlmIChpdGVtLmhpZGRlbikge1xyXG5cdFx0XHRlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcclxuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgJ2V5ZS1vZmYnKTtcclxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0hpZGRlbiAtIGNsaWNrIHRvIHNob3cnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGVudHJ5LnJlbW92ZUNsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xyXG5cdFx0XHRzZXRJY29uKHZpc2liaWxpdHlTcGFuLCAnZXllJyk7XHJcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdWaXNpYmxlIC0gY2xpY2sgdG8gaGlkZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTsgLy8gU2F2ZSB0aGUgaGlkZGVuIHN0YXRlXHJcblx0fVxyXG5cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIGl0ZW0gKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIHJlbW92ZUl0ZW0ocm93c0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGl0ZW06IFN0YXR1c0Jhckl0ZW0sIHNldHRpbmdzOiBVSVNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBlbnRyeSA9IHJvd3NDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1pZD1cIiR7aXRlbS5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmIChlbnRyeSkge1xyXG5cdFx0XHRyb3dzQ29udGFpbmVyLnJlbW92ZUNoaWxkKGVudHJ5KTtcclxuXHRcdH1cclxuXHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW1vdmVJdGVtKGl0ZW0pO1xyXG5cclxuXHRcdC8vIFBvc2l0aW9uIGlzIGltcGxpY2l0IGluIGFycmF5IG9yZGVyIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cclxuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZSBtb3VzZSBkb3duIGZvciBkcmFnZ2luZyAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaGFuZGxlTW91c2VEb3duKFxyXG5cdFx0ZXZlbnQ6IE1vdXNlRXZlbnQsXHJcblx0XHRyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdGl0ZW06IFN0YXR1c0Jhckl0ZW0sXHJcblx0XHRzZXR0aW5nczogVUlTZXR0aW5nc1xyXG5cdCk6IHZvaWQge1xyXG5cdFx0aWYgKGRyYWdnaW5nKSByZXR1cm47XHJcblx0XHRkcmFnZ2luZyA9IHRydWU7XHJcblxyXG5cdFx0Y29uc3QgZW50cnkgPSByb3dzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRpZiAoIWVudHJ5KSByZXR1cm47XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGNsb25lXHJcblx0XHRjb25zdCBzdGF0aW9uYXJ5Um93ID0gZW50cnk7XHJcblx0XHRzdGF0aW9uYXJ5Um93LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWNsb25lJyk7XHJcblxyXG5cdFx0Y29uc3QgbW92YWJsZVJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0bW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdycpO1xyXG5cdFx0bW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kcmFnJyk7XHJcblx0XHQvLyBFbnN1cmUgZ3JpZCBzdHJ1Y3R1cmUgaXMgbWFpbnRhaW5lZFxyXG5cdFx0c2V0Q3NzUHJvcHMobW92YWJsZVJvdywge1xyXG5cdFx0XHRkaXNwbGF5OiAnZ3JpZCcsXHJcblx0XHRcdGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICcxLjI1ZW0gMC41ZnIgMC44ZnIgMmVtIDJlbSAyZW0gMmVtIDJlbSAyZW0nXHJcblx0XHR9KTtcclxuXHRcdGlmIChpdGVtLmhpZGRlbikgbW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcclxuXHRcdGlmIChpdGVtLnR5cGUgPT09ICdleGlzdGluZycpIHtcclxuXHRcdFx0Y29uc3Qgc3RhdHVzQmFyQ29udGFpbmVyID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IHN0YXR1c0Jhcj86IHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9IH0pLnN0YXR1c0Jhcj8uY29udGFpbmVyRWw7XHJcblx0XHRcdGNvbnN0IGFjdHVhbEVsZW1lbnQgPSBzdGF0dXNCYXJDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmICghYWN0dWFsRWxlbWVudCkgbW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kaXNhYmxlZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCB0aGUgd3JhcHBlciBjb250YWluZXJcclxuXHRcdGNvbnN0IHdyYXBwZXIgPSByb3dzQ29udGFpbmVyLmNsb3Nlc3QoJy51aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy13cmFwcGVyJykgfHxcclxuXHRcdFx0cm93c0NvbnRhaW5lci5wYXJlbnRFbGVtZW50IHx8XHJcblx0XHRcdHJvd3NDb250YWluZXI7XHJcblx0XHR3cmFwcGVyLmFwcGVuZENoaWxkKG1vdmFibGVSb3cpO1xyXG5cclxuXHRcdC8vIEdldCBwb3NpdGlvbiByZWxhdGl2ZSB0byB3cmFwcGVyIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRjb25zdCBjb250YWluZXJYID0gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG5cdFx0Y29uc3QgY29udGFpbmVyWSA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cclxuXHRcdC8vIFBvc2l0aW9uIG1vdmFibGUgcm93IChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRjb25zdCBzdGF0aW9uYXJ5UmVjdCA9IHN0YXRpb25hcnlSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRzZXRDc3NQcm9wcyhtb3ZhYmxlUm93LCB7XHJcblx0XHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG5cdFx0XHRsZWZ0OiAoc3RhdGlvbmFyeVJlY3QubGVmdCAtIGNvbnRhaW5lclgpICsgJ3B4JyxcclxuXHRcdFx0dG9wOiAoc3RhdGlvbmFyeVJlY3QudG9wIC0gY29udGFpbmVyWSkgKyAncHgnLFxyXG5cdFx0XHR3aWR0aDogc3RhdGlvbmFyeVJvdy5vZmZzZXRXaWR0aCArICdweCdcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBzaW1wbGlmaWVkIGRyYWcgcHJldmlldyAoZG9uJ3QgY2xvbmUgY29tcGxleCBlbGVtZW50cyB0byBhdm9pZCBicmVha2luZylcclxuXHRcdC8vIEp1c3Qgc2hvdyB0aXRsZSBhbmQgcHJldmlldywgc2tpcCBpbnRlcmFjdGl2ZSBlbGVtZW50c1xyXG5cdFx0bW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhhbmRsZScpO1xyXG5cdFx0Y29uc3QgZHJhZ1RpdGxlID0gbW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXRpdGxlJyk7XHJcblx0XHRkcmFnVGl0bGUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XHJcblx0XHRjb25zdCBkcmFnUHJldmlldyA9IG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1wcmV2aWV3Jyk7XHJcblx0XHQvLyBGb3IgZXhpc3RpbmcgaXRlbXMsIHRyeSB0byBjbG9uZSBwcmV2aWV3IGlmIGF2YWlsYWJsZVxyXG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJykge1xyXG5cdFx0XHRjb25zdCBzdGF0dXNCYXJDb250YWluZXIgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgc3RhdHVzQmFyPzogeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH0gfSkuc3RhdHVzQmFyPy5jb250YWluZXJFbDtcclxuXHRcdFx0Y29uc3QgYWN0dWFsRWxlbWVudCA9IHN0YXR1c0JhckNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkPVwiJHtpdGVtLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoYWN0dWFsRWxlbWVudCkge1xyXG5cdFx0XHRcdGNvbnN0IGNsb25lZCA9IGFjdHVhbEVsZW1lbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdC8vIFJlbW92ZSB0b29sdGlwIGF0dHJpYnV0ZXMgZnJvbSBjbG9uZWQgZWxlbWVudFxyXG5cdFx0XHRcdGNsb25lZC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcclxuXHRcdFx0XHRjbG9uZWQucmVtb3ZlQXR0cmlidXRlKCd0aXRsZScpO1xyXG5cdFx0XHRcdC8vIEFsc28gcmVtb3ZlIGZyb20gYW55IGNoaWxkcmVuXHJcblx0XHRcdFx0Y2xvbmVkLnF1ZXJ5U2VsZWN0b3JBbGwoJ1thcmlhLWxhYmVsXSwgW3RpdGxlXScpLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0XHRcdFx0ZWwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XHJcblx0XHRcdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0ZHJhZ1ByZXZpZXcuYXBwZW5kQ2hpbGQoY2xvbmVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChpdGVtLmljb24pIHtcclxuXHRcdFx0Y29uc3QgcHJldmlld0ljb24gPSBkcmFnUHJldmlldy5jcmVhdGVTcGFuKCdzdGF0dXMtYmFyLWl0ZW0gY2xpY2thYmxlLWljb24nKTtcclxuXHRcdFx0c2V0SWNvbihwcmV2aWV3SWNvbiwgaXRlbS5pY29uKTtcclxuXHRcdFx0Ly8gUmVtb3ZlIGFueSB0b29sdGlwIGF0dHJpYnV0ZXMgZnJvbSBkcmFnIHByZXZpZXdcclxuXHRcdFx0cHJldmlld0ljb24ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XHJcblx0XHRcdHByZXZpZXdJY29uLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcclxuXHRcdFx0aWYgKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMocHJldmlld0ljb24sIHsgY29sb3I6IGl0ZW0uY29sb3IgfSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vIEFkZCBlbXB0eSBzcGFucyBmb3IgdGhlIGljb24gY29sdW1ucyB0byBtYWludGFpbiBncmlkIHN0cnVjdHVyZVxyXG5cdFx0bW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXJlc2V0LWNvbG9yJyk7XHJcblx0XHRtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY29sb3ItcGlja2VyJyk7XHJcblx0XHQvLyBEZXZpY2UgbW9kZSBpY29uIHJlbW92ZWQgLSBzdGF0dXMgYmFyIG5vdCB2aXNpYmxlIG9uIG1vYmlsZSwgc28gbm8gbmVlZCBmb3IgZGV2aWNlIGluZGljYXRvcnNcclxuXHRcdG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1tZC1vbmx5Jyk7XHJcblx0XHRjb25zdCBkcmFnTG9jayA9IG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1sb2NrJyk7XHJcblx0XHRjb25zdCBsb2NrSWNvbiA9IGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnID8gJ2Nvcm5lci1yaWdodC1kb3duJyA6IChpdGVtLnN0aWNreSA9PT0gJ2xlZnQnID8gJ2Nvcm5lci1yaWdodC11cCcgOiAndW5sb2NrJyk7XHJcblx0XHRzZXRJY29uKGRyYWdMb2NrLCBsb2NrSWNvbik7XHJcblx0XHRjb25zdCBkcmFnVmlzaWJpbGl0eSA9IG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy12aXNpYmlsaXR5Jyk7XHJcblx0XHRzZXRJY29uKGRyYWdWaXNpYmlsaXR5LCBpdGVtLmhpZGRlbiA/ICdleWUtb2ZmJyA6ICdleWUnKTtcclxuXHJcblx0XHQvLyBDYWxjdWxhdGUgb2Zmc2V0cyAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0Ly8gRmlyc3QgZ2V0IHRoZSBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgbW92YWJsZVJvd1xyXG5cdFx0bGV0IG9mZnNldFggPSBldmVudC5jbGllbnRYIC0gbW92YWJsZVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG5cdFx0bGV0IG9mZnNldFkgPSBldmVudC5jbGllbnRZIC0gbW92YWJsZVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcblx0XHQvLyBUaGVuIGFkZCBjb250YWluZXIgb2Zmc2V0IChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRvZmZzZXRYID0gb2Zmc2V0WCArIGNvbnRhaW5lclg7XHJcblx0XHRvZmZzZXRZID0gb2Zmc2V0WSArIGNvbnRhaW5lclk7XHJcblx0XHRsZXQgaW5kZXggPSBBcnJheS5mcm9tKHJvd3NDb250YWluZXIuY2hpbGRyZW4pLmluZGV4T2Yoc3RhdGlvbmFyeVJvdyk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIG1vdXNlIG1vdmUgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcclxuXHRcdGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdC8vIFVwZGF0ZSBwb3NpdGlvbiAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0XHQvLyBvZmZzZXRYL29mZnNldFkgYWxyZWFkeSBpbmNsdWRlIGNvbnRhaW5lclgvY29udGFpbmVyWVxyXG5cdFx0XHRzZXRDc3NQcm9wcyhtb3ZhYmxlUm93LCB7XHJcblx0XHRcdFx0bGVmdDogKGUuY2xpZW50WCAtIG9mZnNldFgpICsgJ3B4JyxcclxuXHRcdFx0XHR0b3A6IChlLmNsaWVudFkgLSBvZmZzZXRZKSArICdweCdcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgZGlzdGFuY2UgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRcdGNvbnN0IGRpc3QgPSBtb3ZhYmxlUm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIHN0YXRpb25hcnlSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cclxuXHRcdFx0Ly8gSWYgbW92ZWQgZmFyIGVub3VnaCwgY2hhbmdlIHBvc2l0aW9uIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxyXG5cdFx0XHRpZiAoTWF0aC5hYnMoZGlzdCkgPiBzdGF0aW9uYXJ5Um93Lm9mZnNldEhlaWdodCAqIDAuNzUpIHtcclxuXHRcdFx0XHRjb25zdCBkaXIgPSBkaXN0IC8gTWF0aC5hYnMoZGlzdCk7XHJcblx0XHRcdFx0Y29uc3QgbmV3SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpbmRleCArIGRpciwgcm93c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxKSk7XHJcblx0XHRcdFx0aWYgKG5ld0luZGV4ICE9PSBpbmRleCkge1xyXG5cdFx0XHRcdFx0Ly8gTW92ZSBpbiBET00gKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXHJcblx0XHRcdFx0XHRyb3dzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHN0YXRpb25hcnlSb3cpO1xyXG5cdFx0XHRcdFx0aWYgKG5ld0luZGV4IDwgcm93c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0cm93c0NvbnRhaW5lci5pbnNlcnRCZWZvcmUoc3RhdGlvbmFyeVJvdywgcm93c0NvbnRhaW5lci5jaGlsZHJlbltuZXdJbmRleF0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0cm93c0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0aW9uYXJ5Um93KTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgYXJyYXkgb3JkZXIgKGRvbid0IHNhdmUgZHVyaW5nIGRyYWcgLSB3YWl0IGZvciBtb3VzZSB1cClcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBvbGRJbmRleCA9IHNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLmZpbmRJbmRleCgoaTogU3RhdHVzQmFySXRlbSkgPT4gaS5pZCA9PT0gaXRlbS5pZCk7XHJcblx0XHRcdFx0XHRcdGlmIChvbGRJbmRleCAhPT0gLTEgJiYgb2xkSW5kZXggIT09IG5ld0luZGV4KSB7XHJcblx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcywgb2xkSW5kZXgsIG5ld0luZGV4KTtcclxuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGFjdHVhbCBzdGF0dXMgYmFyIG9yZGVyIGltbWVkaWF0ZWx5ICh2aXN1YWwgZmVlZGJhY2spXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdC8vIERvbid0IHNhdmVTZXR0aW5ncyBkdXJpbmcgZHJhZyAtIHdhaXQgZm9yIG1vdXNlIHVwIHRvIHNhdmUgcG9zaXRpb25cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGluZGV4ID0gbmV3SW5kZXg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIEhhbmRsZSBtb3VzZSB1cFxyXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHtcclxuXHRcdFx0Ly8gQ2xlYW4gdXAgZHJhZyB2aXN1YWxzXHJcblx0XHRcdHN0YXRpb25hcnlSb3cucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY2xvbmUnKTtcclxuXHRcdFx0aWYgKG1vdmFibGVSb3cucGFyZW50RWxlbWVudCA9PT0gd3JhcHBlcikge1xyXG5cdFx0XHRcdHdyYXBwZXIucmVtb3ZlQ2hpbGQobW92YWJsZVJvdyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XHJcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgc3RhdHVzIGJhciBvcmRlciBhbmQgc2F2ZSBwb3NpdGlvbiBhZnRlciBkcmFnIGNvbXBsZXRlc1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEV4cGxvcmVyIFRhYiAtIEN1c3RvbSBjb21tYW5kIGJ1dHRvbnMgZm9yIGZpbGUgZXhwbG9yZXIgbmF2aWdhdGlvbiBhcmVhXHJcbiAqIEJhc2VkIG9uIFRhYkJhclRhYiwgYnV0IGZvciBleHBsb3JlciBidXR0b25zIHdpdGggbmF0aXZlIENTUyBjbGFzc2VzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyLCBFeHBsb3JlckJ1dHRvbkl0ZW0gfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCB7IGNob29zZU5ld0NvbW1hbmQgfSBmcm9tICcuLi8uLi91dGlscy9jaG9vc2VDb21tYW5kJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5cclxuLy8gU2ltcGxlIGFycmF5IG1vdmUgdXRpbGl0eVxyXG5mdW5jdGlvbiBhcnJheU1vdmVNdXRhYmxlPFQ+KGFycmF5OiBUW10sIGZyb206IG51bWJlciwgdG86IG51bWJlcik6IHZvaWQge1xyXG5cdGNvbnN0IGl0ZW0gPSBhcnJheVtmcm9tXTtcclxuXHRhcnJheS5zcGxpY2UoZnJvbSwgMSk7XHJcblx0YXJyYXkuc3BsaWNlKHRvLCAwLCBpdGVtKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4cGxvcmVyVGFiIGV4dGVuZHMgVGFiUmVuZGVyZXIge1xyXG5cdHByaXZhdGUgZXhwYW5kZWRTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcclxuXHJcblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XHJcblxyXG5cdFx0Ly8gRW5zdXJlIGV4cGxvcmVyQ29tbWFuZHMgZXhpc3RzXHJcblx0XHRpZiAoIXNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMpIHtcclxuXHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcyA9IFtdO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSBleHBsb3JlckJ1dHRvbkl0ZW1zIGV4aXN0c1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zKSB7XHJcblx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMgPSBbXTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbnN1cmUgbmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMgZXhpc3RzXHJcblx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge1xyXG5cdFx0XHRcdG5ld05vdGU6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRuZXdGb2xkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRzb3J0T3JkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRhdXRvUmV2ZWFsOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0Y29sbGFwc2VBbGw6IHVuZGVmaW5lZCxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbnN1cmUgbmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucyBleGlzdHNcclxuXHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucykge1xyXG5cdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge1xyXG5cdFx0XHRcdG5ld05vdGU6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRuZXdGb2xkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRzb3J0T3JkZXI6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRhdXRvUmV2ZWFsOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0Y29sbGFwc2VBbGw6IHVuZGVmaW5lZCxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEb24ndCB0cmlnZ2VyIGNvbnNvbGlkYXRpb24gb24gcmVuZGVyIC0gb25seSB3aGVuIHNldHRpbmdzIGFjdHVhbGx5IGNoYW5nZVxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyBmbGlja2VyaW5nIHdoZW4gb3BlbmluZyBzZXR0aW5nc1xyXG5cclxuXHRcdC8vIFVuaWZpZWQgbGlzdCBvZiBhbGwgYnV0dG9ucyAobmF0aXZlLCBleHRlcm5hbCwgY3VzdG9tKVxyXG5cdFx0c2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlbmRlckJ1dHRvbkl0ZW0oY29udGFpbmVyLCBpdGVtLCBpbmRleCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXHJcblx0XHRpZiAoc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIEFkZCBzZXBhcmF0b3JcclxuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGFkZEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHRcdGFkZEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBZGQgY29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FkZCBhIG5ldyBjb21tYW5kIGJ1dHRvbiB0byB0aGUgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGFyZWEnKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gQWRkIGljb24gdG8gdGhlIGJ1dHRvblxyXG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBidXR0b24uYnV0dG9uRWw7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gYnV0dG9uRWwuY3JlYXRlU3Bhbih7IGNsczogJ3VpLXR3ZWFrZXItYWRkLWljb24nIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLWltYWdlLXBsdXMnKTtcclxuXHRcdFx0XHRcdGJ1dHRvbkVsLmluc2VydEJlZm9yZShpY29uQ29udGFpbmVyLCBidXR0b25FbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdBZGQgY29tbWFuZCcpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhaXIgPSBhd2FpdCBjaG9vc2VOZXdDb21tYW5kKHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFB1c2ggdG8gZXhwbG9yZXJDb21tYW5kc1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5wdXNoKHBhaXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGNvcnJlc3BvbmRpbmcgRXhwbG9yZXJCdXR0b25JdGVtXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpdGVtOiBFeHBsb3JlckJ1dHRvbkl0ZW0gPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBgY3VzdG9tLSR7cGFpci5pZH1gLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBwYWlyLm5hbWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGFyaWFMYWJlbDogcGFpci5uYW1lLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnY3VzdG9tJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiBwYWlyLmlkLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBwYWlyLmljb24sXHJcblx0XHRcdFx0XHRcdFx0XHRcdGRpc3BsYXlOYW1lOiBwYWlyLmRpc3BsYXlOYW1lLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlOiBwYWlyLm1vZGUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbG9yOiBwYWlyLmNvbG9yLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzaG93T25GaWxlVHlwZXM6IHBhaXIuc2hvd09uRmlsZVR5cGVzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRoaWRlT25GaWxlVHlwZXM6IHBhaXIuaGlkZU9uRmlsZVR5cGVzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0b2dnbGVJY29uOiBwYWlyLnRvZ2dsZUljb24sXHJcblx0XHRcdFx0XHRcdFx0XHRcdHVzZUFjdGl2ZUNsYXNzOiBwYWlyLnVzZUFjdGl2ZUNsYXNzLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRoaWRkZW46IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMucHVzaChpdGVtKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2VyIGNhbmNlbGxlZFxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWRkIHdhcm5pbmcgbWVzc2FnZSAobGlrZSBDb21tYW5kZXIgcGx1Z2luKVxyXG5cdFx0Y29uc3Qgd2FybmluZ0RpdiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xyXG5cdFx0XHRjbHM6ICdjYWxsb3V0JyxcclxuXHRcdFx0YXR0cjogeyAnZGF0YS1jYWxsb3V0JzogJ3dhcm5pbmcnIH1cclxuXHRcdH0pO1xyXG5cdFx0d2FybmluZ0Rpdi5jcmVhdGVFbCgncCcsIHtcclxuXHRcdFx0dGV4dDogJ1doZW4gY2xpY2tpbmcgb24gYSBjb21tYW5kIGluIHRoZSBleHBsb3JlciwgdGhlIGV4cGxvcmVyIHZpZXcgd2lsbCBiZWNvbWUgZm9jdXNlZC4gVGhpcyBtaWdodCBpbnRlcmZlcmUgd2l0aCBjb21tYW5kcyB0aGF0IGFyZSBzdXBwb3NlZCB0byBiZSBleGVjdXRlZCBvbiBhbiBhY3RpdmUgZmlsZSBvciBleHBsb3Jlci4nXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbWFpbkNvbnRhaW5lcj86IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBDbGVhciBjb250YWluZXIgaWYgcmUtcmVuZGVyaW5nXHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ05hdGl2ZSBleHBsb3JlciBidXR0b25zJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBVc2UgbWFpbkNvbnRhaW5lciBmb3Igc2Nyb2xsIHBvc2l0aW9uIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgdXNlIGNvbnRhaW5lclxyXG5cdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gbWFpbkNvbnRhaW5lciB8fCBjb250YWluZXI7XHJcblxyXG5cdFx0Ly8gSGVscGVyIHRvIHJlbmRlciBhIG5hdGl2ZSBidXR0b24gY29udHJvbFxyXG5cdFx0Y29uc3QgcmVuZGVyTmF0aXZlQnV0dG9uID0gKFxyXG5cdFx0XHRuYW1lOiBzdHJpbmcsXHJcblx0XHRcdHNldHRpbmdLZXk6ICduZXdOb3RlQnV0dG9uJyB8ICduZXdGb2xkZXJCdXR0b24nIHwgJ3NvcnRPcmRlckJ1dHRvbicgfCAnYXV0b1JldmVhbEJ1dHRvbicgfCAnY29sbGFwc2VBbGxCdXR0b24nLFxyXG5cdFx0XHRjb2xvcktleTogJ25ld05vdGUnIHwgJ25ld0ZvbGRlcicgfCAnc29ydE9yZGVyJyB8ICdhdXRvUmV2ZWFsJyB8ICdjb2xsYXBzZUFsbCdcclxuXHRcdCkgPT4ge1xyXG5cdFx0XHRjb25zdCBpc0hpZGRlbiA9IHNldHRpbmdzW3NldHRpbmdLZXldO1xyXG5cdFx0XHRjb25zdCBjb2xvciA9IHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzPy5bY29sb3JLZXldO1xyXG5cdFx0XHRjb25zdCBpY29uT3ZlcnJpZGUgPSBzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zPy5bY29sb3JLZXldO1xyXG5cclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKG5hbWUpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnJylcclxuXHRcdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIEV5ZWJhbGwgdG9nZ2xlIC0gZXllIHdoZW4gdmlzaWJsZSwgZXllLW9mZiB3aGVuIGhpZGRlblxyXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBidXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgaXNIaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKGlzSGlkZGVuID8gJ1Nob3cgYnV0dG9uJyA6ICdIaWRlIGJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVhZCBjdXJyZW50IHZhbHVlIGZyb20gc2V0dGluZ3MgaW5zdGVhZCBvZiB1c2luZyBjYXB0dXJlZCBpc0hpZGRlblxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gc2V0dGluZ3Nbc2V0dGluZ0tleV07XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nc1tzZXR0aW5nS2V5XSA9ICFjdXJyZW50VmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGljb24gYW5kIHRvb2x0aXAgaW4gcGxhY2UgaW5zdGVhZCBvZiBmdWxsIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3SXNIaWRkZW4gPSBzZXR0aW5nc1tzZXR0aW5nS2V5XTtcclxuXHRcdFx0XHRcdFx0XHRcdHNldEljb24oaWNvbkVsLCBuZXdJc0hpZGRlbiA/ICdleWUtb2ZmJyA6ICdleWUnKTtcclxuXHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKG5ld0lzSGlkZGVuID8gJ1Nob3cgYnV0dG9uJyA6ICdIaWRlIGJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gQ29sb3IgcGlja2VyIChvbmx5IHNob3cgaWYgY29sb3IgaXMgc2V0LCB3aXRoIHJlc2V0IGJ1dHRvbilcclxuXHRcdFx0XHRpZiAoY29sb3IpIHtcclxuXHRcdFx0XHRcdHNldHRpbmcuYWRkQ29sb3JQaWNrZXIoKGNvbG9yUGlja2VyKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbG9yUGlja2VyLnNldFZhbHVlKGNvbG9yKTtcclxuXHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBhbmQgc2Nyb2xsIGp1bXBpbmcgb24gY29sb3IgcGlja2VyIGNsaWNrc1xyXG5cdFx0XHRcdFx0XHRjb250cm9sRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JJbnB1dCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY29sb3JcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb2xvcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzW2NvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgY29sb3JzIHRvIG5hdGl2ZSBidXR0b25zIChyZW1vdmUgY29sb3IpXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyLCBtYWluQ29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JQaWNrZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnNbY29sb3JLZXldID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbHkgY29sb3JzIHRvIG5hdGl2ZSBidXR0b25zXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFNob3cgYnV0dG9uIHRvIGFkZCBjb2xvciBwaWNrZXJcclxuXHRcdFx0XHRcdHNldHRpbmcuYWRkQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoJ1NldCBjb2xvci4uLicpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdC8vIEluaXRpYWxpemUgY29sb3IgdG8gYmxhY2sgdG8gc2hvdyBwaWNrZXJcclxuXHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tjb2xvcktleV0gPSAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGNvbG9ycyB0byBuYXRpdmUgYnV0dG9uc1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlck5hdGl2ZUJ1dHRvbkNvbnRyb2xzKGNvbnRhaW5lciwgbWFpbkNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBidXR0b24gY2xpY2tcclxuXHRcdFx0XHRcdFx0YnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBJY29uIG92ZXJyaWRlIChhbHdheXMgc2hvdyBpY29uIHBpY2tlciBidXR0b24pXHJcblx0XHRcdFx0c2V0dGluZy5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudEljb24gPSBpY29uT3ZlcnJpZGUgfHwgJ0RlZmF1bHQnO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudEljb24gPT09ICdEZWZhdWx0JyA/ICdTZXQgaWNvbi4uLicgOiBjdXJyZW50SWNvbikub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zW2NvbG9yS2V5XSA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbY29sb3JLZXldID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGljb24gb3ZlcnJpZGUgdG8gbmF0aXZlIGJ1dHRvbnNcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIganVzdCB0aGUgbmF0aXZlIGJ1dHRvbnMgc2VjdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhjb250YWluZXIsIG1haW5Db250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXHJcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBidXR0b24gY2xpY2tcclxuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIGljb24gaXMgc2V0XHJcblx0XHRcdFx0XHRpZiAoaWNvbk92ZXJyaWRlKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1pY29uLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBpY29uJyB9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBQcmV2ZW50IHNjcm9sbCBqdW1waW5nXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29uc1tjb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGljb24gb3ZlcnJpZGUgdG8gbmF0aXZlIGJ1dHRvbnMgKHJlbW92ZSBvdmVycmlkZSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIGp1c3QgdGhlIG5hdGl2ZSBidXR0b25zIHNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhjb250YWluZXIsIG1haW5Db250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGlmIChidXR0b25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFJlbmRlciBhbGwgNSBuYXRpdmUgYnV0dG9uc1xyXG5cdFx0cmVuZGVyTmF0aXZlQnV0dG9uKCdOZXcgbm90ZScsICduZXdOb3RlQnV0dG9uJywgJ25ld05vdGUnKTtcclxuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignTmV3IGZvbGRlcicsICduZXdGb2xkZXJCdXR0b24nLCAnbmV3Rm9sZGVyJyk7XHJcblx0XHRyZW5kZXJOYXRpdmVCdXR0b24oJ1NvcnQgb3JkZXInLCAnc29ydE9yZGVyQnV0dG9uJywgJ3NvcnRPcmRlcicpO1xyXG5cdFx0cmVuZGVyTmF0aXZlQnV0dG9uKCdBdXRvLXJldmVhbCcsICdhdXRvUmV2ZWFsQnV0dG9uJywgJ2F1dG9SZXZlYWwnKTtcclxuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignQ29sbGFwc2UgYWxsJywgJ2NvbGxhcHNlQWxsQnV0dG9uJywgJ2NvbGxhcHNlQWxsJyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckJ1dHRvbkl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogRXhwbG9yZXJCdXR0b25JdGVtLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHQvLyBHZXQgdGhlIGNvbW1hbmQgcGFpciBmb3IgY3VzdG9tIGNvbW1hbmRzXHJcblx0XHRjb25zdCBwYWlyID0gaXRlbS50eXBlID09PSAnY3VzdG9tJyAmJiBpdGVtLmNvbW1hbmRJZFxyXG5cdFx0XHQ/IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChjID0+IGMuaWQgPT09IGl0ZW0uY29tbWFuZElkKVxyXG5cdFx0XHQ6IG51bGw7XHJcblxyXG5cdFx0Ly8gRGV0ZXJtaW5lIGRpc3BsYXkgbmFtZVxyXG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBpdGVtLnR5cGUgPT09ICdjdXN0b20nICYmIHBhaXJcclxuXHRcdFx0PyAocGFpci5kaXNwbGF5TmFtZSB8fCBwYWlyLm5hbWUpXHJcblx0XHRcdDogaXRlbS5uYW1lO1xyXG5cclxuXHRcdC8vIE1hcCBuYXRpdmUgYnV0dG9uIElEcyB0byBzZXR0aW5nIGtleXNcclxuXHRcdGNvbnN0IG5hdGl2ZUJ1dHRvbk1hcDogUmVjb3JkPHN0cmluZywgeyBzZXR0aW5nS2V5OiAnbmV3Tm90ZUJ1dHRvbicgfCAnbmV3Rm9sZGVyQnV0dG9uJyB8ICdzb3J0T3JkZXJCdXR0b24nIHwgJ2F1dG9SZXZlYWxCdXR0b24nIHwgJ2NvbGxhcHNlQWxsQnV0dG9uJywgY29sb3JLZXk6ICduZXdOb3RlJyB8ICduZXdGb2xkZXInIHwgJ3NvcnRPcmRlcicgfCAnYXV0b1JldmVhbCcgfCAnY29sbGFwc2VBbGwnIH0+ID0ge1xyXG5cdFx0XHQnbmF0aXZlLW5ld05vdGUnOiB7IHNldHRpbmdLZXk6ICduZXdOb3RlQnV0dG9uJywgY29sb3JLZXk6ICduZXdOb3RlJyB9LFxyXG5cdFx0XHQnbmF0aXZlLW5ld0ZvbGRlcic6IHsgc2V0dGluZ0tleTogJ25ld0ZvbGRlckJ1dHRvbicsIGNvbG9yS2V5OiAnbmV3Rm9sZGVyJyB9LFxyXG5cdFx0XHQnbmF0aXZlLXNvcnRPcmRlcic6IHsgc2V0dGluZ0tleTogJ3NvcnRPcmRlckJ1dHRvbicsIGNvbG9yS2V5OiAnc29ydE9yZGVyJyB9LFxyXG5cdFx0XHQnbmF0aXZlLWF1dG9SZXZlYWwnOiB7IHNldHRpbmdLZXk6ICdhdXRvUmV2ZWFsQnV0dG9uJywgY29sb3JLZXk6ICdhdXRvUmV2ZWFsJyB9LFxyXG5cdFx0XHQnbmF0aXZlLWNvbGxhcHNlQWxsJzogeyBzZXR0aW5nS2V5OiAnY29sbGFwc2VBbGxCdXR0b24nLCBjb2xvcktleTogJ2NvbGxhcHNlQWxsJyB9LFxyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBuYXRpdmVCdXR0b25JbmZvID0gaXRlbS50eXBlID09PSAnbmF0aXZlJyA/IG5hdGl2ZUJ1dHRvbk1hcFtpdGVtLmlkXSA6IG51bGw7XHJcblx0XHRjb25zdCBpc0hpZGRlbiA9IG5hdGl2ZUJ1dHRvbkluZm8gPyBzZXR0aW5nc1tuYXRpdmVCdXR0b25JbmZvLnNldHRpbmdLZXldIDogaXRlbS5oaWRkZW47XHJcblx0XHRjb25zdCBjb2xvciA9IG5hdGl2ZUJ1dHRvbkluZm9cclxuXHRcdFx0PyBzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycz8uW25hdGl2ZUJ1dHRvbkluZm8uY29sb3JLZXldXHJcblx0XHRcdDogKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnID8gaXRlbS5jb2xvciA6IHVuZGVmaW5lZCk7XHJcblx0XHRjb25zdCBpY29uT3ZlcnJpZGUgPSBuYXRpdmVCdXR0b25JbmZvXHJcblx0XHRcdD8gc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucz8uW25hdGl2ZUJ1dHRvbkluZm8uY29sb3JLZXldXHJcblx0XHRcdDogKGl0ZW0uaWNvbiB8fCB1bmRlZmluZWQpO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0Ly8gQ29tcGxldGVseSBwcmV2ZW50IGNvbGxhcHNlIG9uIHNldHRpbmcgZWxlbWVudCAtIE9OTFkgY2hldnJvbiBjYW4gdG9nZ2xlIChpZiBwcmVzZW50KVxyXG5cdFx0XHQvLyBGb3IgZXh0ZXJuYWwgYnV0dG9ucywgcHJldmVudCBhbGwgY29sbGFwc2Ugc2luY2UgdGhlcmUncyBubyBjaGV2cm9uXHJcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICdleHRlcm5hbCcpIHtcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKCFpc0V4dHJhQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIHRydWUpO1xyXG5cclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKCFpc0V4dHJhQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIGZhbHNlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGb3IgbmF0aXZlIGFuZCBjdXN0b20gYnV0dG9ucywgYWxsb3cgY2hldnJvbiB0byB0b2dnbGVcclxuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzQ2hldnJvbkNsaWNrID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWNvbGxhcHNlLWljb24nKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRcdGlmICghaXNDaGV2cm9uQ2xpY2sgJiYgIWlzRXh0cmFCdXR0b24gJiYgIWlzTmFtZUVkaXQpIHtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgdHJ1ZSk7XHJcblxyXG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNDaGV2cm9uQ2xpY2sgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItY29sbGFwc2UtaWNvbicpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0XHRjb25zdCBpc05hbWVFZGl0ID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLW5hbWUtZGlzcGxheScpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0LWljb24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScpICE9PSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKCFpc0NoZXZyb25DbGljayAmJiAhaXNFeHRyYUJ1dHRvbiAmJiAhaXNOYW1lRWRpdCkge1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2UgbmFtZUVsIGEgZmxleCBjb250YWluZXIgc28gY2hldnJvbiBjYW4gYmUgcG9zaXRpb25lZCB0byB0aGUgbGVmdFxyXG5cdFx0XHRjb25zdCBuYW1lRWwgPSBzZXR0aW5nLm5hbWVFbDtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUVsLCB7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzAuNXJlbScsIHdpZHRoOiAnMTAwJScgfSk7XHJcblxyXG5cdFx0XHQvLyBBZGQgY2hldnJvbnMtdXAtZG93biBpY29uIHRvIHRoZSBMRUZUIG9mIHRoZSBuYW1lIChvbmx5IGZvciBuYXRpdmUgYW5kIGN1c3RvbSBidXR0b25zKVxyXG5cdFx0XHRsZXQgY2hldnJvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSBmYWxzZTtcclxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgfHwgaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdGNoZXZyb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRjaGV2cm9uQ29udGFpbmVyLmNsYXNzTmFtZSA9ICd1aS10d2Vha2VyLWNvbGxhcHNlLWljb24nO1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHtcclxuXHRcdFx0XHRcdGN1cnNvcjogJ2RlZmF1bHQnLFxyXG5cdFx0XHRcdFx0YmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JyxcclxuXHRcdFx0XHRcdHBhZGRpbmc6ICcwJyxcclxuXHRcdFx0XHRcdG1hcmdpbjogJzAnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1mbGV4JyxcclxuXHRcdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG5cdFx0XHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0bmFtZUVsLmluc2VydEJlZm9yZShjaGV2cm9uQ29udGFpbmVyLCBuYW1lRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0aXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KGl0ZW0uaWQpID8/IGZhbHNlO1xyXG5cdFx0XHRcdHNldEljb24oY2hldnJvbkNvbnRhaW5lciwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblxyXG5cdFx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrXHJcblx0XHRcdFx0Y2hldnJvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGlzRXhwYW5kZWQgPSAhaXNFeHBhbmRlZDtcclxuXHRcdFx0XHRcdHRoaXMuZXhwYW5kZWRTdGF0ZXMuc2V0KGl0ZW0uaWQsIGlzRXhwYW5kZWQpO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyISwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IGlzRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgbmFtZSBjb250YWluZXIgKGVkaXRhYmxlIG9ubHkgZm9yIGN1c3RvbSBidXR0b25zKVxyXG5cdFx0XHRjb25zdCBuYW1lQ29udGFpbmVyID0gbmFtZUVsLmNyZWF0ZURpdih7IGNsczogJ3VpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScgfSk7XHJcblx0XHRcdHNldENzc1Byb3BzKG5hbWVDb250YWluZXIsIHsgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMC41cmVtJyB9KTtcclxuXHJcblx0XHRcdC8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZGlzcGxheSBlbGVtZW50IHdpdGggY2xpY2sgaGFuZGxlclxyXG5cdFx0XHRjb25zdCBjcmVhdGVOYW1lRGlzcGxheSA9IChuYW1lOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGRpc3BsYXkgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZVNwYW4oe1xyXG5cdFx0XHRcdFx0dGV4dDogbmFtZSA9PT0gZGlzcGxheU5hbWUgPyBuYW1lIDogYCR7bmFtZX0gKCR7ZGlzcGxheU5hbWV9KWAsXHJcblx0XHRcdFx0XHRjbHM6ICd1aS10d2Vha2VyLW5hbWUtZGlzcGxheSdcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIHBlbmNpbCBpY29uIChvbmx5IGZvciBjdXN0b20gYnV0dG9ucywgbm90IGV4dGVybmFsKVxyXG5cdFx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXQtaWNvbicgfSk7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcwLjYnIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLXBlbmNpbC1saW5lJyk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRjb25zdCBzdGFydEVkaXQgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnROYW1lID0gaXRlbS5uYW1lO1xyXG5cclxuXHRcdFx0XHRcdFx0bmFtZUNvbnRhaW5lci5lbXB0eSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc3QgbmFtZUlucHV0ID0gbmFtZUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcblx0XHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBjdXJyZW50TmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdG5hbWVJbnB1dC5zZWxlY3QoKTtcclxuXHJcblx0XHRcdFx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdG5hbWVJbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgc2F2ZU5hbWUpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRsZXQgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFuZXdOYW1lKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXdOYW1lID0gY3VycmVudE5hbWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGl0ZW0ubmFtZSA9IG5ld05hbWU7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBjb21tYW5kIHBhaXIgbmFtZSBpZiBjdXN0b21cclxuXHRcdFx0XHRcdFx0XHRpZiAocGFpcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0cGFpci5uYW1lID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBidXR0b24gbmFtZXNcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnVwZGF0ZUJ1dHRvbk5hbWVzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRzYXZlTmFtZSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVOYW1lRGlzcGxheShjdXJyZW50TmFtZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRcdG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgc2F2ZU5hbWUpO1xyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHRkaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRFZGl0KTtcclxuXHRcdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xyXG5cclxuXHRcdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMScgfSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBpbml0aWFsIGRpc3BsYXlcclxuXHRcdFx0Y3JlYXRlTmFtZURpc3BsYXkoaXRlbS5uYW1lKTtcclxuXHJcblx0XHRcdHNldHRpbmcuc2V0RGVzYygnJylcclxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gSWNvbiBwcmV2aWV3IChmb3IgY3VzdG9tIGNvbW1hbmRzIGFuZCBuYXRpdmUgd2l0aCBvdmVycmlkZXMpXHJcblx0XHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJyAmJiBwYWlyKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XHJcblx0XHRcdFx0XHRcdHNldEljb24oaWNvbkVsLCBwYWlyLmljb24pO1xyXG5cdFx0XHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQnLCBwYWlyLmlkKTtcclxuXHRcdFx0XHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGljb25FbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQ2hhbmdlIGljb24nKTtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkICYmIGljb25JZCAhPT0gcGFpci5pY29uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGFpci5pY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0uaWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbmF0aXZlJyAmJiBpY29uT3ZlcnJpZGUpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIGljb25PdmVycmlkZSk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdDaGFuZ2UgaWNvbicpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghbmF0aXZlQnV0dG9uSW5mbykgcmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29uc1tuYXRpdmVCdXR0b25JbmZvLmNvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gTm8gaWNvbiBwcmV2aWV3IGZvciBleHRlcm5hbCBidXR0b25zIG9yIG5hdGl2ZSB3aXRob3V0IG92ZXJyaWRlXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBpY29uIGZsaWNrZXJpbmcgb24gaG92ZXIgYnkgbm90IHVwZGF0aW5nIG9uIGhvdmVyXHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIE1vdmUgdXBcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLXVwJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIHVwJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgdG9wJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBNb3ZlIGRvd25cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLWRvd24nKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA8IHNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnTW92ZSBkb3duJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLCBpbmRleCwgaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIERlbGV0ZSBidXR0b24gKG9ubHkgZm9yIGN1c3RvbSBjb21tYW5kcylcclxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0XHRzZXR0aW5nLmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCd0cmFzaCcpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0RlbGV0ZScpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgZnJvbSBib3RoIGFycmF5c1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGl0ZW1JZHggPSBzZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zLmluZGV4T2YoaXRlbSk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGl0ZW1JZHggPiAtMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5zcGxpY2UoaXRlbUlkeCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmIChwYWlyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjbWRJZHggPSBzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLmluZGV4T2YocGFpcik7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY21kSWR4ID4gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5zcGxpY2UoY21kSWR4LCAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBIaWRlL1Nob3cgdG9nZ2xlIChmb3IgbmF0aXZlIGFuZCBleHRlcm5hbCBidXR0b25zKVxyXG5cdFx0XHRpZiAoKGl0ZW0udHlwZSA9PT0gJ25hdGl2ZScgJiYgbmF0aXZlQnV0dG9uSW5mbykgfHwgaXRlbS50eXBlID09PSAnZXh0ZXJuYWwnKSB7XHJcblx0XHRcdFx0c2V0dGluZy5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBidXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIGlzSGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoaXNIaWRkZW4gPyAnU2hvdyBidXR0b24nIDogJ0hpZGUgYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnbmF0aXZlJyAmJiBuYXRpdmVCdXR0b25JbmZvKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nc1tuYXRpdmVCdXR0b25JbmZvLnNldHRpbmdLZXldID0gIXNldHRpbmdzW25hdGl2ZUJ1dHRvbkluZm8uc2V0dGluZ0tleV07XHJcblx0XHRcdFx0XHRcdFx0XHRpdGVtLmhpZGRlbiA9IHNldHRpbmdzW25hdGl2ZUJ1dHRvbkluZm8uc2V0dGluZ0tleV07XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdleHRlcm5hbCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGl0ZW0uaGlkZGVuID0gIWl0ZW0uaGlkZGVuO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld0lzSGlkZGVuID0gaXRlbS5oaWRkZW47XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihpY29uRWwsIG5ld0lzSGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKG5ld0lzSGlkZGVuID8gJ1Nob3cgYnV0dG9uJyA6ICdIaWRlIGJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDb2xsYXBzaWJsZSBzZXR0aW5ncyBzZWN0aW9uIChvbmx5IGZvciBuYXRpdmUgYW5kIGN1c3RvbSlcclxuXHRcdGlmIChpdGVtLnR5cGUgPT09ICduYXRpdmUnIHx8IGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcclxuXHRcdFx0Ly8gQ29sb3IgcGlja2VyXHJcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICduYXRpdmUnICYmIG5hdGl2ZUJ1dHRvbkluZm8pIHtcclxuXHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaGFzQ29sb3IgPSBjb2xvciAhPT0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ0N1c3RvbSBjb2xvcicpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdTZXQgYSBjdXN0b20gY29sb3IgZm9yIHRoaXMgaWNvbicpXHJcblx0XHRcdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjdXJyZW50Q29sb3IgPSBjb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoY3VycmVudENvbG9yKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNvbG9yXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChoYXNDb2xvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tuYXRpdmVCdXR0b25JbmZvLmNvbG9yS2V5XSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3Q29sb3IgPSB2YWx1ZSA9PT0gJyMwMDAwMDAnID8gdW5kZWZpbmVkIDogdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzW25hdGl2ZUJ1dHRvbkluZm8uY29sb3JLZXldID0gbmV3Q29sb3I7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVzZXQgYnV0dG9uIHZpc2liaWxpdHkgd2l0aG91dCBmdWxsIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1Jlc2V0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy51aS10d2Vha2VyLWNvbG9yLXJlc2V0Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChuZXdDb2xvciAmJiAhZXhpc3RpbmdSZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCByZXNldCBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIW5ld0NvbG9yICYmIGV4aXN0aW5nUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhpc3RpbmdSZXNldC5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIEljb24gb3ZlcnJpZGVcclxuXHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaGFzSWNvbk92ZXJyaWRlID0gaWNvbk92ZXJyaWRlICE9PSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbiBvdmVycmlkZScpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdPdmVycmlkZSB0aGUgZGVmYXVsdCBpY29uIGZvciB0aGlzIGJ1dHRvbicpXHJcblx0XHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRJY29uID0gaWNvbk92ZXJyaWRlIHx8ICdEZWZhdWx0JztcclxuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50SWNvbiA9PT0gJ0RlZmF1bHQnID8gJ1NldCBpY29uLi4uJyA6IGN1cnJlbnRJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge307XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0YnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIGljb24gb3ZlcnJpZGUgaXMgc2V0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGhhc0ljb25PdmVycmlkZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBidXR0b25FbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1pY29uLW92ZXJyaWRlLXJlc2V0JyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IGljb24gb3ZlcnJpZGUnIH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldEljb24ocmVzZXRCdXR0b24sICdsdWNpZGUtcm90YXRlLWN3Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMgPSB7fTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbbmF0aXZlQnV0dG9uSW5mby5jb2xvcktleV0gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSB0aGUgbWFpbiBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGJ1dHRvbkVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nICYmIHBhaXIpIHtcclxuXHRcdFx0XHQvLyBDdXN0b20gY29tbWFuZCBzZXR0aW5ncyAoZGV2aWNlIG1vZGUsIGNvbG9yLCB0b2dnbGUgaWNvbiwgZXRjLilcclxuXHRcdFx0XHQvLyBEZXZpY2UgbW9kZVxyXG5cdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdEZXZpY2UgbW9kZScpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggZGV2aWNlcyB0aGlzIGJ1dHRvbiBhcHBlYXJzIG9uJylcclxuXHRcdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFwcElkID0gKHRoaXMuYXBwIGFzIHsgYXBwSWQ/OiBzdHJpbmcgfSkuYXBwSWQgfHwgJ3RoaXMtZGV2aWNlJztcclxuXHRcdFx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHRcdFx0LmFkZE9wdGlvbignYW55JywgJ0FsbCBkZXZpY2VzJylcclxuXHRcdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2Rlc2t0b3AnLCAnRGVza3RvcCBvbmx5JylcclxuXHRcdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXHJcblx0XHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKGFwcElkLCAnVGhpcyBkZXZpY2UnKVxyXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHBhaXIubW9kZSB8fCAnYW55JylcclxuXHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBhaXIubW9kZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0ubW9kZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gQ3VzdG9tIGNvbG9yIHBpY2tlclxyXG5cdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdDdXN0b20gY29sb3InKVxyXG5cdFx0XHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNvbG9yUGlja2VyKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoY3VycmVudENvbG9yKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XHJcblx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNvbG9yXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChoYXNDb2xvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5jb2xvciA9IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0Y29sb3JQaWNrZXIub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdDb2xvciA9IHZhbHVlID09PSAnIzAwMDAwMCcgPyB1bmRlZmluZWQgOiB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSBuZXdDb2xvcjtcclxuXHRcdFx0XHRcdFx0XHRcdGl0ZW0uY29sb3IgPSBuZXdDb2xvcjtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IGNvbG9yIGluIHJlYWwtdGltZVxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaWNvbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5ld0NvbG9yICYmIG5ld0NvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQnV0dG9uLCB7IGNvbG9yOiBuZXdDb2xvciB9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHJlc2V0IGJ1dHRvbiB2aXNpYmlsaXR5IHdpdGhvdXQgZnVsbCByZS1yZW5kZXJcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZXNldCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcudWktdHdlYWtlci1jb2xvci1yZXNldCcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5ld0NvbG9yICYmICFleGlzdGluZ1Jlc2V0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCByZXNldCBidXR0b25cclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JQaWNrZXJFbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcuY29sb3ItcGlja2VyJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGNvbG9yJyB9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICghbmV3Q29sb3IgJiYgZXhpc3RpbmdSZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdGV4aXN0aW5nUmVzZXQucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBUb2dnbGUgaWNvbiBjb25maWd1cmF0aW9uXHJcblx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHJcblx0XHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdUb2dnbGUgaWNvbicpXHJcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdJY29uIHRvIHNob3cgd2hlbiBjb21tYW5kIGlzIHRvZ2dsZWQgb24gKGxlYXZlIGVtcHR5IHRvIGRpc2FibGUgdG9nZ2xlKS4gQ29tbWFuZHMgd2l0aCBjaGVjayBjYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSByZWFkbWUgZm9yIHBsdWdpbiBkZXZlbG9wZXIgY29tcGF0aWJpbGl0eSBub3Rlcy4nKVxyXG5cdFx0XHRcdFx0XHQuc2V0VG9vbHRpcCgnRm9yIHBsdWdpbiBkZXZlbG9wZXJzOiBDb21tYW5kcyB3aXRoIGNoZWNrQ2FsbGJhY2sgd29yayBhdXRvbWF0aWNhbGx5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkdmtpbWJhbGwvb2JzaWRpYW4tdWktdHdlYWtlciN0b2dnbGUtaWNvbi1mZWF0dXJlLWNvbXBhdGliaWxpdHkgZm9yIGRldGFpbHMuJylcclxuXHRcdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudFRvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gfHwgJ05vbmUnO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGN1cnJlbnRUb2dnbGVJY29uID09PSAnTm9uZScgPyAnU2V0IHRvZ2dsZSBpY29uLi4uJyA6IGN1cnJlbnRUb2dnbGVJY29uKS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLnRvZ2dsZUljb24gPSB1bmRlZmluZWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIFVzZSBhY3RpdmUgY2xhc3Mgb3B0aW9uXHJcblx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdFx0LnNldE5hbWUoJ1VzZSBhY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBpY29uIHN3YXAnKVxyXG5cdFx0XHRcdFx0XHQuc2V0RGVzYygnV2hlbiB0b2dnbGVkIG9uLCBhZGQgaXMtYWN0aXZlIGNsYXNzIGluc3RlYWQgb2Ygc3dhcHBpbmcgaWNvbiAoZXhwbG9yZXIgb25seSknKVxyXG5cdFx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGFpci51c2VBY3RpdmVDbGFzcyA/PyBmYWxzZSk7XHJcblx0XHRcdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnVzZUFjdGl2ZUNsYXNzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0udXNlQWN0aXZlQ2xhc3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdHRvZ2dsZS50b2dnbGVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBBcHBseSBjb2xsYXBzZSBzdGF0ZVxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHNhdmVkRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChpdGVtLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IHNhdmVkRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcclxuXHJcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHQvLyBDb21tYW5kIG5hbWUgd2l0aCBlZGl0YWJsZSBuYW1lIChsaWtlIFZhdWx0IENNUykgYW5kIGljb24gcHJldmlldyB3aXRoIGNvbG9yXHJcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IHBhaXIuZGlzcGxheU5hbWUgfHwgcGFpci5uYW1lO1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHQvLyBDb21wbGV0ZWx5IHByZXZlbnQgY29sbGFwc2Ugb24gc2V0dGluZyBlbGVtZW50IC0gT05MWSBjaGV2cm9uIGNhbiB0b2dnbGVcclxuXHRcdFx0Ly8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gaW50ZXJjZXB0IEFMTCBjbGlja3MgYmVmb3JlIHRoZXkgcmVhY2ggT2JzaWRpYW4ncyBoYW5kbGVyc1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0Ly8gQWxsb3cgY29sbGFwc2UgaWYgY2xpY2tpbmcgb24gY2hldnJvbiBpY29uIE9SIG9uIGV4dHJhIGJ1dHRvbnMgKGRlbGV0ZSwgbW92ZSB1cC9kb3duLCBldGMuKVxyXG5cdFx0XHRcdC8vIE9SIG9uIG5hbWUgZGlzcGxheS9wZW5jaWwgaWNvbiBmb3IgcmVuYW1pbmdcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHQvLyBCbG9jayBBTEwgb3RoZXIgY2xpY2tzIGZyb20gYWZmZWN0aW5nIGNvbGxhcHNlXHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRydWUpOyAvLyBDYXB0dXJlIHBoYXNlIC0gcnVucyBiZWZvcmUgb3RoZXIgaGFuZGxlcnNcclxuXHJcblx0XHRcdC8vIEFsc28gcHJldmVudCBvbiBidWJibGUgcGhhc2UgYXMgYmFja3VwXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNFeHRyYUJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcuZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLmNsaWNrYWJsZS1pY29uLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGw7XHJcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcclxuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIGZhbHNlKTsgLy8gQnViYmxlIHBoYXNlIC0gYmFja3VwXHJcblxyXG5cdFx0XHQvLyBNYWtlIG5hbWVFbCBhIGZsZXggY29udGFpbmVyIHNvIGNoZXZyb24gY2FuIGJlIHBvc2l0aW9uZWQgdG8gdGhlIGxlZnRcclxuXHRcdFx0Y29uc3QgbmFtZUVsID0gc2V0dGluZy5uYW1lRWw7XHJcblx0XHRcdHNldENzc1Byb3BzKG5hbWVFbCwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nLCB3aWR0aDogJzEwMCUnIH0pO1xyXG5cclxuXHRcdFx0Ly8gQWRkIGNoZXZyb25zLXVwLWRvd24gaWNvbiB0byB0aGUgTEVGVCBvZiB0aGUgbmFtZSAoYmVmb3JlIG5hbWUgY29udGFpbmVyKVxyXG5cdFx0XHRjb25zdCBjaGV2cm9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuY2xhc3NOYW1lID0gJ3VpLXR3ZWFrZXItY29sbGFwc2UtaWNvbic7XHJcblx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHtcclxuXHRcdFx0XHRjdXJzb3I6ICdkZWZhdWx0JyxcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxyXG5cdFx0XHRcdHBhZGRpbmc6ICcwJyxcclxuXHRcdFx0XHRtYXJnaW46ICcwJyxcclxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxyXG5cdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly8gSW5zZXJ0IGFzIGZpcnN0IGNoaWxkIHRvIGVuc3VyZSBpdCdzIG9uIHRoZSBsZWZ0XHJcblx0XHRcdG5hbWVFbC5pbnNlcnRCZWZvcmUoY2hldnJvbkNvbnRhaW5lciwgbmFtZUVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHQvLyBSZXN0b3JlIGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwLCBkZWZhdWx0IHRvIGZhbHNlIGlmIG5vdCBzZXRcclxuXHRcdFx0bGV0IGlzRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcclxuXHJcblx0XHRcdC8vIFRvZ2dsZSBvbiBjaGV2cm9uIGNsaWNrIC0gT05MWSB3YXkgdG8gY2hhbmdlIGNvbGxhcHNlIHN0YXRlXHJcblx0XHRcdGNoZXZyb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xyXG5cdFx0XHRcdC8vIFN0b3JlIHN0YXRlIGluIE1hcCBmb3IgcGVyc2lzdGVuY2UgYWNyb3NzIHJlLXJlbmRlcnNcclxuXHRcdFx0XHR0aGlzLmV4cGFuZGVkU3RhdGVzLnNldChwYWlyLmlkLCBpc0V4cGFuZGVkKTtcclxuXHRcdFx0XHQvLyBTd2FwIGljb246IGNoZXZyb25zLXVwLWRvd24gKGNvbGxhcHNlZCkgPC0+IGNoZXZyb25zLWRvd24tdXAgKGV4cGFuZGVkKVxyXG5cdFx0XHRcdHNldEljb24oY2hldnJvbkNvbnRhaW5lciwgaXNFeHBhbmRlZCA/ICdjaGV2cm9ucy1kb3duLXVwJyA6ICdjaGV2cm9ucy11cC1kb3duJyk7XHJcblx0XHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogaXNFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIENyZWF0ZSBlZGl0YWJsZSBuYW1lIGNvbnRhaW5lciB3aXRoIHBlbmNpbCBpY29uXHJcblx0XHRcdGNvbnN0IG5hbWVDb250YWluZXIgPSBuYW1lRWwuY3JlYXRlRGl2KHsgY2xzOiAndWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJyB9KTtcclxuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUNvbnRhaW5lciwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nIH0pO1xyXG5cclxuXHRcdFx0Ly8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBkaXNwbGF5IGVsZW1lbnQgd2l0aCBjbGljayBoYW5kbGVyXHJcblx0XHRcdGNvbnN0IGNyZWF0ZU5hbWVEaXNwbGF5ID0gKG5hbWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdG5hbWVDb250YWluZXIuZW1wdHkoKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgZGlzcGxheSA9IG5hbWVDb250YWluZXIuY3JlYXRlU3Bhbih7XHJcblx0XHRcdFx0XHR0ZXh0OiBuYW1lID09PSBkaXNwbGF5TmFtZSA/IG5hbWUgOiBgJHtuYW1lfSAoJHtkaXNwbGF5TmFtZX0pYCxcclxuXHRcdFx0XHRcdGNsczogJ3VpLXR3ZWFrZXItbmFtZS1kaXNwbGF5J1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgcGVuY2lsIGljb25cclxuXHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXQtaWNvbicgfSk7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcclxuXHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsICdsdWNpZGUtcGVuY2lsLWxpbmUnKTtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXHJcblx0XHRcdFx0Y29uc3Qgc3RhcnRFZGl0ID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudE5hbWUgPSBwYWlyLm5hbWU7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2xlYXIgY29udGFpbmVyXHJcblx0XHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGlucHV0IHVzaW5nIG5hdGl2ZSBPYnNpZGlhbiBzdHlsaW5nXHJcblx0XHRcdFx0XHRjb25zdCBuYW1lSW5wdXQgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuXHRcdFx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdFx0XHR2YWx1ZTogY3VycmVudE5hbWVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmFkZENsYXNzKCdtb2QtdGV4dC1pbnB1dCcpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEZvY3VzIGFuZCBzZWxlY3QgdGV4dFxyXG5cdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBibHVyXHJcblx0XHRcdFx0XHRjb25zdCBzYXZlTmFtZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdFx0bmFtZUlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XHJcblxyXG5cdFx0XHRcdFx0XHRsZXQgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdGlmICghbmV3TmFtZSkge1xyXG5cdFx0XHRcdFx0XHRcdG5ld05hbWUgPSBjdXJyZW50TmFtZTsgLy8gUmV2ZXJ0IHRvIG9yaWdpbmFsIGlmIGVtcHR5XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cGFpci5uYW1lID0gbmV3TmFtZTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBleGlzdGluZyBidXR0b25zIGltbWVkaWF0ZWx5IChkb24ndCB3YWl0IGZvciByZS1yZW5kZXIpXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8udXBkYXRlQnV0dG9uTmFtZXMoKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byB1cGRhdGUgZGlzcGxheSBhbmQgc2F2ZVxyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHQvLyBTYXZlIG9uIEVudGVyXHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRzYXZlTmFtZSgpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBDYW5jZWw6IHJldmVydCB0byBvcmlnaW5hbFxyXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGN1cnJlbnROYW1lKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBibHVyXHJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHNhdmVOYW1lKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlcnMgdG8gYm90aCBuYW1lIGFuZCBpY29uXHJcblx0XHRcdFx0ZGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XHJcblxyXG5cdFx0XHRcdC8vIEFkZCBob3ZlciBlZmZlY3QgdG8gaWNvblxyXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzEnIH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuXHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzAuNicgfSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgaW5pdGlhbCBkaXNwbGF5XHJcblx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KHBhaXIubmFtZSk7XHJcblxyXG5cdFx0XHRzZXR0aW5nLnNldERlc2MoJycpXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIENoYW5nZSBpY29uIC0gcHJldmlldyB3aXRoIGNvbG9yIChyZWFsLXRpbWUgdXBkYXRlcylcclxuXHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XHJcblx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgcGFpci5pY29uKTtcclxuXHRcdFx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSBmb3IgY29sb3IgdXBkYXRlc1xyXG5cdFx0XHRcdFx0aWNvbkVsLnNldEF0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJywgcGFpci5pZCk7XHJcblx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcclxuXHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWNvbkVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0NoYW5nZSBpY29uJyk7XHJcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBwYWlyLmljb24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci5pY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRcdC8vIE1vdmUgdXAgLSBhbHdheXMgc2hvdywgYnV0IGRpc2FibGUgd2hlbiBhdCB0b3BcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLXVwJyk7XHJcblx0XHRcdFx0XHRpZiAoaW5kZXggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIHVwJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLCBpbmRleCwgaW5kZXggLSAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgdG9wJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBNb3ZlIGRvd24gLSBhbHdheXMgc2hvdywgYnV0IGRpc2FibGUgd2hlbiBhdCBib3R0b21cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLWRvd24nKTtcclxuXHRcdFx0XHRcdGlmIChpbmRleCA8IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnTW92ZSBkb3duJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLCBpbmRleCwgaW5kZXggKyAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXIgd2l0aCBtdWx0aXBsZSBhdHRlbXB0c1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbyB0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpbiBjYXNlIERPTSBpc24ndCByZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9uZSBtb3JlIGF0dGVtcHQgYWZ0ZXIgYSBsb25nZXIgZGVsYXlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItZGlzYWJsZWQtYnV0dG9uJyk7XHJcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBEZWxldGUgLSByZWQvd2FybmluZyBzdHlsZVxyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ3RyYXNoJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnRGVsZXRlJyk7XHJcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRcdFx0Ly8gTWFrZSBpY29uIHJlZFxyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uLmV4dHJhU2V0dGluZ3NFbCwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGlkeCA9IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaWR4ID4gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuc3BsaWNlKGlkeCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xyXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERldmljZSBtb2RlIGRyb3Bkb3duXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGV2aWNlIG1vZGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggZGV2aWNlcyB0aGlzIGJ1dHRvbiBhcHBlYXJzIG9uJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBhcHBJZCA9ICh0aGlzLmFwcCBhcyB7IGFwcElkPzogc3RyaW5nIH0pLmFwcElkIHx8ICd0aGlzLWRldmljZSc7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhbnknLCAnQWxsIGRldmljZXMnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdkZXNrdG9wJywgJ0Rlc2t0b3Agb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oYXBwSWQsICdUaGlzIGRldmljZScpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShwYWlyLm1vZGUgfHwgJ2FueScpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRwYWlyLm1vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBjb2xvciBwaWNrZXIgd2l0aCByZXNldCBidXR0b24gKGxpa2UgQ29tbWFuZGVyIC0gYWx3YXlzIHNob3cgY29sb3IgcGlja2VyKVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRjb25zdCBoYXNDb2xvciA9IHBhaXIuY29sb3IgIT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIGNvbG9yJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2V0IGEgY3VzdG9tIGNvbG9yIGZvciB0aGlzIGljb24nKVxyXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFVzZSBDb21tYW5kZXIncyBhcHByb2FjaDogYWx3YXlzIHNob3cgY29sb3IgcGlja2VyLCBkZWZhdWx0IHRvICMwMDAgaWYgbm90IHNldFxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENvbG9yID0gcGFpci5jb2xvciA/PyAnIzAwMDAwMCc7XHJcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgY29udHJvbCBlbGVtZW50IC0gY29sb3IgcGlja2VyIGlzIGFkZGVkIHRvIGl0XHJcblx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNvbG9yIHBpY2tlciBjbGlja3NcclxuXHRcdFx0XHRcdGNvbnRyb2xFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBBZGQgZXZlbnQgaGFuZGxlciB0byB0aGUgYWN0dWFsIGNvbG9yIGlucHV0IGVsZW1lbnRcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjb2xvclwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdGlmIChjb2xvcklucHV0KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiB0byB0aGUgbGVmdCBvZiBjb2xvciBwaWNrZXIgaWYgY29sb3IgaGFzIGJlZW4gc2V0XHJcblx0XHRcdFx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgY29sb3IgcGlja2VyIGlzIGFkZGVkIGZpcnN0LCB0aGVuIGluc2VydCByZXNldCBidXR0b24gYmVmb3JlIGl0XHJcblx0XHRcdFx0XHRpZiAoaGFzQ29sb3IpIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRmluZCB0aGUgY29sb3IgcGlja2VyIGVsZW1lbnQgKGl0J3MgdHlwaWNhbGx5IHRoZSBsYXN0IGNoaWxkIG9yIGhhcyBhIHNwZWNpZmljIGNsYXNzKVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbG9yUGlja2VyRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlcicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcclxuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGNvbG9yIGVudGlyZWx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IHRvIHJlbW92ZSBjb2xvclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpY29uQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbkJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSBjb2xvciBwaWNrZXJcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JQaWNrZXJFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrOiBpbnNlcnQgYXQgc3RhcnRcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiBzZXQgdG8gYmxhY2sgKCMwMDAwMDApLCB0cmVhdCBhcyBcIm5vIGN1c3RvbSBjb2xvclwiIGFuZCByZW1vdmUgaXRcclxuXHRcdFx0XHRcdFx0Y29uc3QgbmV3Q29sb3IgPSB2YWx1ZSA9PT0gJyMwMDAwMDAnID8gdW5kZWZpbmVkIDogdmFsdWU7XHJcblx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSBuZXdDb2xvcjtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIHByZXZpZXcgY29sb3IgaW4gcmVhbC10aW1lXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAobmV3Q29sb3IgJiYgbmV3Q29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkJ1dHRvbiwgeyBjb2xvcjogbmV3Q29sb3IgfSk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVzZXQgYnV0dG9uIHZpc2liaWxpdHkgd2l0aG91dCBmdWxsIHJlLXJlbmRlclxyXG5cdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZXNldCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcudWktdHdlYWtlci1jb2xvci1yZXNldCcpO1xyXG5cdFx0XHRcdFx0XHRpZiAobmV3Q29sb3IgJiYgIWV4aXN0aW5nUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JQaWNrZXJFbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcuY29sb3ItcGlja2VyJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzZXRCdXR0b24gPSBjb250cm9sRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxyXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGNvbG9yJyB9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBjb2xvciBlbnRpcmVseVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGljb24gcHJldmlldyB0byByZW1vdmUgY29sb3JcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaWNvbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbkJ1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IHJlc2V0IGJ1dHRvbiBiZWZvcmUgY29sb3IgcGlja2VyXHJcblx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbG9yUGlja2VyRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjazogaW5zZXJ0IGF0IHN0YXJ0XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCFuZXdDb2xvciAmJiBleGlzdGluZ1Jlc2V0KSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHJlc2V0IGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGV4aXN0aW5nUmVzZXQucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdC8vIFNhdmUgYW5kIHJlb3JkZXIgKG5vIGZ1bGwgcmUtcmVuZGVyIHRvIHByZXZlbnQgZmxpY2tlcmluZylcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFRvZ2dsZSBpY29uIGNvbmZpZ3VyYXRpb25cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcclxuXHRcdFx0Y29uc3QgaGFzVG9nZ2xlSWNvbiA9IHBhaXIudG9nZ2xlSWNvbiAhPT0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdUb2dnbGUgaWNvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ljb24gdG8gc2hvdyB3aGVuIGNvbW1hbmQgaXMgdG9nZ2xlZCBvbiAobGVhdmUgZW1wdHkgdG8gZGlzYWJsZSB0b2dnbGUpLiBDb21tYW5kcyB3aXRoIGNoZWNrIGNhbGxiYWNrIHdvcmsgYXV0b21hdGljYWxseS4gU2VlIHJlYWRtZSBmb3IgcGx1Z2luIGRldmVsb3BlciBjb21wYXRpYmlsaXR5IG5vdGVzLicpXHJcblx0XHRcdFx0LnNldFRvb2x0aXAoJ0ZvciBwbHVnaW4gZGV2ZWxvcGVyczogQ29tbWFuZHMgd2l0aCBjaGVja0NhbGxiYWNrIHdvcmsgYXV0b21hdGljYWxseS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXZpZHZraW1iYWxsL29ic2lkaWFuLXVpLXR3ZWFrZXIjdG9nZ2xlLWljb24tZmVhdHVyZS1jb21wYXRpYmlsaXR5IGZvciBkZXRhaWxzLicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VG9nZ2xlSWNvbiA9IHBhaXIudG9nZ2xlSWNvbiB8fCAnTm9uZSc7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50VG9nZ2xlSWNvbiA9PT0gJ05vbmUnID8gJ1NldCB0b2dnbGUgaWNvbi4uLicgOiBjdXJyZW50VG9nZ2xlSWNvbikub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHRidXR0b24uYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiBpZiB0b2dnbGUgaWNvbiBpcyBzZXRcclxuXHRcdFx0XHRcdGlmIChoYXNUb2dnbGVJY29uKSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRyb2xFbCA9IHNldHRpbmcuY29udHJvbEVsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci10b2dnbGUtaWNvbi1yZXNldCcsXHJcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvZ2dsZSBpY29uJyB9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XHJcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gdG8gcHJldmVudCBqdW1waW5nXHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZW1vdmUgdG9nZ2xlIGljb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlciB3aXRoIG11bHRpcGxlIGF0dGVtcHRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxyXG5cdFx0XHRcdFx0XHRcdGlmIChidXR0b25FbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFVzZSBhY3RpdmUgY2xhc3Mgb3B0aW9uIChleHBsb3JlciBvbmx5KVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBhY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBpY29uIHN3YXAnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIHRvZ2dsZWQgb24sIGFkZCBpcy1hY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBzd2FwcGluZyBpY29uIChleHBsb3JlciBvbmx5KScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGFpci51c2VBY3RpdmVDbGFzcyA/PyBmYWxzZSk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwYWlyLnVzZUFjdGl2ZUNsYXNzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXHJcblx0XHRcdFx0XHR0b2dnbGUudG9nZ2xlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZnRlciBhbGwgc2V0dGluZ3MgYXJlIGFkZGVkLCBhcHBseSBjb2xsYXBzZSBzdGF0ZSBmcm9tIE1hcFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHNhdmVkRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcclxuXHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IHNhdmVkRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBNb2JpbGUgVGFiIC0gQWxsIG1vYmlsZS1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi4vY29tbW9uL1RhYlJlbmRlcmVyJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCwgU2V0dGluZ3NDb250YWluZXIgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5pbXBvcnQgeyBDb21tYW5kUGlja2VyTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvQ29tbWFuZFBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IFVJU2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZXR0aW5ncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9iaWxlVGFiIGV4dGVuZHMgVGFiUmVuZGVyZXIge1xyXG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRcdC8vIE1vYmlsZVxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgbW9iaWxlR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgdW5kZWZpbmVkLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJNb2JpbGUgY2hldnJvbnNcIiBpY29uJywgJ0hpZGUgXCJNb2JpbGUgY2hldnJvbnNcIiBpY29uIChsb25nLXByZXNzIGZsYWlyKSBpbiBtb2JpbGUgbmF2YmFyLicsICdtb2JpbGVDaGV2cm9uc0ljb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIFwiTmF2aWdhdGUgYmFja1wiIGJ1dHRvbicsICdIaWRlIFwiTmF2aWdhdGUgYmFja1wiIGJ1dHRvbiBpbiBtb2JpbGUgbmF2YmFyLicsICduYXZpZ2F0ZUJhY2tCdXR0b24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIFwiTmF2aWdhdGUgZm9yd2FyZFwiIGJ1dHRvbicsICdIaWRlIFwiTmF2aWdhdGUgZm9yd2FyZFwiIGJ1dHRvbiBpbiBtb2JpbGUgbmF2YmFyLicsICduYXZpZ2F0ZUZvcndhcmRCdXR0b24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIFwiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24nLCAnSGlkZSBcIlF1aWNrIHN3aXRjaGVyXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ3F1aWNrU3dpdGNoZXJCdXR0b24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIFwiTmV3IHRhYlwiIGJ1dHRvbicsICdIaWRlIFwiTmV3IHRhYlwiIGJ1dHRvbiBpbiBtb2JpbGUgbmF2YmFyLicsICdtb2JpbGVOZXdUYWJCdXR0b24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIFwiT3BlbiB0YWJzXCIgYnV0dG9uJywgJ0hpZGUgXCJPcGVuIHRhYnNcIiBidXR0b24gaW4gbW9iaWxlIG5hdmJhci4nLCAnb3BlblRhYkJ1dHRvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJSaWJib24gbWVudVwiIGJ1dHRvbicsICdIaWRlIFwiUmliYm9uIG1lbnVcIiBidXR0b24gaW4gbW9iaWxlIG5hdmJhci4nLCAncmliYm9uTWVudUJ1dHRvbicpO1xyXG5cclxuXHRcdC8vIFN3YXAgYnV0dG9uIGljb25cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ1N3YXAgbW9iaWxlIG5ldyB0YWIgaWNvbicsICdSZXBsYWNlIHRoZSBuZXcgdGFiIHBsdXMgaWNvbiB3aXRoIGEgaG9tZSBidXR0b24gaWNvbiBpbiBtb2JpbGUgbmF2YmFyLicsICdzd2FwTW9iaWxlTmV3VGFiSWNvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgdGl0bGUnLCAnSGlkZSB0aGUgdGl0bGUgaW4gbW9iaWxlIHZpZXcgaGVhZGVycy4nLCAnaGlkZU1vYmlsZVRpdGxlJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSBzeW5jIGljb24nLCAnSGlkZSBzeW5jIHN0YXR1cyBpY29ucyBpbiBtb2JpbGUgaW50ZXJmYWNlLicsICdoaWRlTW9iaWxlU3luY0ljb24nKTtcclxuXHJcblx0XHQvLyBSZXBsYWNlIHN5bmMgYnV0dG9uIHdpdGggY3VzdG9tIGFjdGlvblxyXG5cdFx0dGhpcy5yZW5kZXJTeW5jQnV0dG9uUmVwbGFjZW1lbnQoY29udGFpbmVyLCBtb2JpbGVHcm91cCk7XHJcblxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Ly8gTW9iaWxlIG5hdmlnYXRpb24gbWVudVxyXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdFx0Y29uc3QgbW9iaWxlTmF2R3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ01vYmlsZSBuYXZpZ2F0aW9uIG1lbnUnLCAndWktdHdlYWtlcicpO1xyXG5cclxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5hdmlnYXRlIGJhY2tcIiBidXR0b24gKGRlZmF1bHQgMSkuJywgJ25hdmlnYXRlQnV0dG9uUG9zaXRpb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiTmF2aWdhdGUgZm9yd2FyZFwiIGJ1dHRvbiBwb3NpdGlvbicsICdTZWxlY3QgdGhlIHBvc2l0aW9uIGZvciB0aGUgXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uIChkZWZhdWx0IDIpLicsICduYXZpZ2F0aW9uQnV0dG9uUG9zaXRpb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24gcG9zaXRpb24nLCAnU2VsZWN0IHRoZSBwb3NpdGlvbiBmb3IgdGhlIFwiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24gKGRlZmF1bHQgMykuJywgJ3F1aWNrU3dpdGNoZXJQb3NpdGlvbicpO1xyXG5cclxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOZXcgdGFiXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5ldyB0YWJcIiBidXR0b24gKGRlZmF1bHQgNCkuJywgJ25ld1RhYlBvc2l0aW9uJyk7XHJcblxyXG5cdFx0dGhpcy5hZGRQb3NpdGlvblNldHRpbmcobW9iaWxlTmF2R3JvdXAsICdcIk9wZW4gdGFic1wiIGJ1dHRvbiBwb3NpdGlvbicsICdTZWxlY3QgdGhlIHBvc2l0aW9uIGZvciB0aGUgXCJPcGVuIHRhYnNcIiBidXR0b24gKGRlZmF1bHQgNSkuJywgJ29wZW5UYWJzUG9zaXRpb24nKTtcclxuXHJcblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiUmliYm9uIG1lbnVcIiBidXR0b24gcG9zaXRpb24nLCAnU2VsZWN0IHRoZSBwb3NpdGlvbiBmb3IgdGhlIFwiUmliYm9uIG1lbnVcIiBidXR0b24gKGRlZmF1bHQgNikuJywgJ3JpYmJvbk1lbnVQb3NpdGlvbicpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRUb2dnbGVTZXR0aW5nKGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lciwgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgVUlTZXR0aW5ncykge1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZShCb29sZWFuKHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldKSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdCh0aGlzLmdldFNldHRpbmdzKClba2V5XSBhcyBib29sZWFuKSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkUG9zaXRpb25TZXR0aW5nKGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lciwgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgVUlTZXR0aW5ncykge1xyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUobmFtZSlcclxuXHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IDY7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oU3RyaW5nKGkpLCBTdHJpbmcoaSkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5nZXRTZXR0aW5ncygpW2tleV07XHJcblx0XHRcdFx0XHRjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdzdHJpbmcnID8gY3VycmVudFZhbHVlIDogJzEnO1xyXG5cdFx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUoc3RyaW5nVmFsdWUpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHQodGhpcy5nZXRTZXR0aW5ncygpW2tleV0gYXMgc3RyaW5nKSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJTeW5jQnV0dG9uUmVwbGFjZW1lbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZ3JvdXA6IFNldHRpbmdzQ29udGFpbmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcclxuXHRcdGlmICghc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50KSB7XHJcblx0XHRcdHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCA9IHtcclxuXHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdFx0XHRjb21tYW5kSWQ6ICd1aS10d2Vha2VyOm9wZW4tc2V0dGluZ3MnLFxyXG5cdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZGVwZW5kZW50U2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUmVwbGFjZSBzeW5jIGJ1dHRvbiB3aXRoIGN1c3RvbSBhY3Rpb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdSZXBsYWNlIHRoZSBzeW5jIGJ1dHRvbiBpbiB0aGUgbW9iaWxlIHNpZGViYXIgd2l0aCBhIGN1c3RvbSBpY29uIGFuZCBjb21tYW5kLiBUaGlzIHdpbGwgaGlkZSB0aGUgb3JpZ2luYWwgc3luYyBidXR0b24gYW5kIHNob3cgeW91ciBjdXN0b20gYnV0dG9uIGluc3RlYWQuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUoc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCA9IHZhbHVlO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gVG9nZ2xlIHZpc2liaWxpdHkgb2YgZGVwZW5kZW50IHNldHRpbmdzIGluc3RhbnRseVxyXG5cdFx0XHRcdFx0XHRkZXBlbmRlbnRTZXR0aW5ncy5mb3JFYWNoKGVsID0+IHtcclxuXHRcdFx0XHRcdFx0XHRlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJztcclxuXHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBnZXRDb21tYW5kTmFtZSA9IChjb21tYW5kSWQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcblx0XHRcdGlmICghY29tbWFuZElkKSByZXR1cm4gJ1NlbGVjdCBjb21tYW5kLi4uJztcclxuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdFx0aWYgKGNvbW1hbmRSZWdpc3RyeSAmJiB0eXBlb2YgY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XHJcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZHMuZmluZCgoY21kKSA9PiBjbWQgJiYgY21kLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQ/Lm5hbWUpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbW1hbmQubmFtZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuICdTZWxlY3QgY29tbWFuZC4uLic7XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IGdldEljb25OYW1lID0gKGljb25JZDogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuXHRcdFx0aWYgKCFpY29uSWQpIHJldHVybiAnJztcclxuXHRcdFx0cmV0dXJuIGljb25JZFxyXG5cdFx0XHRcdC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKVxyXG5cdFx0XHRcdC5zcGxpdCgnLScpXHJcblx0XHRcdFx0Lm1hcCgod29yZCkgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXHJcblx0XHRcdFx0LmpvaW4oJyAnKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gQ29tbWFuZCBTZXR0aW5nXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdGRlcGVuZGVudFNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQgPyAnJyA6ICdub25lJztcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1NlbGVjdCB0aGUgY29tbWFuZCB0byBleGVjdXRlIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkJylcclxuXHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChnZXRDb21tYW5kTmFtZShzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkKSkub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbW1hbmRQaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGNvbW1hbmRJZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQgPSBjb21tYW5kSWQ7XHJcblx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoZ2V0Q29tbWFuZE5hbWUoY29tbWFuZElkKSk7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSWNvbiBTZXR0aW5nXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XHJcblx0XHRcdGRlcGVuZGVudFNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQgPyAnJyA6ICdub25lJztcclxuXHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnSWNvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ1NlbGVjdCB0aGUgaWNvbiB0byBkaXNwbGF5IG9uIHRoZSBidXR0b24nKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGdldEljb25OYW1lKHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5pY29uSWQpIHx8ICdTZWxlY3QgaWNvbi4uLicpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGdldEljb25OYW1lKGljb25JZCkpO1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIFByb3BlcnRpZXMgVGFiIC0gQ3VzdG9tIGljb25zIGFuZCBjb2xvcnMgZm9yIHByb3BlcnRpZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBzZXRJY29uLCBDb2xvckNvbXBvbmVudCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eUljb25JdGVtIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuLi8uLi91dGlscy9jc3NVdGlscyc7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb3BlcnRpZXNUYWIgZXh0ZW5kcyBUYWJSZW5kZXJlciB7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcj86IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIC8vIEVuc3VyZSBwcm9wZXJ0eUljb25JdGVtcyBleGlzdHNcclxuICAgICAgICBpZiAoIXNldHRpbmdzLnByb3BlcnR5SWNvbkl0ZW1zKSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzLnByb3BlcnR5SWNvbkl0ZW1zID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZW5lcmFsIFNldHRpbmdzXHJcbiAgICAgICAgY29uc3QgdG9wR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgdW5kZWZpbmVkLCAndWktdHdlYWtlcicpO1xyXG4gICAgICAgIHRvcEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgICAgICAgICAgc2V0dGluZ1xyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ01pbmltYWwgcHJvcGVydHkgaWNvbnMnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0hpZGUgdGhlIGRlZmF1bHQgcHJvcGVydHkgdHlwZSBpY29uIGFuZCBvbmx5IHNob3cgeW91ciBjdXN0b20gaWNvbi4nKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHNldHRpbmdzLm1pbmltYWxQcm9wZXJ0eUljb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5taW5pbWFsUHJvcGVydHlJY29ucyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnByb3BlcnRpZXNNYW5hZ2VyPy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRvcEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgICAgICAgICAgc2V0dGluZ1xyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ1JpZ2h0LWNsaWNrIG1lbnUnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0FkZCBcIkNoYW5nZSBpY29uXCIgYW5kIFwiUmVtb3ZlIGljb25cIiB0byB0aGUgcHJvcGVydHkgY29udGV4dCBtZW51LicpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUoc2V0dGluZ3Muc2hvd1Byb3BlcnR5TWVudUFjdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLnNob3dQcm9wZXJ0eU1lbnVBY3Rpb25zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9wR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1Byb3BlcnR5IEljb25zJywgJ3VpLXR3ZWFrZXInKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IGFsbCBwcm9wZXJ0aWVzIGN1cnJlbnRseSBkZWZpbmVkIG9yIGluIHVzZVxyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhUHJvcHMgPSBPYmplY3Qua2V5cygodGhpcy5hcHAgYXMgYW55KS5tZXRhZGF0YVR5cGVNYW5hZ2VyPy5wcm9wZXJ0aWVzIHx8IHt9KTtcclxuICAgICAgICBjb25zdCBzYXZlZFByb3BzID0gc2V0dGluZ3MucHJvcGVydHlJY29uSXRlbXMubWFwKGkgPT4gaS5pZCk7XHJcblxyXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBhbGwgdG8gbG93ZXJjYXNlIGZvciB0aGUgdW5pcXVlIHNldCwgYnV0IHdlJ2xsIGRpc3BsYXkgdGhlbSBhcyBzdG9yZWQgaWYgcG9zc2libGVcclxuICAgICAgICAvLyBIb3dldmVyLCB0byBhdm9pZCBkdXBsaWNhdGVzIGluIHRoZSBsaXN0LCB3ZSdsbCBqdXN0IGxvd2VyY2FzZSBldmVyeXRoaW5nIGhlcmVcclxuICAgICAgICBjb25zdCBhbGxQcm9wZXJ0aWVzID0gQXJyYXkuZnJvbShuZXcgU2V0KFsuLi5tZXRhZGF0YVByb3BzLCAuLi5zYXZlZFByb3BzXS5tYXAocCA9PiBwLnRvTG93ZXJDYXNlKCkpKSkuc29ydCgpO1xyXG5cclxuICAgICAgICBpZiAoYWxsUHJvcGVydGllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZURpdigndWktdHdlYWtlci1lbXB0eS1zdGF0ZScsIChlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyBwcm9wZXJ0aWVzIGZvdW5kIGluIHlvdXIgdmF1bHQgeWV0LicgfSk7XHJcbiAgICAgICAgICAgICAgICBlbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0FkZCBzb21lIHByb3BlcnRpZXMgdG8geW91ciBub3RlcyB0byBzZWUgdGhlbSBoZXJlLicsIGNsczogJ3N1Yi10ZXh0JyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFsbFByb3BlcnRpZXMuZm9yRWFjaCgocHJvcE5hbWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9wZXJ0eVNldHRpbmcocHJvcEdyb3VwLCBwcm9wTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJQcm9wZXJ0eVNldHRpbmcoZ3JvdXA6IGFueSwgcHJvcE5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRQcm9wTmFtZSA9IHByb3BOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgbGV0IGl0ZW0gPSBzZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5maW5kKGkgPT4gaS5pZC50b0xvd2VyQ2FzZSgpID09PSBub3JtYWxpemVkUHJvcE5hbWUpO1xyXG5cclxuICAgICAgICBncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nOiBTZXR0aW5nKSA9PiB7XHJcbiAgICAgICAgICAgIHNldHRpbmcuc2V0TmFtZShwcm9wTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXNldCBidXR0b24gKG9ubHkgc2hvdyBpZiBpY29uIG9yIGNvbG9yIGlzIHNldClcclxuICAgICAgICAgICAgaWYgKGl0ZW0/Lmljb24gfHwgaXRlbT8uY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHNldHRpbmcuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRJY29uKCdsdWNpZGUtcm90YXRlLWNjdycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZXNldCB0byBkZWZhdWx0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MucHJvcGVydHlJY29uSXRlbXMgPSBzZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5maWx0ZXIoaSA9PiBpLmlkLnRvTG93ZXJDYXNlKCkgIT09IG5vcm1hbGl6ZWRQcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB0aGlzLnJlbmRlcih0aGlzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5wcm9wZXJ0aWVzTWFuYWdlcj8ucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJY29uIGRpc3BsYXkvcGlja2VyXHJcbiAgICAgICAgICAgIHNldHRpbmcuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygndWktdHdlYWtlci1wcm9wZXJ0eS1pY29uLWJ0bicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtPy5pY29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihpY29uRWwsIGl0ZW0uaWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3NzUHJvcHMoaWNvbkVsLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihpY29uRWwsICdsdWNpZGUtcGx1cy1jaXJjbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRDc3NQcm9wcyhpY29uRWwsIHsgb3BhY2l0eTogJzAuNCcgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldFRvb2x0aXAoaXRlbT8uaWNvbiA/IGBJY29uOiAke2l0ZW0uaWNvbn0gKGNsaWNrIHRvIGNoYW5nZSlgIDogJ0FkZCBpY29uJyk7XHJcbiAgICAgICAgICAgICAgICBidXR0b24ub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCBhc3luYyAoaWNvbklkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SXRlbSA9IHNldHRpbmdzLnByb3BlcnR5SWNvbkl0ZW1zLmZpbmQoaSA9PiBpLmlkLnRvTG93ZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWRQcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtID0geyBpZDogbm9ybWFsaXplZFByb3BOYW1lIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5wdXNoKGN1cnJlbnRJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGljb25JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0uaWNvbiA9IGljb25JZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLmljb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsZWFudXAgaWYgZW1wdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50SXRlbS5pY29uICYmICFjdXJyZW50SXRlbS5jb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MucHJvcGVydHlJY29uSXRlbXMgPSBzZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5maWx0ZXIoaSA9PiBpLmlkLnRvTG93ZXJDYXNlKCkgIT09IG5vcm1hbGl6ZWRQcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5lcikgdGhpcy5yZW5kZXIodGhpcy5jb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5wcm9wZXJ0aWVzTWFuYWdlcj8ucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENvbG9yIHBpY2tlciAob25seSBzaG93IGlmIGljb24gaXMgc2V0KVxyXG4gICAgICAgICAgICBpZiAoaXRlbT8uaWNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3JQaWNrZXIgPSBuZXcgQ29sb3JDb21wb25lbnQoc2V0dGluZy5jb250cm9sRWwpO1xyXG4gICAgICAgICAgICAgICAgY29sb3JQaWNrZXIuc2V0VmFsdWUoaXRlbS5jb2xvciB8fCAnIzAwMDAwMCcpO1xyXG4gICAgICAgICAgICAgICAgY29sb3JQaWNrZXIub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBzZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5maW5kKGkgPT4gaS5pZC50b0xvd2VyQ2FzZSgpID09PSBub3JtYWxpemVkUHJvcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudEl0ZW0pIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5jb2xvciA9IHZhbHVlID09PSAnIzAwMDAwMCcgPyB1bmRlZmluZWQgOiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcHJldmlldyBjb2xvciBpbiByZWFsLXRpbWVcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uQnRuID0gc2V0dGluZy5zZXR0aW5nRWwucXVlcnlTZWxlY3RvcignLnVpLXR3ZWFrZXItcHJvcGVydHktaWNvbi1idG4nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWNvbkJ0bikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0uY29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldENzc1Byb3BzKGljb25CdG4sIHsgY29sb3I6IGN1cnJlbnRJdGVtLmNvbG9yIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkJ0bi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucHJvcGVydGllc01hbmFnZXI/LnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBUYWIgQmFyIE1hbmFnZXIgLSBNYW5hZ2VzIGN1c3RvbSBjb21tYW5kIGJ1dHRvbnMgaW4gcGFnZSBoZWFkZXJzICh0YWIgYmFyKVxyXG4gKiBCYXNlZCBvbiBDb21tYW5kZXIncyBQYWdlSGVhZGVyTWFuYWdlciB3aXRoIG1kL21keC1vbmx5IGZpbHRlcmluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEl0ZW1WaWV3LCBNZW51LCBXb3Jrc3BhY2VMZWFmLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBDb21tYW5kSWNvblBhaXIgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IG1hdGNoZXNGaWxlVHlwZUZpbHRlciwgaXNNb2RlQWN0aXZlLCBpc0NvbW1hbmRDaGVja2VkIH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZFV0aWxzJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhYkJhck1hbmFnZXIge1xyXG5cdHByaXZhdGUgcGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW47XHJcblx0cHJpdmF0ZSBidXR0b25zID0gbmV3IFdlYWtNYXA8SXRlbVZpZXcsIE1hcDxzdHJpbmcsIEhUTUxFbGVtZW50Pj4oKTtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5pbml0KCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldCBwYWlycygpOiBDb21tYW5kSWNvblBhaXJbXSB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMgfHwgW107XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGluaXQoKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlcigoKSA9PiB7XHJcblx0XHRcdC8vIFJlbW92ZSBhbGwgYnV0dG9ucyBvbiBwbHVnaW4gdW5sb2FkXHJcblx0XHRcdHRoaXMucmVtb3ZlQnV0dG9uc0Zyb21BbGxMZWF2ZXMoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXMoKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4gdGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXMoKSwgMTAwKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkUGFnZUhlYWRlckJ1dHRvbihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwYWlyOiBDb21tYW5kSWNvblBhaXIpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgaWQgfSA9IHBhaXI7XHJcblx0XHQvLyBVc2UgdXNlci1zZXQgbmFtZSBmb3IgdGhlIGJ1dHRvbiB0b29sdGlwXHJcblx0XHRjb25zdCBuYW1lID0gcGFpci5uYW1lO1xyXG5cdFx0Y29uc3QgeyB2aWV3IH0gPSBsZWFmO1xyXG5cdFx0aWYgKCEodmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYnV0dG9ucyA9IHRoaXMuYnV0dG9uc0ZvcihsZWFmLCB0cnVlKTtcclxuXHRcdGlmICghYnV0dG9ucykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgYnV0dG9uIGFscmVhZHkgZXhpc3RzLCB1cGRhdGUgaXRzIG5hbWUgYW5kIGNvbG9yIGluc3RlYWQgb2YgY3JlYXRpbmcgbmV3IG9uZVxyXG5cdFx0aWYgKGJ1dHRvbnMuaGFzKGlkKSkge1xyXG5cdFx0XHRjb25zdCBleGlzdGluZ0J1dHRvbiA9IGJ1dHRvbnMuZ2V0KGlkKTtcclxuXHRcdFx0aWYgKGV4aXN0aW5nQnV0dG9uKSB7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHRvb2x0aXAvYXJpYS1sYWJlbCB3aXRoIG5ldyBuYW1lXHJcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbmFtZSk7XHJcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIG5hbWUpO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBjb2xvciBpZiBuZWVkZWQgKG9ubHkgaWYgbm90IGJsYWNrIC0gYmxhY2sgPSBkZWZhdWx0KVxyXG5cdFx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoZXhpc3RpbmdCdXR0b24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBVcGRhdGUgdG9nZ2xlIHN0YXRlXHJcblx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShleGlzdGluZ0J1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZmlsZSB0eXBlIGZpbHRlcnNcclxuXHRcdGlmICghbWF0Y2hlc0ZpbGVUeXBlRmlsdGVyKGxlYWYsIHBhaXIuc2hvd09uRmlsZVR5cGVzLCBwYWlyLmhpZGVPbkZpbGVUeXBlcykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERldGVybWluZSBpbml0aWFsIGljb24gYmFzZWQgb24gdG9nZ2xlIHN0YXRlXHJcblx0XHRjb25zdCBpbml0aWFsSWNvbiA9IHRoaXMuZ2V0SWNvbkZvclRvZ2dsZVN0YXRlKHBhaXIpO1xyXG5cclxuXHRcdGNvbnN0IGJ1dHRvbkljb24gPSB2aWV3LmFkZEFjdGlvbihpbml0aWFsSWNvbiwgbmFtZSwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZiwgeyBmb2N1czogdHJ1ZSB9KTtcclxuXHRcdFx0Y29uc3QgY29tbWFuZHMgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM7XHJcblx0XHRcdGlmIChjb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkKSB7XHJcblx0XHRcdFx0Ly8gQ29tbWFuZCBleGVjdXRpb24gaXMgdHJhY2tlZCBieSB0aGUgaW50ZXJjZXB0b3IgaW4gbWFpbi50c1xyXG5cdFx0XHRcdC8vIEp1c3QgZXhlY3V0ZSB0aGUgY29tbWFuZCAtIHRoZSBpbnRlcmNlcHRvciB3aWxsIGhhbmRsZSB0b2dnbGUgdHJhY2tpbmdcclxuXHRcdFx0XHR2b2lkIGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChpZCk7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhZnRlciBjb21tYW5kIGV4ZWN1dGlvblxyXG5cdFx0XHRcdC8vIFRoZSBpbnRlcmNlcHRvciB3aWxsIGFsc28gcmVmcmVzaCwgYnV0IHdlIHVwZGF0ZSB0aGlzIGJ1dHRvbiBpbW1lZGlhdGVseSBmb3IgcmVzcG9uc2l2ZW5lc3NcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uSWNvbiwgcGFpcik7XHJcblx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBhbGwgb3RoZXIgYnV0dG9ucyBmb3IgdGhpcyBjb21tYW5kXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUFsbEJ1dHRvbnNGb3JDb21tYW5kKGlkKTtcclxuXHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdGJ1dHRvbnMuc2V0KGlkLCBidXR0b25JY29uKTtcclxuXHJcblx0XHRidXR0b25JY29uLmFkZENsYXNzZXMoWyd1aS10d2Vha2VyLXRhYi1iYXItYnV0dG9uJywgaWRdKTtcclxuXHRcdC8vIE9ubHkgYXBwbHkgY29sb3IgaWYgaXQncyBzZXQgYW5kIG5vdCBibGFjayAoYmxhY2sgPSBkZWZhdWx0KVxyXG5cdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbkljb24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhZnRlciBjcmVhdGlvblxyXG5cdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b25JY29uLCBwYWlyKTtcclxuXHJcblx0XHRidXR0b25JY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRuZXcgTWVudSgpXHJcblx0XHRcdFx0LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0NoYW5nZSBpY29uJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcclxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIChpY29uSWQpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBwYWlyLmljb24pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci5pY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlb3JkZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdsdWNpZGUtdHJhc2gnKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUNvbW1hbmQocGFpcik7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gQWRkIHdhcm5pbmcgY2xhc3MgdG8gbWFrZSB0ZXh0IGFuZCBpY29uIHJlZFxyXG5cdFx0XHRcdFx0Y29uc3QgZG9tID0gKGl0ZW0gYXMgdW5rbm93biBhcyB7IGRvbTogSFRNTEVsZW1lbnQgfSkuZG9tO1xyXG5cdFx0XHRcdFx0aWYgKGRvbSkge1xyXG5cdFx0XHRcdFx0XHRkb20uY2xhc3NMaXN0LmFkZCgnbW9kLXdhcm5pbmcnKTtcclxuXHRcdFx0XHRcdFx0Ly8gQWxzbyBtYWtlIHRoZSBpY29uIHJlZFxyXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBkb20ucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbS1pY29uIHN2ZycpO1xyXG5cdFx0XHRcdFx0XHRpZiAoaWNvbkVsKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHNldENzc1Byb3BzIHRvIHNldCBjb2xvciAoYWxyZWFkeSBpbXBvcnRlZCBmcm9tIHVpTWFuYWdlcilcclxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uRWwgYXMgSFRNTEVsZW1lbnQsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBidXR0b25zRm9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGNyZWF0ZSA9IGZhbHNlKSB7XHJcblx0XHRpZiAoIShsZWFmLnZpZXcgaW5zdGFuY2VvZiBJdGVtVmlldykpIHJldHVybjtcclxuXHRcdGlmIChjcmVhdGUgJiYgIXRoaXMuYnV0dG9ucy5oYXMobGVhZi52aWV3KSlcclxuXHRcdFx0dGhpcy5idXR0b25zLnNldChsZWFmLnZpZXcsIG5ldyBNYXAoKSk7XHJcblx0XHRyZXR1cm4gdGhpcy5idXR0b25zLmdldChsZWFmLnZpZXcpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRCdXR0b25zVG9BbGxMZWF2ZXMocmVmcmVzaCA9IGZhbHNlKTogdm9pZCB7XHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHR0aGlzLmFkZEJ1dHRvbnNUb0xlYWYobGVhZiwgcmVmcmVzaCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbW92ZUJ1dHRvbnNGcm9tQWxsTGVhdmVzKCk6IHZvaWQge1xyXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+XHJcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT5cclxuXHRcdFx0XHR0aGlzLnJlbW92ZUJ1dHRvbnNGcm9tTGVhZihsZWFmKVxyXG5cdFx0XHQpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhZGRCdXR0b25zVG9MZWFmKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHJlZnJlc2ggPSBmYWxzZSk6IHZvaWQge1xyXG5cdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGlmIChyZWZyZXNoKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlQnV0dG9uc0Zyb21MZWFmKGxlYWYpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmJ1dHRvbnNGb3IobGVhZik/LnNpemUpIHtcclxuXHRcdFx0Ly8gVmlldyBhbHJlYWR5IGhhcyBidXR0b25zIGFuZCB3ZSdyZSBub3QgZG9pbmcgYSBmdWxsIHJlZnJlc2hcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChsZXQgaSA9IHRoaXMucGFpcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuXHRcdFx0Y29uc3QgcGFpciA9IHRoaXMucGFpcnNbaV07XHJcblx0XHRcdGlmIChpc01vZGVBY3RpdmUocGFpci5tb2RlLCB0aGlzLnBsdWdpbikpIHtcclxuXHRcdFx0XHR0aGlzLmFkZFBhZ2VIZWFkZXJCdXR0b24obGVhZiwgcGFpcik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVtb3ZlQnV0dG9uc0Zyb21MZWFmKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcclxuXHRcdGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnNGb3IobGVhZik7XHJcblx0XHRpZiAoYnV0dG9ucykge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGJ1dHRvbiBvZiBidXR0b25zLnZhbHVlcygpKSBidXR0b24uZGV0YWNoKCk7XHJcblx0XHRcdGJ1dHRvbnM/LmNsZWFyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVvcmRlcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKHRydWUpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIGJ1dHRvbiBuYW1lcy90b29sdGlwcyBmb3IgYWxsIGV4aXN0aW5nIGJ1dHRvbnNcclxuXHQgKi9cclxuXHRwdWJsaWMgdXBkYXRlQnV0dG9uTmFtZXMoKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnNGb3IobGVhZik7XHJcblx0XHRcdGlmICghYnV0dG9ucykgcmV0dXJuO1xyXG5cclxuXHRcdFx0Zm9yIChjb25zdCBbaWQsIGJ1dHRvbl0gb2YgYnV0dG9ucy5lbnRyaWVzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBwYWlyID0gdGhpcy5wYWlycy5maW5kKHAgPT4gcC5pZCA9PT0gaWQpO1xyXG5cdFx0XHRcdGlmIChwYWlyKSB7XHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgdG9vbHRpcC9hcmlhLWxhYmVsIHdpdGggY3VycmVudCBuYW1lXHJcblx0XHRcdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcGFpci5uYW1lKTtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgcGFpci5uYW1lKTtcclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBjb2xvciBpZiBuZWVkZWRcclxuXHRcdFx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgdG9nZ2xlIHN0YXRlXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBpY29uIGZvciBjdXJyZW50IHRvZ2dsZSBzdGF0ZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZ2V0SWNvbkZvclRvZ2dsZVN0YXRlKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IHN0cmluZyB7XHJcblx0XHRpZiAoIXBhaXIudG9nZ2xlSWNvbikge1xyXG5cdFx0XHRyZXR1cm4gcGFpci5pY29uO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgaXNDaGVja2VkID0gaXNDb21tYW5kQ2hlY2tlZChwYWlyLmlkLCB0aGlzLnBsdWdpbik7XHJcblx0XHRyZXR1cm4gaXNDaGVja2VkID8gcGFpci50b2dnbGVJY29uIDogcGFpci5pY29uO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIGJ1dHRvbiB0b2dnbGUgc3RhdGUgKGljb24gc3dhcCBvbmx5IGZvciB0YWIgYmFyKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyKTogdm9pZCB7XHJcblx0XHRpZiAoIXBhaXIudG9nZ2xlSWNvbikge1xyXG5cdFx0XHQvLyBObyB0b2dnbGUgY29uZmlndXJlZCAtIHVzZSBkZWZhdWx0IGljb25cclxuXHRcdFx0c2V0SWNvbihidXR0b24sIHBhaXIuaWNvbik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBjb21tYW5kIGlzIGN1cnJlbnRseSB0b2dnbGVkIG9uXHJcblx0XHRjb25zdCBpc0NoZWNrZWQgPSBpc0NvbW1hbmRDaGVja2VkKHBhaXIuaWQsIHRoaXMucGx1Z2luKTtcclxuXHJcblx0XHQvLyBTd2FwIGljb24gYmFzZWQgb24gdG9nZ2xlIHN0YXRlXHJcblx0XHRzZXRJY29uKGJ1dHRvbiwgaXNDaGVja2VkID8gcGFpci50b2dnbGVJY29uIDogcGFpci5pY29uKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBhbGwgYnV0dG9ucyBmb3IgYSBzcGVjaWZpYyBjb21tYW5kIElEIGFjcm9zcyBhbGwgbGVhdmVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1cGRhdGVBbGxCdXR0b25zRm9yQ29tbWFuZChjb21tYW5kSWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcGFpciA9IHRoaXMucGFpcnMuZmluZChwID0+IHAuaWQgPT09IGNvbW1hbmRJZCk7XHJcblx0XHRpZiAoIXBhaXIpIHJldHVybjtcclxuXHJcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnNGb3IobGVhZik7XHJcblx0XHRcdGlmICghYnV0dG9ucykgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgYnV0dG9uID0gYnV0dG9ucy5nZXQoY29tbWFuZElkKTtcclxuXHRcdFx0aWYgKGJ1dHRvbikge1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRvZ2dsZSBzdGF0ZXMgZm9yIGFsbCBidXR0b25zXHJcblx0ICovXHJcblx0cHVibGljIHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSByZXR1cm47XHJcblx0XHRcdGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnNGb3IobGVhZik7XHJcblx0XHRcdGlmICghYnV0dG9ucykgcmV0dXJuO1xyXG5cclxuXHRcdFx0Zm9yIChjb25zdCBbaWQsIGJ1dHRvbl0gb2YgYnV0dG9ucy5lbnRyaWVzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBwYWlyID0gdGhpcy5wYWlycy5maW5kKHAgPT4gcC5pZCA9PT0gaWQpO1xyXG5cdFx0XHRcdGlmIChwYWlyICYmIHBhaXIudG9nZ2xlSWNvbikge1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYXN5bmMgYWRkQ29tbWFuZChwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMgPSBbXTtcclxuXHRcdH1cclxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzLnB1c2gocGFpcik7XHJcblx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcyh0cnVlKTtcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFzeW5jIHJlbW92ZUNvbW1hbmQocGFpcjogQ29tbWFuZEljb25QYWlyKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSByZXR1cm47XHJcblx0XHRjb25zdCBpbmRleCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzLmluZGV4T2YocGFpcik7XHJcblx0XHRpZiAoaW5kZXggPiAtMSkge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXModHJ1ZSk7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVDb21tYW5kKG9sZFBhaXI6IENvbW1hbmRJY29uUGFpciwgbmV3UGFpcjogQ29tbWFuZEljb25QYWlyKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSByZXR1cm47XHJcblx0XHRjb25zdCBpbmRleCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzLmluZGV4T2Yob2xkUGFpcik7XHJcblx0XHRpZiAoaW5kZXggPiAtMSkge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kc1tpbmRleF0gPSBuZXdQYWlyO1xyXG5cdFx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcyh0cnVlKTtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIGNvbW1hbmQgbWFuYWdlbWVudFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IENvbW1hbmQsIE1hcmtkb3duVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IE1vZGUgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSB2aWV3IGlzIGEgbWFya2Rvd24gb3IgbWFya2Rvd254IGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01hcmtkb3duVmlldyhsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCk6IGJvb2xlYW4ge1xyXG5cdGlmICghbGVhZj8udmlldykgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XHJcblx0XHRjb25zdCBmaWxlID0gbGVhZi52aWV3LmZpbGU7XHJcblx0XHRpZiAoIWZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBmaWxlIGV4dGVuc2lvbiBpcyAubWQgb3IgLm1keFxyXG5cdFx0Y29uc3QgZXh0ID0gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKTtcclxuXHRcdHJldHVybiBleHQgPT09ICdtZCcgfHwgZXh0ID09PSAnbWR4JztcclxuXHR9XHJcblxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBmaWxlIGV4dGVuc2lvbiBmcm9tIGEgd29ya3NwYWNlIGxlYWZcclxuICovXHJcbmZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24obGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwpOiBzdHJpbmcgfCBudWxsIHtcclxuXHRpZiAoIWxlYWY/LnZpZXcpIHJldHVybiBudWxsO1xyXG5cclxuXHQvLyBUcnkgdG8gZ2V0IGZpbGUgZnJvbSB2aWV3ICh3b3JrcyBmb3IgSXRlbVZpZXcgYW5kIE1hcmtkb3duVmlldylcclxuXHRjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIHsgZmlsZT86IFRGaWxlIHwgbnVsbCB9O1xyXG5cdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XHJcblx0aWYgKCFmaWxlKSByZXR1cm4gbnVsbDtcclxuXHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdmlldyB0eXBlIGZyb20gYSB3b3Jrc3BhY2UgbGVhZlxyXG4gKiBSZXR1cm5zIHRoZSB2aWV3IHR5cGUgKGUuZy4sIFwibWFya2Rvd25cIiwgXCJjYW52YXNcIiwgXCJncmFwaFwiLCBcImVtcHR5XCIpIG9yIG51bGxcclxuICovXHJcbmZ1bmN0aW9uIGdldFZpZXdUeXBlKGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XHJcblx0aWYgKCFsZWFmPy52aWV3KSByZXR1cm4gbnVsbDtcclxuXHJcblx0Ly8gVHJ5IHRvIGdldCB2aWV3IHR5cGUgZnJvbSB2aWV3IChJdGVtVmlldyBoYXMgZ2V0Vmlld1R5cGUgbWV0aG9kKVxyXG5cdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgeyBnZXRWaWV3VHlwZT86ICgpID0+IHN0cmluZyB9O1xyXG5cdGlmICh2aWV3LmdldFZpZXdUeXBlICYmIHR5cGVvZiB2aWV3LmdldFZpZXdUeXBlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRyZXR1cm4gdmlldy5nZXRWaWV3VHlwZSgpLnRvTG93ZXJDYXNlKCk7XHJcblx0fVxyXG5cclxuXHQvLyBGYWxsYmFjazogY2hlY2sgaWYgaXQncyBhIG1hcmtkb3duIHZpZXdcclxuXHRpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XHJcblx0XHRyZXR1cm4gJ21hcmtkb3duJztcclxuXHR9XHJcblxyXG5cdC8vIElmIG5vIGZpbGUgYW5kIG5vIHZpZXcgdHlwZSwgaXQncyBsaWtlbHkgYW4gZW1wdHkgdGFiXHJcblx0Y29uc3QgZmlsZUV4dCA9IGdldEZpbGVFeHRlbnNpb24obGVhZik7XHJcblx0aWYgKCFmaWxlRXh0KSB7XHJcblx0XHRyZXR1cm4gJ2VtcHR5JzsgLy8gRW1wdHkgdGFiIChuZXcgdGFiKVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmltcG9ydCB7IHBhcnNlRmlsZUFuZFZpZXdUeXBlcywgQ29tbWFuZFRvZ2dsZVRyYWNrZXIgfSBmcm9tICcuL2NvbW1hbmQtbG9naWMnO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgZmlsZSBvciB2aWV3IG1hdGNoZXMgdGhlIGZpbGUgdHlwZSBhbmQgdmlldyB0eXBlIGZpbHRlcnNcclxuICogc2hvd09uRmlsZVR5cGVzOiBTaG93IG9ubHkgb24gdGhlc2UgZmlsZSB0eXBlcyAoZS5nLiwgXCJtZCxjYW52YXNcIikgb3IgdmlldyB0eXBlcyBmb3Igdmlld3Mgd2l0aG91dCBmaWxlcyAoZS5nLiwgXCJ7e2dyYXBofX0se3t0YWJ9fVwiKVxyXG4gKiBoaWRlT25GaWxlVHlwZXM6IE5ldmVyIHNob3cgb24gdGhlc2UgZmlsZSB0eXBlcyAoZS5nLiwgXCJqcGcscG5nXCIpIG9yIHZpZXcgdHlwZXMgZm9yIHZpZXdzIHdpdGhvdXQgZmlsZXMgKGUuZy4sIFwie3tncmFwaH19XCIpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hlc0ZpbGVUeXBlRmlsdGVyKFxyXG5cdGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsLFxyXG5cdHNob3dPbkZpbGVUeXBlczogc3RyaW5nIHwgdW5kZWZpbmVkLFxyXG5cdGhpZGVPbkZpbGVUeXBlczogc3RyaW5nIHwgdW5kZWZpbmVkXHJcbik6IGJvb2xlYW4ge1xyXG5cdGlmICghbGVhZj8udmlldykgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRjb25zdCBzaG93RmlsdGVycyA9IHBhcnNlRmlsZUFuZFZpZXdUeXBlcyhzaG93T25GaWxlVHlwZXMpO1xyXG5cdGNvbnN0IGhpZGVGaWx0ZXJzID0gcGFyc2VGaWxlQW5kVmlld1R5cGVzKGhpZGVPbkZpbGVUeXBlcyk7XHJcblxyXG5cdGNvbnN0IGZpbGVFeHQgPSBnZXRGaWxlRXh0ZW5zaW9uKGxlYWYpO1xyXG5cdGNvbnN0IHZpZXdUeXBlID0gZ2V0Vmlld1R5cGUobGVhZik7XHJcblxyXG5cdGlmIChoaWRlRmlsdGVycy5maWxlVHlwZXMubGVuZ3RoID4gMCAmJiBmaWxlRXh0ICYmIGhpZGVGaWx0ZXJzLmZpbGVUeXBlcy5pbmNsdWRlcyhmaWxlRXh0KSkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHRpZiAoaGlkZUZpbHRlcnMudmlld1R5cGVzLmxlbmd0aCA+IDAgJiYgdmlld1R5cGUgJiYgaGlkZUZpbHRlcnMudmlld1R5cGVzLmluY2x1ZGVzKHZpZXdUeXBlKSkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0aWYgKHNob3dGaWx0ZXJzLmZpbGVUeXBlcy5sZW5ndGggPiAwIHx8IHNob3dGaWx0ZXJzLnZpZXdUeXBlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRjb25zdCBtYXRjaGVzRmlsZVR5cGUgPSBmaWxlRXh0ID8gc2hvd0ZpbHRlcnMuZmlsZVR5cGVzLmluY2x1ZGVzKGZpbGVFeHQpIDogZmFsc2U7XHJcblx0XHRjb25zdCBtYXRjaGVzVmlld1R5cGUgPSB2aWV3VHlwZSA/IHNob3dGaWx0ZXJzLnZpZXdUeXBlcy5pbmNsdWRlcyh2aWV3VHlwZSkgOiBmYWxzZTtcclxuXHRcdHJldHVybiBtYXRjaGVzRmlsZVR5cGUgfHwgbWF0Y2hlc1ZpZXdUeXBlO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBtb2RlIGlzIGFjdGl2ZSAoZGVza3RvcC9tb2JpbGUvYW55L3RoaXMgZGV2aWNlKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9kZUFjdGl2ZShtb2RlOiBNb2RlLCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbik6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGFwcCA9IHBsdWdpbi5hcHAgYXMgeyBpc01vYmlsZT86IGJvb2xlYW47IGFwcElkPzogc3RyaW5nIH07XHJcblx0Y29uc3QgaXNNb2JpbGUgPSBhcHAuaXNNb2JpbGUgPz8gZmFsc2U7XHJcblx0Y29uc3QgYXBwSWQgPSBhcHAuYXBwSWQ7XHJcblxyXG5cdC8vIEhhbmRsZSBcInRoaXMgZGV2aWNlXCIgbW9kZSAoYXBwLmFwcElkKVxyXG5cdGlmIChtb2RlICE9PSAnYW55JyAmJiBtb2RlICE9PSAnZGVza3RvcCcgJiYgbW9kZSAhPT0gJ21vYmlsZScpIHtcclxuXHRcdHJldHVybiBtb2RlID09PSBhcHBJZDtcclxuXHR9XHJcblxyXG5cdHJldHVybiAoXHJcblx0XHRtb2RlID09PSAnYW55JyB8fFxyXG5cdFx0KG1vZGUgPT09ICdtb2JpbGUnICYmIGlzTW9iaWxlKSB8fFxyXG5cdFx0KG1vZGUgPT09ICdkZXNrdG9wJyAmJiAhaXNNb2JpbGUpXHJcblx0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjb21tYW5kIGZyb20gSURcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21tYW5kRnJvbUlkKGlkOiBzdHJpbmcsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogQ29tbWFuZCB8IG51bGwge1xyXG5cdGNvbnN0IGNvbW1hbmRzID0gKHBsdWdpbi5hcHAgYXMgeyBjb21tYW5kcz86IHsgY29tbWFuZHM/OiB7IFtpZDogc3RyaW5nXTogQ29tbWFuZCB9IH0gfSkuY29tbWFuZHM7XHJcblx0cmV0dXJuIGNvbW1hbmRzPy5jb21tYW5kcz8uW2lkXSA/PyBudWxsO1xyXG59XHJcblxyXG4vLyBHbG9iYWwgdHJhY2tlciBpbnN0YW5jZVxyXG5jb25zdCBjb21tYW5kVG9nZ2xlVHJhY2tlciA9IG5ldyBDb21tYW5kVG9nZ2xlVHJhY2tlcigpO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgY29tbWFuZCBpcyBjdXJyZW50bHkgY2hlY2tlZC90b2dnbGVkIG9uXHJcbiAqIEZpcnN0IHRyaWVzIGNoZWNrQ2FsbGJhY2sgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlcyB0cmFja2VkIHN0YXRlXHJcbiAqIEZvciBzcGVjaWZpYyBjb21tYW5kcyAobGlrZSB0aGVtZSB0b2dnbGUpLCBjaGVja3MgYWN0dWFsIHN0YXRlIGRpcmVjdGx5XHJcbiAqIFxyXG4gKiBUaGlzIGZ1bmN0aW9uIGFsd2F5cyBjaGVja3MgdGhlIGFjdHVhbCBzdGF0ZSAodmlhIGNoZWNrQ2FsbGJhY2sgb3IgZGlyZWN0IGRldGVjdGlvbilcclxuICogYW5kIHN5bmNzIGl0IHdpdGggdHJhY2tlZCBzdGF0ZSwgZW5zdXJpbmcgYnV0dG9ucyBzdGF5IGluIHN5bmMgZXZlbiB3aGVuIGNvbW1hbmRzXHJcbiAqIGFyZSBleGVjdXRlZCBleHRlcm5hbGx5IChrZXlib2FyZCBzaG9ydGN1dHMsIGNvbW1hbmQgcGFsZXR0ZSwgZXRjLilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NvbW1hbmRDaGVja2VkKGlkOiBzdHJpbmcsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogYm9vbGVhbiB7XHJcblx0Ly8gU3BlY2lhbCBoYW5kbGluZyBmb3IgY29tbWFuZHMgdGhhdCBuZWVkIGRpcmVjdCBzdGF0ZSBkZXRlY3Rpb25cclxuXHQvLyBUaGVzZSBjb21tYW5kcyBkb24ndCBoYXZlIHJlbGlhYmxlIGNoZWNrQ2FsbGJhY2ssIHNvIHdlIGNoZWNrIERPTS9hcHAgc3RhdGUgZGlyZWN0bHlcclxuXHJcblx0Ly8gVGhlbWUgdG9nZ2xlIC0gY2hlY2sgRE9NIGNsYXNzXHJcblx0aWYgKGlkID09PSAndGhlbWU6dG9nZ2xlLWxpZ2h0LWRhcmsnKSB7XHJcblx0XHQvLyBDaGVjayB0aGVtZSBzdGF0ZSBkaXJlY3RseSBmcm9tIERPTVxyXG5cdFx0Ly8gT2JzaWRpYW4gdXNlcyAndGhlbWUtZGFyaycgY2xhc3Mgb24gYm9keSBmb3IgZGFyayBtb2RlXHJcblx0XHRjb25zdCBpc0RhcmsgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtZGFyaycpO1xyXG5cdFx0Ly8gU3luYyB0cmFja2VkIHN0YXRlIHdpdGggYWN0dWFsIHN0YXRlXHJcblx0XHRjb21tYW5kVG9nZ2xlVHJhY2tlci5zeW5jU3RhdGUoaWQsIGlzRGFyayk7XHJcblx0XHRyZXR1cm4gaXNEYXJrO1xyXG5cdH1cclxuXHJcblx0Ly8gRWRpdGluZyBUb29sYmFyIGhpZGUvc2hvdyAtIGNoZWNrIHBsdWdpbiBzZXR0aW5nc1xyXG5cdC8vIFRoZSBjb21tYW5kIElEIGlzICdoaWRlLXNob3ctbWVudScgYnV0IGl0J3MgcmVnaXN0ZXJlZCB1bmRlciAnZWRpdGluZy10b29sYmFyOmhpZGUtc2hvdy1tZW51J1xyXG5cdGlmIChpZCA9PT0gJ2VkaXRpbmctdG9vbGJhcjpoaWRlLXNob3ctbWVudScgfHwgaWQgPT09ICdoaWRlLXNob3ctbWVudScpIHtcclxuXHRcdC8vIFRyeSB0byBhY2Nlc3MgdGhlIGVkaXRpbmcgdG9vbGJhciBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdFx0Y29uc3QgcGx1Z2lucyA9IChwbHVnaW4uYXBwIGFzIHsgcGx1Z2lucz86IHsgcGx1Z2lucz86IHsgW2lkOiBzdHJpbmddOiB7IHNldHRpbmdzPzogeyBjTWVudVZpc2liaWxpdHk/OiBib29sZWFuIH0gfSB9IH0gfSkucGx1Z2lucztcclxuXHRcdGNvbnN0IGVkaXRpbmdUb29sYmFyUGx1Z2luID0gcGx1Z2lucz8ucGx1Z2lucz8uWydlZGl0aW5nLXRvb2xiYXInXTtcclxuXHRcdGlmIChlZGl0aW5nVG9vbGJhclBsdWdpbj8uc2V0dGluZ3M/LmNNZW51VmlzaWJpbGl0eSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdGNvbnN0IGlzVmlzaWJsZSA9IGVkaXRpbmdUb29sYmFyUGx1Z2luLnNldHRpbmdzLmNNZW51VmlzaWJpbGl0eTtcclxuXHRcdFx0Ly8gU3luYyB0cmFja2VkIHN0YXRlIHdpdGggYWN0dWFsIHN0YXRlXHJcblx0XHRcdGNvbW1hbmRUb2dnbGVUcmFja2VyLnN5bmNTdGF0ZShpZCwgaXNWaXNpYmxlKTtcclxuXHRcdFx0cmV0dXJuIGlzVmlzaWJsZTtcclxuXHRcdH1cclxuXHRcdC8vIEZhbGxiYWNrIHRvIHRyYWNrZWQgc3RhdGUgaWYgcGx1Z2luIG5vdCBmb3VuZFxyXG5cdFx0cmV0dXJuIGNvbW1hbmRUb2dnbGVUcmFja2VyLmdldFRyYWNrZWRTdGF0ZShpZCkgPz8gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRjb25zdCBjb21tYW5kID0gZ2V0Q29tbWFuZEZyb21JZChpZCwgcGx1Z2luKTtcclxuXHRpZiAoIWNvbW1hbmQpIHtcclxuXHRcdC8vIENvbW1hbmQgbm90IGZvdW5kIC0gZmFsbGJhY2sgdG8gdHJhY2tlZCBzdGF0ZVxyXG5cdFx0Ly8gVGhpcyBjYW4gaGFwcGVuIHdpdGggY3VzdG9tIHBsdWdpbiBjb21tYW5kcyB0aGF0IGhhdmVuJ3QgcmVnaXN0ZXJlZCB5ZXRcclxuXHRcdHJldHVybiBjb21tYW5kVG9nZ2xlVHJhY2tlci5nZXRUcmFja2VkU3RhdGUoaWQpID8/IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gQ2hlY2sgaWYgY29tbWFuZCBoYXMgYSBjaGVja0NhbGxiYWNrIChwcmVmZXJyZWQgbWV0aG9kIGZvciBhbGwgY29tbWFuZHMpXHJcblx0aWYgKHR5cGVvZiBjb21tYW5kLmNoZWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIENhbGwgY2hlY2tDYWxsYmFjayB3aXRoIGNoZWNraW5nPXRydWUgdG8gc2VlIGlmIGl0IHJldHVybnMgdHJ1ZSAoY2hlY2tlZCBzdGF0ZSlcclxuXHRcdFx0Ly8gTm90ZTogY2hlY2tDYWxsYmFjayBzaG91bGQgcmV0dXJuIHRydWUgaWYgY2hlY2tlZCwgZmFsc2UgaWYgdW5jaGVja2VkXHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGNvbW1hbmQuY2hlY2tDYWxsYmFjayh0cnVlKTtcclxuXHRcdFx0Y29uc3QgaXNDaGVja2VkID0gcmVzdWx0ID09PSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gQWx3YXlzIHN5bmMgdHJhY2tlZCBzdGF0ZSB3aXRoIGNoZWNrQ2FsbGJhY2sgcmVzdWx0XHJcblx0XHRcdC8vIFRoaXMgZW5zdXJlcyBidXR0b25zIHN0YXkgaW4gc3luYyBldmVuIHdoZW4gY29tbWFuZHMgYXJlIGV4ZWN1dGVkIGV4dGVybmFsbHlcclxuXHRcdFx0Ly8gKGtleWJvYXJkIHNob3J0Y3V0cywgY29tbWFuZCBwYWxldHRlLCBvdGhlciBwbHVnaW5zLCBldGMuKVxyXG5cdFx0XHRjb21tYW5kVG9nZ2xlVHJhY2tlci5zeW5jU3RhdGUoaWQsIGlzQ2hlY2tlZCk7XHJcblxyXG5cdFx0XHQvLyBBbHdheXMgdHJ1c3QgY2hlY2tDYWxsYmFjayBvdmVyIHRyYWNrZWQgc3RhdGUgd2hlbiBhdmFpbGFibGVcclxuXHRcdFx0cmV0dXJuIGlzQ2hlY2tlZDtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHQvLyBJZiBjaGVja0NhbGxiYWNrIHRocm93cywgZmFsbCBiYWNrIHRvIHRyYWNrZWQgc3RhdGVcclxuXHRcdFx0Ly8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjb21tYW5kJ3MgY2hlY2tDYWxsYmFjayBoYXMgYnVncyBvciBpc24ndCByZWFkeSB5ZXRcclxuXHRcdFx0cmV0dXJuIGNvbW1hbmRUb2dnbGVUcmFja2VyLmdldFRyYWNrZWRTdGF0ZShpZCkgPz8gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBObyBjaGVja0NhbGxiYWNrIC0gdXNlIHRyYWNrZWQgc3RhdGVcclxuXHQvLyBUaGlzIGlzIGEgZmFsbGJhY2sgZm9yIGNvbW1hbmRzIHRoYXQgZG9uJ3QgcHJvdmlkZSBjaGVja0NhbGxiYWNrXHJcblx0Ly8gVGhlIHBlcmlvZGljIHJlZnJlc2ggd2lsbCBrZWVwIHRyeWluZyB0byBkZXRlY3Qgc3RhdGUgY2hhbmdlc1xyXG5cdHJldHVybiBjb21tYW5kVG9nZ2xlVHJhY2tlci5nZXRUcmFja2VkU3RhdGUoaWQpID8/IGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogUmVjb3JkIHRoYXQgYSBjb21tYW5kIHdhcyBleGVjdXRlZCAoZm9yIHRvZ2dsZSB0cmFja2luZylcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNvcmRDb21tYW5kRXhlY3V0aW9uKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRjb21tYW5kVG9nZ2xlVHJhY2tlci5yZWNvcmRFeGVjdXRpb24oaWQpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzZXQgdHJhY2tlZCBzdGF0ZSBmb3IgYSBjb21tYW5kXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDb21tYW5kU3RhdGUoaWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdGNvbW1hbmRUb2dnbGVUcmFja2VyLnJlc2V0U3RhdGUoaWQpO1xyXG59IiwgIi8qKlxyXG4gKiBMb2dpYy1vbmx5IGZ1bmN0aW9ucyBmb3IgY29tbWFuZCBtYW5hZ2VtZW50LCBpc29sYXRlZCBmcm9tIE9ic2lkaWFuIEFQSVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBjb21tYS1zZXBhcmF0ZWQgZmlsZSBleHRlbnNpb25zIGFuZCB2aWV3IHR5cGVzIGludG8gYXJyYXlzXHJcbiAqIFN1cHBvcnRzIGJvdGggZmlsZSBleHRlbnNpb25zIChlLmcuLCBcIm1kLG1keFwiKSBhbmQgdmlldyB0eXBlcyAoZS5nLiwgXCJ7e2dyYXBofX0se3tjYW52YXN9fVwiKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmlsZUFuZFZpZXdUeXBlcyh0eXBlczogc3RyaW5nIHwgdW5kZWZpbmVkKTogeyBmaWxlVHlwZXM6IHN0cmluZ1tdOyB2aWV3VHlwZXM6IHN0cmluZ1tdIH0ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0geyBmaWxlVHlwZXM6IFtdIGFzIHN0cmluZ1tdLCB2aWV3VHlwZXM6IFtdIGFzIHN0cmluZ1tdIH07XHJcblxyXG4gICAgaWYgKCF0eXBlcyB8fCAhdHlwZXMudHJpbSgpKSByZXR1cm4gcmVzdWx0O1xyXG5cclxuICAgIGNvbnN0IHBhcnRzID0gdHlwZXMuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSkuZmlsdGVyKHAgPT4gcCk7XHJcblxyXG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIHZpZXcgdHlwZSAod3JhcHBlZCBpbiB7e319KVxyXG4gICAgICAgIGNvbnN0IHZpZXdUeXBlTWF0Y2ggPSBwYXJ0Lm1hdGNoKC9eXFx7XFx7KFxcdyspXFx9XFx9JC8pO1xyXG4gICAgICAgIGlmICh2aWV3VHlwZU1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC52aWV3VHlwZXMucHVzaCh2aWV3VHlwZU1hdGNoWzFdLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEl0J3MgYSBmaWxlIGV4dGVuc2lvblxyXG4gICAgICAgICAgICBjb25zdCBleHQgPSBwYXJ0LnJlcGxhY2UoL15cXC4vLCAnJykudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaWYgKGV4dCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGVUeXBlcy5wdXNoKGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbW1hbmQgdG9nZ2xlIHN0YXRlIHRyYWNrZXIgbG9naWNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kVG9nZ2xlVHJhY2tlciB7XHJcbiAgICBwcml2YXRlIHRvZ2dsZVN0YXRlcyA9IG5ldyBNYXA8c3RyaW5nLCBib29sZWFuPigpO1xyXG4gICAgcHJpdmF0ZSBwcmV2aW91c1N0YXRlcyA9IG5ldyBNYXA8c3RyaW5nLCBib29sZWFuPigpO1xyXG4gICAgcHJpdmF0ZSBleGVjdXRpb25Db3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG5cclxuICAgIHJlY29yZEV4ZWN1dGlvbihpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gdGhpcy5leGVjdXRpb25Db3VudHMuZ2V0KGlkKSB8fCAwO1xyXG4gICAgICAgIHRoaXMuZXhlY3V0aW9uQ291bnRzLnNldChpZCwgY3VycmVudENvdW50ICsgMSk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVTdGF0ZXMuc2V0KGlkLCAoY3VycmVudENvdW50ICsgMSkgJSAyID09PSAxKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUcmFja2VkU3RhdGUoaWQ6IHN0cmluZyk6IGJvb2xlYW4gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVTdGF0ZXMuZ2V0KGlkKSA/PyBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByZXZpb3VzU3RhdGUoaWQ6IHN0cmluZyk6IGJvb2xlYW4gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1N0YXRlcy5nZXQoaWQpID8/IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRTdGF0ZShpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVTdGF0ZXMuZGVsZXRlKGlkKTtcclxuICAgICAgICB0aGlzLnByZXZpb3VzU3RhdGVzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgdGhpcy5leGVjdXRpb25Db3VudHMuZGVsZXRlKGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBzeW5jU3RhdGUoaWQ6IHN0cmluZywgYWN0dWFsU3RhdGU6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50VHJhY2tlZFN0YXRlID0gdGhpcy50b2dnbGVTdGF0ZXMuZ2V0KGlkKTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRUcmFja2VkU3RhdGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzU3RhdGVzLnNldChpZCwgY3VycmVudFRyYWNrZWRTdGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY3VycmVudFRyYWNrZWRTdGF0ZSAhPT0gYWN0dWFsU3RhdGUpIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudENvdW50ID0gdGhpcy5leGVjdXRpb25Db3VudHMuZ2V0KGlkKSB8fCAwO1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGlvbkNvdW50cy5zZXQoaWQsIGN1cnJlbnRDb3VudCArIDEpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVN0YXRlcy5zZXQoaWQsIGFjdHVhbFN0YXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzU3RhdGVDaGFuZ2VkKGlkOiBzdHJpbmcsIGN1cnJlbnRTdGF0ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzU3RhdGUgPSB0aGlzLnByZXZpb3VzU3RhdGVzLmdldChpZCk7XHJcbiAgICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdGUgIT09IHVuZGVmaW5lZCAmJiBwcmV2aW91c1N0YXRlICE9PSBjdXJyZW50U3RhdGU7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxuICogU3RhdHVzIEJhciBNYW5hZ2VyIC0gVW5pZmllZCBtYW5hZ2VyIGZvciBleGlzdGluZyArIGN1c3RvbSBzdGF0dXMgYmFyIGl0ZW1zXG4gKiBDb21iaW5lcyBmdW5jdGlvbmFsaXR5IGZyb20gU3RhdHVzIEJhciBPcmdhbml6ZXIgKHJlb3JkZXJpbmcvaGlkaW5nIGV4aXN0aW5nIGl0ZW1zKVxuICogYW5kIENvbW1hbmRlciAoYWRkaW5nIGN1c3RvbSBjb21tYW5kcylcbiAqL1xuXG5pbXBvcnQgeyBNZW51LCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFVJVHdlYWtlclBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IFN0YXR1c0Jhckl0ZW0sIENvbW1hbmRJY29uUGFpciB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGlzTWFya2Rvd25WaWV3LCBpc01vZGVBY3RpdmUgfSBmcm9tICcuLi91dGlscy9jb21tYW5kVXRpbHMnO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3V0aWxzL2Nzc1V0aWxzJztcblxuZXhwb3J0IGNsYXNzIFN0YXR1c0Jhck1hbmFnZXIge1xuXHRwcml2YXRlIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xuXHRwcml2YXRlIGN1c3RvbUFjdGlvbnMgPSBuZXcgTWFwPFN0YXR1c0Jhckl0ZW0sIEhUTUxFbGVtZW50PigpO1xuXHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBvYnNlcnZlcj86IE11dGF0aW9uT2JzZXJ2ZXI7XG5cdHByaXZhdGUgaXNSZW9yZGVyaW5nID0gZmFsc2U7IC8vIEZsYWcgdG8gcHJldmVudCBvYnNlcnZlciBmcm9tIHRyaWdnZXJpbmcgZHVyaW5nIHJlb3JkZXJcblxuXHRwcml2YXRlIGdldCBpdGVtcygpOiBTdGF0dXNCYXJJdGVtW10ge1xuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcyB8fCBbXTtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKTogdm9pZCB7XG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdHRoaXMuY29udGFpbmVyID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IHN0YXR1c0Jhcj86IHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9IH0pLnN0YXR1c0Jhcj8uY29udGFpbmVyRWwgPz8gbnVsbDtcblx0XHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbml0aWFsaXplIGl0ZW1zIGFycmF5IGlmIG5lZWRlZFxuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcyA9IFtdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb25zb2xpZGF0ZSBzZXR0aW5ncyBhbmQgZWxlbWVudHMgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0XHQvLyBUaGlzIG1lcmdlcyBzYXZlZCBpdGVtcyB3aXRoIGN1cnJlbnQgRE9NIGVsZW1lbnRzIGFuZCBzYXZlcyBpbW1lZGlhdGVseVxuXHRcdFx0dGhpcy5jb25zb2xpZGF0ZVNldHRpbmdzQW5kRWxlbWVudHMoKTtcblxuXHRcdFx0Ly8gQXBwbHkgb3JkZXJpbmcgYW5kIHZpc2liaWxpdHlcblx0XHRcdHRoaXMucmVvcmRlcigpO1xuXG5cdFx0XHQvLyBXYXRjaCBmb3IgbmV3IHN0YXR1cyBiYXIgaXRlbXMgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIgZG9lcylcblx0XHRcdC8vIFVzZSBhIGRlYm91bmNlIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlLXJlbmRlcnMgZHVyaW5nIHNldHRpbmdzIGNoYW5nZXNcblx0XHRcdGxldCBvYnNlcnZlclRpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGw7XG5cdFx0XHR0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHQvLyBEb24ndCB0cmlnZ2VyIGlmIHdlJ3JlIGN1cnJlbnRseSByZW9yZGVyaW5nIChwcmV2ZW50cyBpbmZpbml0ZSBsb29wcylcblx0XHRcdFx0aWYgKHRoaXMuaXNSZW9yZGVyaW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRGVib3VuY2Ugb2JzZXJ2ZXIgY2FsbGJhY2tzIHRvIHByZXZlbnQgZXhjZXNzaXZlIHVwZGF0ZXNcblx0XHRcdFx0aWYgKG9ic2VydmVyVGltZW91dCkge1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dChvYnNlcnZlclRpbWVvdXQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9ic2VydmVyVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdC8vIE9ubHkgZGV0ZWN0IGFuZCByZW9yZGVyIGlmIHdlJ3JlIG5vdCBpbiB0aGUgbWlkZGxlIG9mIGEgcmVvcmRlciBvcGVyYXRpb25cblx0XHRcdFx0XHRpZiAoIXRoaXMuaXNSZW9yZGVyaW5nKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAyMDApO1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXIsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiBmYWxzZSB9KTtcblxuXHRcdFx0Ly8gUmVnaXN0ZXIgY2xlYW51cFxuXHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXIoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNsZWFudXAoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBhbGwgYnV0dG9ucyBjcmVhdGVkIGJ5IHRoaXMgbWFuYWdlciBmcm9tIHRoZSBET01cblx0ICovXG5cdHB1YmxpYyBjbGVhbnVwKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLm9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR9XG5cdFx0dGhpcy5jdXN0b21BY3Rpb25zLmZvckVhY2goKGFjdGlvbikgPT4gYWN0aW9uLnJlbW92ZSgpKTtcblx0XHR0aGlzLmN1c3RvbUFjdGlvbnMuY2xlYXIoKTtcblxuXHRcdC8vIEFsc28gY2xlYW4gdXAgYW55IGJ1dHRvbnMgdGhhdCBtaWdodCBoYXZlIGJlZW4gbGVmdCBiZWhpbmQgKG9ycGhhbmVkKVxuXHRcdGlmICh0aGlzLmNvbnRhaW5lcikge1xuXHRcdFx0Y29uc3QgbWFuYWdlZEJ1dHRvbnMgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS11aS10d2Vha2VyLW1hbmFnZWQ9XCJ0cnVlXCJdJyk7XG5cdFx0XHRtYW5hZ2VkQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4ucmVtb3ZlKCkpO1xuXG5cdFx0XHQvLyBSZXN0b3JlIHZpc2liaWxpdHkgb2YgYW55IGhpZGRlbiBuYXRpdmUgaXRlbXNcblx0XHRcdGNvbnN0IGhpZGRlbkl0ZW1zID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnVpLXR3ZWFrZXItc3RhdHVzLWJhci1oaWRkZW4nKTtcblx0XHRcdGhpZGRlbkl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLnJlbW92ZUNsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJykpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIGNsYXNzIGlzIGEgZHluYW1pYyBzdGF0ZSBjbGFzcyB0aGF0IHNob3VsZCBiZSBmaWx0ZXJlZCBvdXRcblx0ICogRHluYW1pYyBzdGF0ZSBjbGFzc2VzIGNoYW5nZSBiYXNlZCBvbiBwbHVnaW4gc3RhdGUgKGUuZy4sIG9ic2lkaWFuLWdpdCBzdGF0dXNiYXIgc3RhdGVzKVxuXHQgKi9cblx0cHJpdmF0ZSBpc0R5bmFtaWNTdGF0ZUNsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0Ly8gRmlsdGVyIG91dCBrbm93biBkeW5hbWljIHN0YXRlIGNsYXNzIHBhdHRlcm5zXG5cdFx0Y29uc3QgZHluYW1pY1BhdHRlcm5zID0gW1xuXHRcdFx0Ly1zdGF0dXNiYXItKGlkbGV8cHVsbHxwdXNofGNvbW1pdHxtZXNzYWdlfHN0YXR1c3xhZGR8Y29uZmxpY3R8cGF1c2VkfGZhaWxlZC1pbml0KSQvLFxuXHRcdFx0Ly8gQ29tbW9uIHN0YXRlIGNsYXNzZXMgdGhhdCBzaG91bGRuJ3QgYmUgcGFydCBvZiBhbiBlbGVtZW50J3MgaWRlbnRpdHlcblx0XHRcdC9eKGlzLWFjdGl2ZXxpcy1sb2FkaW5nfGlzLWhpZGRlbnxpcy1jb2xsYXBzZWR8aXMtc2VsZWN0ZWR8aXMtZmxhc2hpbmd8bW9kLWFjdGl2ZXxtb2QtbG9hZGluZykkLyxcblx0XHRcdC8vIG9ic2lkaWFuLWdpdCBzcGVjaWZpYyBkeW5hbWljIGNsYXNzZXNcblx0XHRcdC9eb2JzaWRpYW4tZ2l0LXN0YXR1c2Jhci0vLFxuXHRcdF07XG5cdFx0cmV0dXJuIGR5bmFtaWNQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNsYXNzTmFtZSkpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlIGEgY2Fub25pY2FsIG5hbWUgZnJvbSBhbiBlbGVtZW50J3MgY2xhc3Nlc1xuXHQgKiBGaWx0ZXJzIG91dCBkeW5hbWljIHN0YXRlIGNsYXNzZXMgYW5kIHVzZXMgb25seSBzdGFibGUgcGx1Z2luIGlkZW50aWZpZXJzXG5cdCAqL1xuXHRwcml2YXRlIGdlbmVyYXRlQ2Fub25pY2FsTmFtZShlbGVtZW50OiBIVE1MRWxlbWVudCwgYWxsQ2xhc3Nlczogc3RyaW5nW10pOiBzdHJpbmcge1xuXHRcdGNvbnN0IGlnbm9yZWRDbGFzc2VzID0gWydtb2QtY2xpY2thYmxlJywgJ3N0YXR1cy1iYXItaXRlbScsICd1aS10d2Vha2VyLXN0YXR1cy1iYXItaXRlbScsICd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJ107XG5cblx0XHQvLyBFeHRyYWN0IHBsdWdpbiBpZGVudGlmaWVyIChzdGFibGUpXG5cdFx0Y29uc3QgcGx1Z2luQ2xhc3MgPSBhbGxDbGFzc2VzLmZpbmQoY2xzID0+XG5cdFx0XHRjbHMuaW5jbHVkZXMoJ3BsdWdpbi0nKSB8fFxuXHRcdFx0Y2xzLmluY2x1ZGVzKCdvYnNpZGlhbi1naXQnKSB8fFxuXHRcdFx0Y2xzLmluY2x1ZGVzKCctZ2l0JykgfHxcblx0XHRcdChjbHMuc3RhcnRzV2l0aCgnZ2l0LScpICYmIGNscyAhPT0gJ2dpdC1jaGFuZ2VzLXN0YXR1cy1iYXInKVxuXHRcdCk7XG5cblx0XHRpZiAocGx1Z2luQ2xhc3MpIHtcblx0XHRcdC8vIEZvciBvYnNpZGlhbi1naXQsIHVzZSBzaW1wbGlmaWVkIGlkZW50aWZpZXJzIHRvIGhhbmRsZSBkeW5hbWljIGNsYXNzIGNoYW5nZXNcblx0XHRcdGlmIChwbHVnaW5DbGFzcy5pbmNsdWRlcygnb2JzaWRpYW4tZ2l0JykgfHwgcGx1Z2luQ2xhc3Muc3RhcnRzV2l0aCgnZ2l0LScpKSB7XG5cdFx0XHRcdGlmIChhbGxDbGFzc2VzLnNvbWUoY2xzID0+IGNscy5zdGFydHNXaXRoKCdvYnNpZGlhbi1naXQtc3RhdHVzYmFyLScpKSkgcmV0dXJuICdwbHVnaW4tb2JzaWRpYW4tZ2l0LXN0YXR1cyc7XG5cdFx0XHRcdGlmIChhbGxDbGFzc2VzLmluY2x1ZGVzKCdnaXQtY2hhbmdlcy1zdGF0dXMtYmFyJykpIHJldHVybiAncGx1Z2luLW9ic2lkaWFuLWdpdC1jaGFuZ2VzJztcblxuXHRcdFx0XHQvLyBCcmFuY2ggZGV0ZWN0aW9uIChmb3IgaW5pdGlhbCBJRCBnZW5lcmF0aW9uKVxuXHRcdFx0XHRjb25zdCB0ZXh0Q29udGVudCA9IGVsZW1lbnQudGV4dENvbnRlbnQ/LnRyaW0oKTtcblx0XHRcdFx0Ly8gUm9idXN0IGJyYW5jaCBkZXRlY3Rpb246IHNob3J0LCBhbHBoYW51bWVyaWMgd2l0aCBkYXNoZXMvdW5kZXJzY29yZXMsIG5vIGNvbG9uc1xuXHRcdFx0XHRjb25zdCBsb29rc0xpa2VCcmFuY2ggPSB0ZXh0Q29udGVudCAmJiB0ZXh0Q29udGVudC5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0L15bYS16MC05XVthLXowLTkuX1xcLS9dKiQvaS50ZXN0KHRleHRDb250ZW50KSAmJlxuXHRcdFx0XHRcdHRleHRDb250ZW50Lmxlbmd0aCA8IDMwICYmXG5cdFx0XHRcdFx0IXRleHRDb250ZW50LmluY2x1ZGVzKCc6JykgJiZcblx0XHRcdFx0XHQhL15bMC05XS8udGVzdCh0ZXh0Q29udGVudCkgJiZcblx0XHRcdFx0XHQhZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1tYW5hZ2VkJyk7XG5cblx0XHRcdFx0aWYgKGxvb2tzTGlrZUJyYW5jaCkgcmV0dXJuICdwbHVnaW4tb2JzaWRpYW4tZ2l0LWJyYW5jaCc7XG5cblx0XHRcdFx0cmV0dXJuICdwbHVnaW4tb2JzaWRpYW4tZ2l0Jztcblx0XHRcdH1cblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBkeW5hbWljIHN0YXRlIGNsYXNzZXMgYW5kIGlnbm9yZWQgY2xhc3Nlc1xuXHRcdFx0Y29uc3Qgc3RhYmxlQ2xhc3NlcyA9IGFsbENsYXNzZXMuZmlsdGVyKGNscyA9PlxuXHRcdFx0XHQhdGhpcy5pc0R5bmFtaWNTdGF0ZUNsYXNzKGNscykgJiZcblx0XHRcdFx0IWlnbm9yZWRDbGFzc2VzLmluY2x1ZGVzKGNscykgJiZcblx0XHRcdFx0Y2xzICE9PSBwbHVnaW5DbGFzc1xuXHRcdFx0KTtcblxuXHRcdFx0aWYgKHN0YWJsZUNsYXNzZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRyZXR1cm4gYCR7cGx1Z2luQ2xhc3N9LSR7c3RhYmxlQ2xhc3Nlcy5qb2luKCctJyl9YDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBwbHVnaW5DbGFzcztcblx0XHR9XG5cblx0XHQvLyBObyBwbHVnaW4gaWRlbnRpZmllciBmb3VuZCAtIHVzZSBmaWx0ZXJlZCBjbGFzc2VzXG5cdFx0Y29uc3Qgc3RhYmxlQ2xhc3NlcyA9IGFsbENsYXNzZXMuZmlsdGVyKGNscyA9PlxuXHRcdFx0IXRoaXMuaXNEeW5hbWljU3RhdGVDbGFzcyhjbHMpICYmXG5cdFx0XHQhaWdub3JlZENsYXNzZXMuaW5jbHVkZXMoY2xzKVxuXHRcdCk7XG5cblx0XHRpZiAoc3RhYmxlQ2xhc3Nlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRyZXR1cm4gc3RhYmxlQ2xhc3Nlcy5qb2luKCctJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICdzdGF0dXMtYmFyLWl0ZW0nO1xuXHR9XG5cblx0LyoqXG5cdCAqIEV4dHJhY3QgY2Fub25pY2FsIG5hbWUgZnJvbSBhIHNhdmVkIElEXG5cdCAqIFJlbW92ZXMgdGhlIGluZGV4IHN1ZmZpeCBhbmQgZmlsdGVycyBvdXQgZHluYW1pYyBzdGF0ZSBjbGFzc2VzXG5cdCAqIFRoaXMgaGFuZGxlcyBsZWdhY3kgSURzIHRoYXQgbWlnaHQgaGF2ZSBiZWVuIGNyZWF0ZWQgd2l0aCBkeW5hbWljIGNsYXNzZXNcblx0ICovXG5cdHByaXZhdGUgZ2V0Q2Fub25pY2FsTmFtZUZyb21JZChpZDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRjb25zdCBwYXJ0cyA9IGlkLnNwbGl0KCc7Jyk7XG5cdFx0cGFydHMucG9wKCk7IC8vIFJlbW92ZSBpbmRleFxuXHRcdGNvbnN0IGZ1bGxOYW1lID0gcGFydHMuam9pbignOycpO1xuXG5cdFx0Ly8gRm9yIG9ic2lkaWFuLWdpdCwgbWlncmF0aW9uIHRvIG5ldyBzdGFibGUgSURzXG5cdFx0aWYgKGZ1bGxOYW1lLmluY2x1ZGVzKCdvYnNpZGlhbi1naXQtc3RhdHVzYmFyLScpIHx8IGZ1bGxOYW1lID09PSAncGx1Z2luLW9ic2lkaWFuLWdpdCcpIHtcblx0XHRcdC8vIFNtYXJ0ZXIgbWlncmF0aW9uOiBjaGVjayB0aGUgc2F2ZWQgaXRlbSdzIG5hbWUgdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiBzdGF0dXMgYW5kIGJyYW5jaFxuXHRcdFx0Ly8gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlIG9sZCBJRHMgbGlrZSAncGx1Z2luLW9ic2lkaWFuLWdpdDsyJyB3ZXJlIHVzZWQgZm9yIGJyYW5jaGVzXG5cdFx0XHRjb25zdCBzYXZlZEl0ZW0gPSB0aGlzLml0ZW1zLmZpbmQoaSA9PiBpLmlkID09PSBpZCk7XG5cdFx0XHRpZiAoc2F2ZWRJdGVtICYmIHNhdmVkSXRlbS5uYW1lICYmXG5cdFx0XHRcdC9eW2EtejAtOV1bYS16MC05Ll9cXC0vXSokL2kudGVzdChzYXZlZEl0ZW0ubmFtZSkgJiZcblx0XHRcdFx0c2F2ZWRJdGVtLm5hbWUubGVuZ3RoIDwgMzAgJiZcblx0XHRcdFx0IXNhdmVkSXRlbS5uYW1lLmluY2x1ZGVzKCdwbHVnaW4tJykpIHtcblx0XHRcdFx0cmV0dXJuICdwbHVnaW4tb2JzaWRpYW4tZ2l0LWJyYW5jaCc7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gJ3BsdWdpbi1vYnNpZGlhbi1naXQtc3RhdHVzJztcblx0XHR9XG5cblx0XHQvLyBGb3Igb3RoZXIgY2FzZXMsIHRyeSB0byBmaW5kIHBsdWdpbiBpZGVudGlmaWVyIGluIHRoZSBuYW1lXG5cdFx0Ly8gTG9vayBmb3IgXCJwbHVnaW4tKlwiIHBhdHRlcm5cblx0XHRjb25zdCBwbHVnaW5NYXRjaCA9IGZ1bGxOYW1lLm1hdGNoKC9eKHBsdWdpbi1bYS16MC05LV0rKS9pKTtcblx0XHRpZiAocGx1Z2luTWF0Y2gpIHtcblx0XHRcdHJldHVybiBwbHVnaW5NYXRjaFsxXTtcblx0XHR9XG5cblx0XHQvLyBJZiBubyBwbHVnaW4gaWRlbnRpZmllciBmb3VuZCwgZmlsdGVyIG91dCBkeW5hbWljIHN0YXRlIGNsYXNzZXNcblx0XHQvLyBUaGlzIGlzIGEgZmFsbGJhY2sgZm9yIGVkZ2UgY2FzZXNcblx0XHRjb25zdCBuYW1lUGFydHMgPSBmdWxsTmFtZS5zcGxpdCgnLScpO1xuXHRcdGNvbnN0IGZpbHRlcmVkUGFydHM6IHN0cmluZ1tdID0gW107XG5cdFx0bGV0IHNraXBOZXh0ID0gZmFsc2U7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVQYXJ0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHNraXBOZXh0KSB7XG5cdFx0XHRcdHNraXBOZXh0ID0gZmFsc2U7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIHBhcnQgb2YgYSBzdGF0dXNiYXItKiBkeW5hbWljIHN0YXRlIGNsYXNzXG5cdFx0XHRpZiAobmFtZVBhcnRzW2ldID09PSAnc3RhdHVzYmFyJyAmJiBpIDwgbmFtZVBhcnRzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0Y29uc3QgbmV4dFBhcnQgPSBuYW1lUGFydHNbaSArIDFdO1xuXHRcdFx0XHRpZiAoWydpZGxlJywgJ3B1bGwnLCAncHVzaCcsICdjb21taXQnLCAnbWVzc2FnZScsICdzdGF0dXMnLCAnYWRkJywgJ2NvbmZsaWN0JywgJ3BhdXNlZCddLmluY2x1ZGVzKG5leHRQYXJ0KSkge1xuXHRcdFx0XHRcdHNraXBOZXh0ID0gdHJ1ZTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmV4dFBhcnQgPT09ICdmYWlsZWQnICYmIGkgPCBuYW1lUGFydHMubGVuZ3RoIC0gMiAmJiBuYW1lUGFydHNbaSArIDJdID09PSAnaW5pdCcpIHtcblx0XHRcdFx0XHRpICs9IDI7IC8vIFNraXAgXCJmYWlsZWQtaW5pdFwiXG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBvdGhlciBnZW5lcmljIGR5bmFtaWMgY2xhc3Nlc1xuXHRcdFx0aWYgKHRoaXMuaXNEeW5hbWljU3RhdGVDbGFzcyhuYW1lUGFydHNbaV0pKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRmaWx0ZXJlZFBhcnRzLnB1c2gobmFtZVBhcnRzW2ldKTtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gZmlsdGVyZWQgbmFtZSBvciBvcmlnaW5hbCBpZiBmaWx0ZXJpbmcgcmVtb3ZlZCBldmVyeXRoaW5nXG5cdFx0cmV0dXJuIGZpbHRlcmVkUGFydHMubGVuZ3RoID4gMCA/IGZpbHRlcmVkUGFydHMuam9pbignLScpIDogZnVsbE5hbWU7XG5cdH1cblxuXHQvKipcblx0ICogQ29uc29saWRhdGUgc2V0dGluZ3MgYW5kIGVsZW1lbnRzIChFWEFDVExZIGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdCAqIE1lcmdlcyBzYXZlZCBpdGVtcyB3aXRoIGN1cnJlbnQgRE9NIGVsZW1lbnRzLCBwcmVzZXJ2ZXMgb3JkZXIgYW5kIHNldHRpbmdzXG5cdCAqIFNhdmVzIGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgZHVwbGljYXRlc1xuXHQgKi9cblx0cHJpdmF0ZSBjb25zb2xpZGF0ZVNldHRpbmdzQW5kRWxlbWVudHMoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG5cdFx0Ly8gR2V0IGFsbCBleGlzdGluZyBzdGF0dXMgYmFyIGVsZW1lbnRzIGZyb20gRE9NIChpbiBET00gb3JkZXIpXG5cdFx0Y29uc3QgZXhpc3RpbmdFbGVtZW50cyA9IEFycmF5LmZyb20odGhpcy5jb250YWluZXIuY2hpbGRyZW4pLmZpbHRlcihcblx0XHRcdGVsID0+IHtcblx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IGVsIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHQvLyBJZ25vcmUgb3VyIG93biBjdXN0b20gaXRlbXMgKHRoZXkgYXJlIG1hbmFnZWQgc2VwYXJhdGVseSlcblx0XHRcdFx0aWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaXRlbScpKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdFx0Ly8gQ1JJVElDQUwgRklYOiBJZ25vcmUgb3JwaGFuZWQgbWFuYWdlZCBidXR0b25zIChlLmcuLCBmcm9tIGRlbGV0ZWQgZGF0YSlcblx0XHRcdFx0aWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItbWFuYWdlZCcpID09PSAndHJ1ZScpIHtcblx0XHRcdFx0XHRjb25zdCBpZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcpO1xuXHRcdFx0XHRcdC8vIElmIGl0J3MgYSBtYW5hZ2VkIGJ1dHRvbiBidXQgbm90IGluIG91ciBjdXJyZW50IGl0ZW1zIGxpc3QsIGlnbm9yZSBpdCBmb3IgZGlzY292ZXJ5XG5cdFx0XHRcdFx0aWYgKCFpZCB8fCAhdGhpcy5pdGVtcy5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWQpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUHJvY2VzcyBFVkVSWSBjaGlsZCBvZiB0aGUgc3RhdHVzIGJhciAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHRcdFx0Ly8gTWFueSBwbHVnaW5zIGFkZCBjbGlja2FibGUgaWNvbnMgd2l0aG91dCB0aGUgJ3N0YXR1cy1iYXItaXRlbScgY2xhc3Ncblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0KSBhcyBIVE1MRWxlbWVudFtdO1xuXG5cdFx0Ly8gR2V0IHNhdmVkIGl0ZW1zIGZyb20gc2V0dGluZ3MgKHByZXNlcnZlIEFMTCBzYXZlZCBpdGVtcywgZXZlbiBpZiBub3QgY3VycmVudGx5IHZpc2libGUpXG5cdFx0Y29uc3Qgc2F2ZWRJdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKTtcblx0XHRjb25zdCBzYXZlZEl0ZW1zTWFwID0gbmV3IE1hcChzYXZlZEl0ZW1zLm1hcChpdGVtID0+IFtpdGVtLmlkLCBpdGVtXSkpO1xuXG5cdFx0Ly8gVHJhY2sgZWxlbWVudCBjb3VudHMgcGVyIG5hbWUgcGF0dGVybiAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplciBkb2VzKVxuXHRcdGNvbnN0IHBsdWdpbkVsZW1lbnRDb3VudDogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xuXHRcdGNvbnN0IG1hdGNoZWRTYXZlZElkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdGNvbnN0IG5ld0l0ZW1zOiBTdGF0dXNCYXJJdGVtW10gPSBbXTtcblxuXHRcdC8vIFByb2Nlc3MgZWxlbWVudHMgaW4gRE9NIG9yZGVyIChzaW5nbGUgcGFzcywgRVhBQ1RMWSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdGV4aXN0aW5nRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuXHRcdFx0bGV0IGlkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJyk7XG5cdFx0XHRsZXQgY2Fub25pY2FsTmFtZTogc3RyaW5nO1xuXHRcdFx0bGV0IGluZGV4OiBudW1iZXI7XG5cblx0XHRcdGlmIChpZCkge1xuXHRcdFx0XHQvLyBFbGVtZW50IGFscmVhZHkgdGFnZ2VkIC0gVFJVU1QgVEhFIFRBRyAobGlrZSBTQk8pXG5cdFx0XHRcdGNvbnN0IHBhcnNlZCA9IHRoaXMucGFyc2VFbGVtZW50SWQoaWQpO1xuXHRcdFx0XHRjYW5vbmljYWxOYW1lID0gcGFyc2VkLm5hbWU7XG5cdFx0XHRcdGluZGV4ID0gcGFyc2VkLmluZGV4O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTmV3IGVsZW1lbnQgLSBnZW5lcmF0ZSBJRCBmcm9tIGNsYXNzZXMgYW5kIGN1cnJlbnQgRE9NIG9yZGVyIGNvdW50XG5cdFx0XHRcdGNvbnN0IGFsbENsYXNzZXMgPSBBcnJheS5mcm9tKGVsZW1lbnQuY2xhc3NMaXN0KTtcblx0XHRcdFx0Y2Fub25pY2FsTmFtZSA9IHRoaXMuZ2VuZXJhdGVDYW5vbmljYWxOYW1lKGVsZW1lbnQsIGFsbENsYXNzZXMpO1xuXHRcdFx0XHRpbmRleCA9IChjYW5vbmljYWxOYW1lIGluIHBsdWdpbkVsZW1lbnRDb3VudCkgPyBwbHVnaW5FbGVtZW50Q291bnRbY2Fub25pY2FsTmFtZV0gKyAxIDogMTtcblx0XHRcdFx0aWQgPSBgJHtjYW5vbmljYWxOYW1lfTske2luZGV4fWA7XG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcsIGlkKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVXBkYXRlIGdsb2JhbCBjb3VudCB0cmFja2luZyBmb3IgdGhpcyBzY2FuXG5cdFx0XHRwbHVnaW5FbGVtZW50Q291bnRbY2Fub25pY2FsTmFtZV0gPSBNYXRoLm1heChpbmRleCwgcGx1Z2luRWxlbWVudENvdW50W2Nhbm9uaWNhbE5hbWVdIHx8IDApO1xuXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBoYXZlIGEgc2F2ZWQgaXRlbSBmb3IgdGhpcyBJRFxuXHRcdFx0Y29uc3Qgc2F2ZWRJdGVtID0gc2F2ZWRJdGVtc01hcC5nZXQoaWQpO1xuXHRcdFx0aWYgKHNhdmVkSXRlbSkge1xuXHRcdFx0XHRtYXRjaGVkU2F2ZWRJZHMuYWRkKGlkKTtcblxuXHRcdFx0XHQvLyBVcGRhdGUgZGlzcGxheSBuYW1lIGlmIGl0J3MgZ2VuZXJpYyBvciBpZiBpdCdzIGEgYnJhbmNoICh3aGljaCBjaGFuZ2VzKVxuXHRcdFx0XHRsZXQgZWxlbWVudE5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IGVsZW1lbnQudGV4dENvbnRlbnQ/LnRyaW0oKTtcblx0XHRcdFx0Y29uc3QgaXNCcmFuY2ggPSBjYW5vbmljYWxOYW1lID09PSAncGx1Z2luLW9ic2lkaWFuLWdpdC1icmFuY2gnO1xuXHRcdFx0XHRjb25zdCBoYXNHZW5lcmljTmFtZSA9ICFzYXZlZEl0ZW0ubmFtZSB8fCBzYXZlZEl0ZW0ubmFtZSA9PT0gY2Fub25pY2FsTmFtZSB8fCBzYXZlZEl0ZW0ubmFtZSA9PT0gJ1N0YXR1cyBiYXIgaXRlbScgfHwgc2F2ZWRJdGVtLm5hbWUuc3RhcnRzV2l0aCgncGx1Z2luLScpO1xuXG5cdFx0XHRcdGlmIChlbGVtZW50TmFtZSAmJiAoaXNCcmFuY2ggfHwgaGFzR2VuZXJpY05hbWUpKSB7XG5cdFx0XHRcdFx0c2F2ZWRJdGVtLm5hbWUgPSBlbGVtZW50TmFtZS5zdWJzdHJpbmcoMCwgNTApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBOZXcgaXRlbSBmb3VuZCAtIGFkZCB0byBzZXR0aW5nc1xuXHRcdFx0XHRsZXQgZWxlbWVudE5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IGVsZW1lbnQudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCBjYW5vbmljYWxOYW1lO1xuXHRcdFx0XHRuZXdJdGVtcy5wdXNoKHtcblx0XHRcdFx0XHRpZDogaWQsXG5cdFx0XHRcdFx0bmFtZTogZWxlbWVudE5hbWUuc3Vic3RyaW5nKDAsIDUwKSxcblx0XHRcdFx0XHR0eXBlOiAnZXhpc3RpbmcnLFxuXHRcdFx0XHRcdGhpZGRlbjogZmFsc2UsXG5cdFx0XHRcdFx0bWRPbmx5OiBmYWxzZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgbmV3IGl0ZW1zIHRvIHNldHRpbmdzXG5cdFx0aWYgKG5ld0l0ZW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zLnB1c2goLi4ubmV3SXRlbXMpO1xuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSGVscGVyIHRvIHBhcnNlIGludGVybmFsIElEIGludG8gbmFtZSBhbmQgaW5kZXhcblx0ICovXG5cdHByaXZhdGUgcGFyc2VFbGVtZW50SWQoaWQ6IHN0cmluZyk6IHsgbmFtZTogc3RyaW5nLCBpbmRleDogbnVtYmVyIH0ge1xuXHRcdGNvbnN0IHBhcnRzID0gaWQuc3BsaXQoJzsnKTtcblx0XHRjb25zdCBpbmRleFN0ciA9IHBhcnRzLnBvcCgpO1xuXHRcdGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoaW5kZXhTdHIgfHwgJzEnLCAxMCk7XG5cdFx0Y29uc3QgbmFtZSA9IHBhcnRzLmpvaW4oJzsnKTtcblx0XHRyZXR1cm4geyBuYW1lLCBpbmRleCB9O1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlb3JkZXIgYW5kIGFwcGx5IHZpc2liaWxpdHkgdG8gYWxsIHN0YXR1cyBiYXIgaXRlbXMgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdCAqIEhhbmRsZXMgc3RpY2t5IGl0ZW1zIChsZWZ0L3JpZ2h0KSBhbmQgaXRlbXMgdGhhdCBhcmVuJ3QgY3VycmVudGx5IHZpc2libGVcblx0ICogXG5cdCAqIE5vdGU6IEl0ZW1zIHdpdGggdGhlIHNhbWUgc3RpY2t5IHBvc2l0aW9uIG1haW50YWluIHRoZWlyIHJlbGF0aXZlIG9yZGVyXG5cdCAqIChlLmcuLCBpZiAzIGl0ZW1zIGFyZSBzdGlja3ktbGVmdCwgdGhleSBhcHBlYXIgaW4gdGhlIG9yZGVyIHRoZXkncmUgaW4gc2V0dGluZ3MpXG5cdCAqL1xuXHRwdWJsaWMgcmVvcmRlcigpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG5cblx0XHQvLyBTZXQgZmxhZyB0byBwcmV2ZW50IG9ic2VydmVyIGZyb20gdHJpZ2dlcmluZyBkdXJpbmcgcmVvcmRlclxuXHRcdHRoaXMuaXNSZW9yZGVyaW5nID0gdHJ1ZTtcblxuXHRcdC8vIFJlbW92ZSBhbGwgY3VzdG9tIGFjdGlvbnMgZmlyc3Rcblx0XHR0aGlzLmN1c3RvbUFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uKSA9PiBhY3Rpb24ucmVtb3ZlKCkpO1xuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5jbGVhcigpO1xuXG5cdFx0Ly8gR2V0IGFsbCBleGlzdGluZyBzdGF0dXMgYmFyIGl0ZW1zIChleGNsdWRpbmcgb3VyIGN1c3RvbSBvbmVzKVxuXHRcdGNvbnN0IGFsbEV4aXN0aW5nRWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuY29udGFpbmVyLmNoaWxkcmVuKS5maWx0ZXIoXG5cdFx0XHRlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3N0YXR1cy1iYXItaXRlbScpICYmICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1pdGVtJylcblx0XHQpIGFzIEhUTUxFbGVtZW50W107XG5cblx0XHQvLyBTZXBhcmF0ZSBpdGVtcyBieSBzdGlja3kgcG9zaXRpb25cblx0XHRjb25zdCBsZWZ0U3RpY2t5OiBIVE1MRWxlbWVudFtdID0gW107XG5cdFx0Y29uc3QgcmlnaHRTdGlja3k6IEhUTUxFbGVtZW50W10gPSBbXTtcblx0XHRjb25zdCByZWd1bGFyOiBIVE1MRWxlbWVudFtdID0gW107XG5cdFx0Y29uc3QgYWN0aXZlTGVhZiA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TW9zdFJlY2VudExlYWYoKTtcblxuXHRcdC8vIFByb2Nlc3MgaXRlbXMgaW4gb3JkZXIgZnJvbSBzZXR0aW5nc1xuXHRcdGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG5cdFx0XHQvLyBDaGVjayB2aXNpYmlsaXR5XG5cdFx0XHRpZiAoaXRlbS5oaWRkZW4pIHtcblx0XHRcdFx0Ly8gSGlkZSBleGlzdGluZyBpdGVtc1xuXHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XG5cdFx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IGFsbEV4aXN0aW5nRWxlbWVudHMuZmluZCgoZWwpID0+XG5cdFx0XHRcdFx0XHRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJykgPT09IGl0ZW0uaWRcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBtZC9tZHgtb25seSBmaWx0ZXJcblx0XHRcdGlmIChpdGVtLm1kT25seSAmJiAhaXNNYXJrZG93blZpZXcoYWN0aXZlTGVhZikpIHtcblx0XHRcdFx0Ly8gSGlkZSBpZiBub3QgbWFya2Rvd24gdmlld1xuXHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XG5cdFx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IGFsbEV4aXN0aW5nRWxlbWVudHMuZmluZCgoZWwpID0+XG5cdFx0XHRcdFx0XHRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJykgPT09IGl0ZW0uaWRcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBjb21tYW5kIGV4aXN0cyBhbmQgbW9kZSBpcyBhY3RpdmVcblx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGNvbW1hbmRzPzogeyBbaWQ6IHN0cmluZ106IHsgaWQ6IHN0cmluZyB9IH0gfSB9KS5jb21tYW5kcztcblx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRzPy5jb21tYW5kcz8uW2l0ZW0uY29tbWFuZElkIHx8ICcnXTtcblx0XHRcdFx0Y29uc3QgbW9kZSA9IGl0ZW0ubW9kZSB8fCAnYW55Jztcblx0XHRcdFx0aWYgKGNvbW1hbmQgJiYgaXNNb2RlQWN0aXZlKG1vZGUsIHRoaXMucGx1Z2luKSkge1xuXHRcdFx0XHRcdHRoaXMuYWRkQ3VzdG9tQWN0aW9uKGl0ZW0pO1xuXHRcdFx0XHRcdGNvbnN0IGFjdGlvbiA9IHRoaXMuY3VzdG9tQWN0aW9ucy5nZXQoaXRlbSk7XG5cdFx0XHRcdFx0aWYgKGFjdGlvbikge1xuXHRcdFx0XHRcdFx0Ly8gQWRkIHRvIGFwcHJvcHJpYXRlIGxpc3QgYmFzZWQgb24gc3RpY2t5IHBvc2l0aW9uXG5cdFx0XHRcdFx0XHRpZiAoaXRlbS5zdGlja3kgPT09ICdsZWZ0Jykge1xuXHRcdFx0XHRcdFx0XHRsZWZ0U3RpY2t5LnB1c2goYWN0aW9uKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoaXRlbS5zdGlja3kgPT09ICdyaWdodCcpIHtcblx0XHRcdFx0XHRcdFx0cmlnaHRTdGlja3kucHVzaChhY3Rpb24pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmVndWxhci5wdXNoKGFjdGlvbik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBGaW5kIGV4aXN0aW5nIGVsZW1lbnQgKG1heSBub3QgZXhpc3QgaWYgcGx1Z2luIGlzbid0IGxvYWRlZClcblx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IGFsbEV4aXN0aW5nRWxlbWVudHMuZmluZCgoZWwpID0+XG5cdFx0XHRcdFx0ZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcpID09PSBpdGVtLmlkXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKGVsZW1lbnQpIHtcblx0XHRcdFx0XHRlbGVtZW50LnJlbW92ZUNsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJyk7XG5cdFx0XHRcdFx0Ly8gQWRkIHRvIGFwcHJvcHJpYXRlIGxpc3QgYmFzZWQgb24gc3RpY2t5IHBvc2l0aW9uXG5cdFx0XHRcdFx0aWYgKGl0ZW0uc3RpY2t5ID09PSAnbGVmdCcpIHtcblx0XHRcdFx0XHRcdGxlZnRTdGlja3kucHVzaChlbGVtZW50KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnKSB7XG5cdFx0XHRcdFx0XHRyaWdodFN0aWNreS5wdXNoKGVsZW1lbnQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWd1bGFyLnB1c2goZWxlbWVudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIElmIGVsZW1lbnQgZG9lc24ndCBleGlzdCwgaXRlbSBpcyBrZXB0IGluIHNldHRpbmdzIGJ1dCBub3QgZGlzcGxheWVkIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENvbWJpbmU6IGxlZnQgc3RpY2t5IGl0ZW1zIGZpcnN0LCB0aGVuIHJlZ3VsYXIgaXRlbXMsIHRoZW4gcmlnaHQgc3RpY2t5IGl0ZW1zXG5cdFx0Y29uc3Qgb3JkZXJlZEVsZW1lbnRzID0gWy4uLmxlZnRTdGlja3ksIC4uLnJlZ3VsYXIsIC4uLnJpZ2h0U3RpY2t5XTtcblxuXHRcdC8vIFBoeXNpY2FsbHkgcmVvcmRlciBET00gZWxlbWVudHMgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIgZG9lcylcblx0XHQvLyBUaGlzIGlzIG1vcmUgcmVsaWFibGUgdGhhbiBDU1Mgb3JkZXIgcHJvcGVydHlcblx0XHRvcmRlcmVkRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuY29udGFpbmVyICYmIGVsZW1lbnQucGFyZW50RWxlbWVudCA9PT0gdGhpcy5jb250YWluZXIpIHtcblx0XHRcdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBBbHNvIHNldCBDU1Mgb3JkZXIgYXMgYmFja3VwIChpbiBjYXNlIGNvbnRhaW5lciB1c2VzIGZsZXhib3gpXG5cdFx0b3JkZXJlZEVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG5cdFx0XHRzZXRDc3NQcm9wcyhlbGVtZW50LCB7IG9yZGVyOiAoaW5kZXggKyAxKS50b1N0cmluZygpIH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQ2xlYXIgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IERPTSB0byBzZXR0bGVcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMuaXNSZW9yZGVyaW5nID0gZmFsc2U7XG5cdFx0fSwgNTApO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZCBhIGN1c3RvbSBjb21tYW5kIGFjdGlvbiB0byB0aGUgc3RhdHVzIGJhciAobGlrZSBDb21tYW5kZXIpXG5cdCAqL1xuXHRwcml2YXRlIGFkZEN1c3RvbUFjdGlvbihpdGVtOiBTdGF0dXNCYXJJdGVtKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lciB8fCAhaXRlbS5jb21tYW5kSWQpIHJldHVybjtcblxuXHRcdC8vIERvbid0IGNyZWF0ZSBkdXBsaWNhdGUgaWYgYWxyZWFkeSBleGlzdHNcblx0XHRpZiAodGhpcy5jdXN0b21BY3Rpb25zLmhhcyhpdGVtKSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgYnRuID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1pdGVtIHN0YXR1cy1iYXItaXRlbSBtb2QtY2xpY2thYmxlJyxcblx0XHRcdGF0dHI6IHtcblx0XHRcdFx0J2FyaWEtbGFiZWwnOiBpdGVtLm5hbWUsXG5cdFx0XHRcdCdkYXRhLXRvb2x0aXAtcG9zaXRpb24nOiAndG9wJyxcblx0XHRcdFx0J2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJzogaXRlbS5pZCxcblx0XHRcdFx0J2RhdGEtdWktdHdlYWtlci1tYW5hZ2VkJzogJ3RydWUnLFxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdGlmIChpdGVtLmljb24pIHtcblx0XHRcdHNldEljb24oYnRuLCBpdGVtLmljb24pO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IGNvbG9yIGlmIHNldFxuXHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0c2V0Q3NzUHJvcHMoYnRuLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xuXHRcdH1cblxuXHRcdGJ0bi5vbmNsaWNrID0gKCk6IHZvaWQgPT4ge1xuXHRcdFx0Y29uc3QgY29tbWFuZHMgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCAmJiBpdGVtLmNvbW1hbmRJZCkge1xuXHRcdFx0XHR2b2lkIGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChpdGVtLmNvbW1hbmRJZCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChldmVudCkgPT4ge1xuXHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRuZXcgTWVudSgpXG5cdFx0XHRcdC5hZGRJdGVtKChtZW51SXRlbSkgPT4ge1xuXHRcdFx0XHRcdG1lbnVJdGVtLnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IGl0ZW0uaWNvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5pY29uID0gaWNvbklkO1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkSXRlbSgobWVudUl0ZW0pID0+IHtcblx0XHRcdFx0XHRtZW51SXRlbS5zZXRUaXRsZSgnRGVsZXRlJylcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdsdWNpZGUtdHJhc2gnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucmVtb3ZlSXRlbShpdGVtKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIEFkZCB3YXJuaW5nIGNsYXNzIHRvIG1ha2UgdGV4dCBhbmQgaWNvbiByZWRcblx0XHRcdFx0XHRjb25zdCBkb20gPSAobWVudUl0ZW0gYXMgdW5rbm93biBhcyB7IGRvbTogSFRNTEVsZW1lbnQgfSkuZG9tO1xuXHRcdFx0XHRcdGlmIChkb20pIHtcblx0XHRcdFx0XHRcdGRvbS5jbGFzc0xpc3QuYWRkKCdtb2Qtd2FybmluZycpO1xuXHRcdFx0XHRcdFx0Ly8gQWxzbyBtYWtlIHRoZSBpY29uIHJlZFxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0taWNvbiBzdmcnKTtcblx0XHRcdFx0XHRcdGlmIChpY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHNldENzc1Byb3BzIHRvIHNldCBjb2xvciAoYWxyZWFkeSBpbXBvcnRlZCBmcm9tIHVpTWFuYWdlcilcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsIGFzIEhUTUxFbGVtZW50LCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5jdXN0b21BY3Rpb25zLnNldChpdGVtLCBidG4pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZCBhIG5ldyBjdXN0b20gY29tbWFuZCBpdGVtXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgYWRkQ3VzdG9tQ29tbWFuZChwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcyA9IFtdO1xuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgc2hvd09uRmlsZVR5cGVzIHRvIG1kT25seSBmb3IgU3RhdHVzQmFySXRlbSAoU3RhdHVzQmFySXRlbSBzdGlsbCB1c2VzIG1kT25seSlcblx0XHQvLyBJZiBzaG93T25GaWxlVHlwZXMgaW5jbHVkZXMgXCJtZFwiIG9yIFwibWR4XCIsIHNldCBtZE9ubHkgdG8gdHJ1ZVxuXHRcdGNvbnN0IGhhc01hcmtkb3duRmlsdGVyID0gcGFpci5zaG93T25GaWxlVHlwZXMgJiZcblx0XHRcdChwYWlyLnNob3dPbkZpbGVUeXBlcy5pbmNsdWRlcygnbWQnKSB8fCBwYWlyLnNob3dPbkZpbGVUeXBlcy5pbmNsdWRlcygnbWR4JykpO1xuXHRcdGNvbnN0IG1kT25seSA9IGhhc01hcmtkb3duRmlsdGVyID8gdHJ1ZSA6IGZhbHNlO1xuXG5cdFx0Y29uc3QgaXRlbTogU3RhdHVzQmFySXRlbSA9IHtcblx0XHRcdGlkOiBgY3VzdG9tLSR7cGFpci5pZH1gLFxuXHRcdFx0bmFtZTogcGFpci5uYW1lLFxuXHRcdFx0ZGlzcGxheU5hbWU6IHBhaXIuZGlzcGxheU5hbWUsXG5cdFx0XHRpY29uOiBwYWlyLmljb24sXG5cdFx0XHR0eXBlOiAnY3VzdG9tJyxcblx0XHRcdGhpZGRlbjogZmFsc2UsXG5cdFx0XHRtZE9ubHk6IG1kT25seSxcblx0XHRcdGNvbW1hbmRJZDogcGFpci5pZCxcblx0XHRcdGNvbG9yOiBwYWlyLmNvbG9yLFxuXHRcdFx0bW9kZTogcGFpci5tb2RlLFxuXHRcdH07XG5cblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5wdXNoKGl0ZW0pO1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBpdGVtXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgcmVtb3ZlSXRlbShpdGVtOiBTdGF0dXNCYXJJdGVtKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykgcmV0dXJuO1xuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuaW5kZXhPZihpdGVtKTtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9XG5cdFx0dGhpcy5yZW9yZGVyKCk7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGl0ZW0gdmlzaWJpbGl0eVxuXHQgKi9cblx0cHVibGljIGFzeW5jIHVwZGF0ZUl0ZW1WaXNpYmlsaXR5KGl0ZW06IFN0YXR1c0Jhckl0ZW0sIGhpZGRlbjogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGl0ZW0uaGlkZGVuID0gaGlkZGVuO1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBpdGVtIG1kL21keC1vbmx5IHNldHRpbmdcblx0ICovXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVJdGVtTWRPbmx5KGl0ZW06IFN0YXR1c0Jhckl0ZW0sIG1kT25seTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGl0ZW0ubWRPbmx5ID0gbWRPbmx5O1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBidXR0b24gbmFtZXMvdG9vbHRpcHMgZm9yIGFsbCBleGlzdGluZyBjdXN0b20gYnV0dG9uc1xuXHQgKi9cblx0cHVibGljIHVwZGF0ZUJ1dHRvbk5hbWVzKCk6IHZvaWQge1xuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5mb3JFYWNoKChidXR0b24sIGl0ZW0pID0+IHtcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLm5hbWUpO1xuXHRcdFx0Ly8gVXBkYXRlIGNvbG9yIGlmIG5lZWRlZFxuXHRcdFx0aWYgKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XG5cdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbiwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuIiwgIi8qKlxyXG4gKiBFeHBsb3JlciBNYW5hZ2VyIC0gTWFuYWdlcyBjdXN0b20gY29tbWFuZCBidXR0b25zIGluIHRoZSBmaWxlIGV4cGxvcmVyIG5hdmlnYXRpb24gYXJlYVxyXG4gKiBCYXNlZCBvbiBDb21tYW5kZXIncyBFeHBsb3Jlck1hbmFnZXIsIGJ1dCB3aXRoIG5hdGl2ZSBDU1MgY2xhc3Nlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFdvcmtzcGFjZUxlYWYsIHNldEljb24sIE1lbnUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IENvbW1hbmRJY29uUGFpciwgRXhwbG9yZXJCdXR0b25JdGVtIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBpc01vZGVBY3RpdmUsIGlzQ29tbWFuZENoZWNrZWQgfSBmcm9tICcuLi91dGlscy9jb21tYW5kVXRpbHMnO1xyXG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcclxuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuLi91dGlscy9jc3NVdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRXhwbG9yZXJNYW5hZ2VyIHtcclxuXHRwcml2YXRlIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xyXG5cdHByaXZhdGUgYnV0dG9uczogTWFwPHN0cmluZywgSFRNTEVsZW1lbnQ+ID0gbmV3IE1hcCgpO1xyXG5cdHByaXZhdGUgb2JzZXJ2ZXJzOiBNdXRhdGlvbk9ic2VydmVyW10gPSBbXTtcclxuXHRwcml2YXRlIGlzUmVvcmRlcmluZyA9IGZhbHNlOyAvLyBGbGFnIHRvIHByZXZlbnQgb2JzZXJ2ZXIgZnJvbSB0cmlnZ2VyaW5nIGR1cmluZyByZW9yZGVyXHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuaW5pdCgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBpbml0KCk6IHZvaWQge1xyXG5cdFx0Ly8gV2FpdCBmb3Igd29ya3NwYWNlIHRvIGJlIHJlYWR5XHJcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHQvLyBJbml0aWFsaXplIGl0ZW1zIGFycmF5IGlmIG5lZWRlZFxyXG5cdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMpIHtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zID0gW107XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1pZ3JhdGUgZXhpc3RpbmcgZXhwbG9yZXJDb21tYW5kcyBpZiBuZWVkZWRcclxuXHRcdFx0dGhpcy5taWdyYXRlRXhwbG9yZXJDb21tYW5kcygpO1xyXG5cclxuXHRcdFx0Ly8gQ29uc29saWRhdGUgc2V0dGluZ3MgYW5kIGVsZW1lbnRzIChkZXRlY3QgYWxsIGJ1dHRvbnMpXHJcblx0XHRcdHRoaXMuY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk7XHJcblxyXG5cdFx0XHQvLyBTZXQgdXAgbGF5b3V0IGNoYW5nZSBsaXN0ZW5lciBvbmNlIChsaWtlIENvbW1hbmRlciBkb2VzKVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpO1xyXG5cdFx0XHRcdFx0dGhpcy5yZW9yZGVyKCk7XHJcblx0XHRcdFx0XHQvLyBBcHBseSBuYXRpdmUgaWNvbiBvdmVycmlkZXMgYWZ0ZXIgbGF5b3V0IGNoYW5nZXNcclxuXHRcdFx0XHRcdHRoaXMuYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdC8vIEFkZCBidXR0b25zIHRvIGFsbCBleGlzdGluZyBleHBsb3JlcnNcclxuXHRcdFx0dGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXMoKTtcclxuXHJcblx0XHRcdC8vIFJlb3JkZXIgaW1tZWRpYXRlbHkgdG8gZW5zdXJlIGNvcnJlY3Qgb3JkZXIgb24gc3RhcnR1cFxyXG5cdFx0XHR0aGlzLnJlb3JkZXIoKTtcclxuXHJcblx0XHRcdC8vIFNldCB1cCBtdXRhdGlvbiBvYnNlcnZlciBmb3IgZXh0ZXJuYWwgYnV0dG9uIGRldGVjdGlvbiAoYWZ0ZXIgZXhwbG9yZXJzIGFyZSByZWFkeSlcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5zZXR1cE11dGF0aW9uT2JzZXJ2ZXIoKTtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHJcblx0XHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcclxuXHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXIoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2xlYW51cCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIGFsbCBidXR0b25zIGNyZWF0ZWQgYnkgdGhpcyBtYW5hZ2VyIGZyb20gdGhlIERPTVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBjbGVhbnVwKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vYnNlcnZlcnMuZm9yRWFjaChvYnNlcnZlciA9PiBvYnNlcnZlci5kaXNjb25uZWN0KCkpO1xyXG5cdFx0dGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuXHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKG5hdkJ1dHRvbnNDb250YWluZXIpIHtcclxuXHRcdFx0XHRjb25zdCBtYW5hZ2VkQnV0dG9ucyA9IG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdWktdHdlYWtlci1tYW5hZ2VkPVwidHJ1ZVwiXScpO1xyXG5cdFx0XHRcdG1hbmFnZWRCdXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5yZW1vdmUoKSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5idXR0b25zLmNsZWFyKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZEJ1dHRvbnNUb0FsbExlYXZlcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRleHBsb3JlcnMuZm9yRWFjaCgobGVhZikgPT4ge1xyXG5cdFx0XHR0aGlzLmFkZEJ1dHRvbnNUb0V4cGxvcmVyKGxlYWYpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZEJ1dHRvbnNUb0V4cGxvcmVyKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiB2b2lkIHtcclxuXHRcdC8vIEp1c3QgcmVvcmRlciAtIGl0IHdpbGwgY3JlYXRlIG1pc3NpbmcgY3VzdG9tIGJ1dHRvbnMgYW5kIHBvc2l0aW9uIGV2ZXJ5dGhpbmcgY29ycmVjdGx5XHJcblx0XHR0aGlzLnJlb3JkZXIoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE1pZ3JhdGUgZXhpc3RpbmcgZXhwbG9yZXJDb21tYW5kcyB0byBleHBsb3JlckJ1dHRvbkl0ZW1zXHJcblx0ICovXHJcblx0cHVibGljIG1pZ3JhdGVFeHBsb3JlckNvbW1hbmRzKCk6IHZvaWQge1xyXG5cdFx0Ly8gLi4uIGV4aXN0aW5nIGNvZGUgLi4uXHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNyZWF0ZU9yVXBkYXRlRXhwbG9yZXJCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBsZWFmOiBXb3Jrc3BhY2VMZWFmKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcclxuXHRcdC8vIENoZWNrIGlmIGJ1dHRvbiBhbHJlYWR5IGV4aXN0cyAobGlrZSBDb21tYW5kZXIpXHJcblx0XHRjb25zdCBleGlzdGluZ0J1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKGV4aXN0aW5nQnV0dG9uKSB7XHJcblx0XHRcdC8vIFVwZGF0ZSBleGlzdGluZyBidXR0b25cclxuXHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcGFpci5uYW1lKTtcclxuXHRcdFx0Ly8gQXBwbHkgY29sb3Igb25seSBpZiBjdXN0b20gY29sb3IgaXMgc2V0IChub3QgYmxhY2svZGVmYXVsdClcclxuXHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc3R5bGUuY29sb3IgPSBwYWlyLmNvbG9yO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGVcclxuXHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShleGlzdGluZ0J1dHRvbiwgcGFpcik7XHJcblx0XHRcdHJldHVybiBleGlzdGluZ0J1dHRvbjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBkZXZpY2UgbW9kZVxyXG5cdFx0aWYgKCFpc01vZGVBY3RpdmUocGFpci5tb2RlLCB0aGlzLnBsdWdpbikpIHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGJ1dHRvbiB3aXRoIG5hdGl2ZSBDU1MgY2xhc3NlcyAoZXhhY3RseSBsaWtlIENvbW1hbmRlcilcclxuXHRcdGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZURpdih7XHJcblx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIG5hdi1hY3Rpb24tYnV0dG9uJyxcclxuXHRcdFx0YXR0cjoge1xyXG5cdFx0XHRcdCdkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQnOiBwYWlyLmlkLFxyXG5cdFx0XHRcdCdhcmlhLWxhYmVsJzogcGFpci5uYW1lLFxyXG5cdFx0XHRcdCdhcmlhLWxhYmVsLXBvc2l0aW9uJzogJ3RvcCcsXHJcblx0XHRcdFx0J2RhdGEtdWktdHdlYWtlci1tYW5hZ2VkJzogJ3RydWUnLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgdG9nZ2xlIHN0YXRlIGFuZCBhcHBseSBpY29uL2NsYXNzXHJcblx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblxyXG5cdFx0Ly8gQ2xpY2sgaGFuZGxlclxyXG5cdFx0YnV0dG9uLm9uY2xpY2sgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xyXG5cdFx0XHRcdC8vIENvbW1hbmQgZXhlY3V0aW9uIGlzIHRyYWNrZWQgYnkgdGhlIGludGVyY2VwdG9yIGluIG1haW4udHNcclxuXHRcdFx0XHQvLyBKdXN0IGV4ZWN1dGUgdGhlIGNvbW1hbmQgLSB0aGUgaW50ZXJjZXB0b3Igd2lsbCBoYW5kbGUgdG9nZ2xlIHRyYWNraW5nXHJcblx0XHRcdFx0dm9pZCBjb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQocGFpci5pZCk7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhZnRlciBjb21tYW5kIGV4ZWN1dGlvblxyXG5cdFx0XHRcdC8vIFRoZSBpbnRlcmNlcHRvciB3aWxsIGFsc28gcmVmcmVzaCwgYnV0IHdlIHVwZGF0ZSB0aGlzIGJ1dHRvbiBpbW1lZGlhdGVseSBmb3IgcmVzcG9uc2l2ZW5lc3NcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcclxuXHRcdFx0XHRcdC8vIEFsc28gdXBkYXRlIGFsbCBvdGhlciBidXR0b25zIGZvciB0aGlzIGNvbW1hbmRcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQWxsQnV0dG9uc0ZvckNvbW1hbmQocGFpci5pZCk7XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMuc2V0KHBhaXIuaWQsIGJ1dHRvbik7XHJcblxyXG5cdFx0Ly8gQWRkIGNvbnRleHQgbWVudSAocmlnaHQtY2xpY2spXHJcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdG5ldyBNZW51KClcclxuXHRcdFx0XHQuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKVxyXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgKGljb25JZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IHBhaXIuaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLmljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnRGVsZXRlJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS10cmFzaCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucmVtb3ZlQ29tbWFuZChwYWlyKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHQvLyBBZGQgd2FybmluZyBjbGFzcyB0byBtYWtlIHRleHQgYW5kIGljb24gcmVkXHJcblx0XHRcdFx0XHRjb25zdCBkb20gPSAoaXRlbSBhcyB1bmtub3duIGFzIHsgZG9tOiBIVE1MRWxlbWVudCB9KS5kb207XHJcblx0XHRcdFx0XHRpZiAoZG9tKSB7XHJcblx0XHRcdFx0XHRcdGRvbS5jbGFzc0xpc3QuYWRkKCdtb2Qtd2FybmluZycpO1xyXG5cdFx0XHRcdFx0XHQvLyBBbHNvIG1ha2UgdGhlIGljb24gcmVkXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGRvbS5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtLWljb24gc3ZnJyk7XHJcblx0XHRcdFx0XHRcdGlmIChpY29uRWwpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBVc2Ugc2V0Q3NzUHJvcHMgdG8gc2V0IGNvbG9yIChhbHJlYWR5IGltcG9ydGVkIGZyb20gdWlNYW5hZ2VyKVxyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25FbCBhcyBIVE1MRWxlbWVudCwgeyBjb2xvcjogJ3ZhcigtLXRleHQtZXJyb3IpJyB9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQXBwZW5kIGJ1dHRvbiB0byBjb250YWluZXIgKGV4YWN0bHkgbGlrZSBDb21tYW5kZXIpXHJcblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuXHRcdHJldHVybiBidXR0b247XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZW5lcmF0ZSBjYW5vbmljYWwgbmFtZSBmcm9tIGJ1dHRvbiBlbGVtZW50XHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZW5lcmF0ZUNhbm9uaWNhbE5hbWUoZWxlbWVudDogSFRNTEVsZW1lbnQsIGFyaWFMYWJlbDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIEZvciBuYXRpdmUgYnV0dG9ucywgdXNlIHRoZSBhcmlhLWxhYmVsIGRpcmVjdGx5XHJcblx0XHRjb25zdCBuYXRpdmVCdXR0b25NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcblx0XHRcdCdOZXcgbm90ZSc6ICduZXdOb3RlJyxcclxuXHRcdFx0J05ldyBmb2xkZXInOiAnbmV3Rm9sZGVyJyxcclxuXHRcdFx0J0NoYW5nZSBzb3J0IG9yZGVyJzogJ3NvcnRPcmRlcicsXHJcblx0XHRcdCdBdXRvLXJldmVhbCBjdXJyZW50IGZpbGUnOiAnYXV0b1JldmVhbCcsXHJcblx0XHRcdCdDb2xsYXBzZSBhbGwnOiAnY29sbGFwc2VBbGwnLFxyXG5cdFx0XHQnRXhwYW5kIGFsbCc6ICdjb2xsYXBzZUFsbCcsIC8vIEJvdGggbWFwIHRvIHNhbWUga2V5XHJcblx0XHR9O1xyXG5cclxuXHRcdGlmIChuYXRpdmVCdXR0b25NYXBbYXJpYUxhYmVsXSkge1xyXG5cdFx0XHRyZXR1cm4gYG5hdGl2ZS0ke25hdGl2ZUJ1dHRvbk1hcFthcmlhTGFiZWxdfWA7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9yIGN1c3RvbSBjb21tYW5kcywgdXNlIGNvbW1hbmQgSURcclxuXHRcdGNvbnN0IGNvbW1hbmRJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQnKTtcclxuXHRcdGlmIChjb21tYW5kSWQpIHtcclxuXHRcdFx0cmV0dXJuIGBjdXN0b20tJHtjb21tYW5kSWR9YDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3IgZXh0ZXJuYWwgYnV0dG9ucywgdXNlIGFyaWEtbGFiZWwgKyBjbGFzcyBuYW1lcyB0byBnZW5lcmF0ZSBzdGFibGUgSURcclxuXHRcdGNvbnN0IGFsbENsYXNzZXMgPSBBcnJheS5mcm9tKGVsZW1lbnQuY2xhc3NMaXN0KTtcclxuXHRcdGNvbnN0IGlnbm9yZWRDbGFzc2VzID0gWydjbGlja2FibGUtaWNvbicsICduYXYtYWN0aW9uLWJ1dHRvbiddO1xyXG5cdFx0Y29uc3Qgc3RhYmxlQ2xhc3NlcyA9IGFsbENsYXNzZXMuZmlsdGVyKGNscyA9PiAhaWdub3JlZENsYXNzZXMuaW5jbHVkZXMoY2xzKSk7XHJcblxyXG5cdFx0Ly8gVHJ5IHRvIGZpbmQgcGx1Z2luIGlkZW50aWZpZXIgaW4gY2xhc3Nlc1xyXG5cdFx0Y29uc3QgcGx1Z2luQ2xhc3MgPSBzdGFibGVDbGFzc2VzLmZpbmQoY2xzID0+XHJcblx0XHRcdGNscy5pbmNsdWRlcygncGx1Z2luLScpIHx8XHJcblx0XHRcdGNscy5pbmNsdWRlcygnY29tbWFuZGVyJykgfHxcclxuXHRcdFx0Y2xzLmluY2x1ZGVzKCdleHBsb3Jlci1mb2N1cycpXHJcblx0XHQpO1xyXG5cclxuXHRcdGlmIChwbHVnaW5DbGFzcykge1xyXG5cdFx0XHQvLyBVc2UgcGx1Z2luIGNsYXNzIGFzIGJhc2VcclxuXHRcdFx0Y29uc3Qgc2FuaXRpemVkQXJpYUxhYmVsID0gYXJpYUxhYmVsLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXowLTldKy9nLCAnLScpO1xyXG5cdFx0XHRyZXR1cm4gYGV4dGVybmFsLSR7cGx1Z2luQ2xhc3N9LSR7c2FuaXRpemVkQXJpYUxhYmVsfWA7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRmFsbGJhY2s6IHVzZSBhcmlhLWxhYmVsXHJcblx0XHRjb25zdCBzYW5pdGl6ZWQgPSBhcmlhTGFiZWwudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtejAtOV0rL2csICctJyk7XHJcblx0XHRyZXR1cm4gYGV4dGVybmFsLSR7c2FuaXRpemVkfWA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb25zb2xpZGF0ZSBzZXR0aW5ncyBhbmQgZWxlbWVudHMgLSBkZXRlY3QgYWxsIGJ1dHRvbnMgYW5kIG1lcmdlIHdpdGggc2F2ZWQgaXRlbXNcclxuXHQgKi9cclxuXHRwdWJsaWMgY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcclxuXHRcdGlmIChleHBsb3JlcnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gVXNlIGZpcnN0IGV4cGxvcmVyIGFzIHJlZmVyZW5jZSAoYWxsIGV4cGxvcmVycyBzaG91bGQgaGF2ZSBzYW1lIGJ1dHRvbnMpXHJcblx0XHRjb25zdCBmaXJzdEV4cGxvcmVyID0gZXhwbG9yZXJzWzBdO1xyXG5cdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGZpcnN0RXhwbG9yZXIudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgYnV0dG9ucyBmcm9tIERPTSAoaW4gRE9NIG9yZGVyKVxyXG5cdFx0Y29uc3QgZXhpc3RpbmdCdXR0b25zID0gQXJyYXkuZnJvbShuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCcubmF2LWFjdGlvbi1idXR0b24nKSkuZmlsdGVyKFxyXG5cdFx0XHRlbGVtZW50ID0+IHtcclxuXHRcdFx0XHQvLyBDUklUSUNBTCBGSVg6IElnbm9yZSBvcnBoYW5lZCBtYW5hZ2VkIGJ1dHRvbnMgKGUuZy4sIGZyb20gZGVsZXRlZCBkYXRhKVxyXG5cdFx0XHRcdGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLW1hbmFnZWQnKSA9PT0gJ3RydWUnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJyk7XHJcblx0XHRcdFx0XHQvLyBJZiBpdCdzIGEgbWFuYWdlZCBidXR0b24gYnV0IG5vdCBpbiBvdXIgY3VycmVudCBpdGVtcyBsaXN0LCBpZ25vcmUgaXQgZm9yIGRpc2NvdmVyeVxyXG5cdFx0XHRcdFx0aWYgKCFjb21tYW5kSWQgfHwgIXRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMuc29tZShpdGVtID0+IGl0ZW0uY29tbWFuZElkID09PSBjb21tYW5kSWQpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gR2V0IHNhdmVkIGl0ZW1zIGZyb20gc2V0dGluZ3NcclxuXHRcdGNvbnN0IHNhdmVkSXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zIHx8IFtdO1xyXG5cdFx0Y29uc3Qgc2F2ZWRJdGVtc01hcCA9IG5ldyBNYXAoc2F2ZWRJdGVtcy5tYXAoaXRlbSA9PiBbaXRlbS5pZCwgaXRlbV0pKTtcclxuXHRcdGNvbnN0IG1hdGNoZWRTYXZlZElkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG5cdFx0Y29uc3QgbmV3SXRlbXM6IEV4cGxvcmVyQnV0dG9uSXRlbVtdID0gW107XHJcblxyXG5cdFx0Ly8gVHJhY2sgZWxlbWVudCBjb3VudHMgcGVyIG5hbWUgcGF0dGVyblxyXG5cdFx0Y29uc3QgZWxlbWVudENvdW50OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcblxyXG5cdFx0Ly8gUHJvY2VzcyBlbGVtZW50cyBpbiBET00gb3JkZXJcclxuXHRcdGV4aXN0aW5nQnV0dG9ucy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRcdGNvbnN0IGFyaWFMYWJlbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykgfHwgJyc7XHJcblx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQnKTtcclxuXHJcblx0XHRcdC8vIEdlbmVyYXRlIGNhbm9uaWNhbCBuYW1lIGFuZCBJRFxyXG5cdFx0XHRjb25zdCBjYW5vbmljYWxOYW1lID0gdGhpcy5nZW5lcmF0ZUNhbm9uaWNhbE5hbWUoZWxlbWVudCwgYXJpYUxhYmVsKTtcclxuXHRcdFx0bGV0IGlkID0gY2Fub25pY2FsTmFtZTtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBuYXRpdmUgYnV0dG9uICh0aGV5IGRvbid0IGhhdmUgaW5kaWNlcylcclxuXHRcdFx0aWYgKGNhbm9uaWNhbE5hbWUuc3RhcnRzV2l0aCgnbmF0aXZlLScpKSB7XHJcblx0XHRcdFx0Ly8gTmF0aXZlIGJ1dHRvbnMgaGF2ZSBmaXhlZCBJRHNcclxuXHRcdFx0XHRpZCA9IGNhbm9uaWNhbE5hbWU7XHJcblx0XHRcdH0gZWxzZSBpZiAoY2Fub25pY2FsTmFtZS5zdGFydHNXaXRoKCdjdXN0b20tJykpIHtcclxuXHRcdFx0XHQvLyBDdXN0b20gY29tbWFuZHMgaGF2ZSBmaXhlZCBJRHMgYmFzZWQgb24gY29tbWFuZCBJRFxyXG5cdFx0XHRcdGlkID0gY2Fub25pY2FsTmFtZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBFeHRlcm5hbCBidXR0b25zIG1pZ2h0IGhhdmUgbXVsdGlwbGUgaW5zdGFuY2VzIC0gYWRkIGluZGV4XHJcblx0XHRcdFx0Y29uc3QgYmFzZU5hbWUgPSBjYW5vbmljYWxOYW1lO1xyXG5cdFx0XHRcdGNvbnN0IGNvdW50ID0gKGJhc2VOYW1lIGluIGVsZW1lbnRDb3VudCkgPyBlbGVtZW50Q291bnRbYmFzZU5hbWVdICsgMSA6IDE7XHJcblx0XHRcdFx0ZWxlbWVudENvdW50W2Jhc2VOYW1lXSA9IGNvdW50O1xyXG5cdFx0XHRcdGlkID0gY291bnQgPiAxID8gYCR7YmFzZU5hbWV9OyR7Y291bnR9YCA6IGJhc2VOYW1lO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBoYXZlIGEgc2F2ZWQgaXRlbSBmb3IgdGhpcyBJRFxyXG5cdFx0XHRpZiAoc2F2ZWRJdGVtc01hcC5oYXMoaWQpKSB7XHJcblx0XHRcdFx0bWF0Y2hlZFNhdmVkSWRzLmFkZChpZCk7XHJcblx0XHRcdFx0Y29uc3Qgc2F2ZWRJdGVtID0gc2F2ZWRJdGVtc01hcC5nZXQoaWQpITtcclxuXHRcdFx0XHQvLyBVcGRhdGUgbmFtZSBmcm9tIERPTSBpZiBpdCdzIGdlbmVyaWNcclxuXHRcdFx0XHRpZiAoIXNhdmVkSXRlbS5uYW1lIHx8IHNhdmVkSXRlbS5uYW1lID09PSBpZCB8fCBzYXZlZEl0ZW0ubmFtZS5zdGFydHNXaXRoKCdleHRlcm5hbC0nKSkge1xyXG5cdFx0XHRcdFx0c2F2ZWRJdGVtLm5hbWUgPSBhcmlhTGFiZWwgfHwgc2F2ZWRJdGVtLm5hbWUgfHwgaWQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFVwZGF0ZSBhcmlhTGFiZWwgaWYgaXQgY2hhbmdlZFxyXG5cdFx0XHRcdGlmIChhcmlhTGFiZWwpIHtcclxuXHRcdFx0XHRcdHNhdmVkSXRlbS5hcmlhTGFiZWwgPSBhcmlhTGFiZWw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIE5ldyBpdGVtIC0gZGV0ZXJtaW5lIHR5cGVcclxuXHRcdFx0XHRsZXQgdHlwZTogJ25hdGl2ZScgfCAnZXh0ZXJuYWwnIHwgJ2N1c3RvbSc7XHJcblx0XHRcdFx0aWYgKGNhbm9uaWNhbE5hbWUuc3RhcnRzV2l0aCgnbmF0aXZlLScpKSB7XHJcblx0XHRcdFx0XHR0eXBlID0gJ25hdGl2ZSc7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChjYW5vbmljYWxOYW1lLnN0YXJ0c1dpdGgoJ2N1c3RvbS0nKSkge1xyXG5cdFx0XHRcdFx0dHlwZSA9ICdjdXN0b20nO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0eXBlID0gJ2V4dGVybmFsJztcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIENyZWF0ZSBuZXcgaXRlbVxyXG5cdFx0XHRcdGNvbnN0IG5ld0l0ZW06IEV4cGxvcmVyQnV0dG9uSXRlbSA9IHtcclxuXHRcdFx0XHRcdGlkOiBpZCxcclxuXHRcdFx0XHRcdG5hbWU6IGFyaWFMYWJlbCB8fCBpZCxcclxuXHRcdFx0XHRcdGFyaWFMYWJlbDogYXJpYUxhYmVsLFxyXG5cdFx0XHRcdFx0dHlwZTogdHlwZSxcclxuXHRcdFx0XHRcdGNvbW1hbmRJZDogY29tbWFuZElkIHx8IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdGhpZGRlbjogZmFsc2UsXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Ly8gRm9yIGN1c3RvbSBjb21tYW5kcywgY29weSBwcm9wZXJ0aWVzIGZyb20gZXhwbG9yZXJDb21tYW5kc1xyXG5cdFx0XHRcdGlmICh0eXBlID09PSAnY3VzdG9tJyAmJiBjb21tYW5kSWQpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nQ29tbWFuZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChjID0+IGMuaWQgPT09IGNvbW1hbmRJZCk7XHJcblx0XHRcdFx0XHRpZiAoZXhpc3RpbmdDb21tYW5kKSB7XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0uaWNvbiA9IGV4aXN0aW5nQ29tbWFuZC5pY29uO1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLmRpc3BsYXlOYW1lID0gZXhpc3RpbmdDb21tYW5kLmRpc3BsYXlOYW1lO1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLm1vZGUgPSBleGlzdGluZ0NvbW1hbmQubW9kZTtcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS5jb2xvciA9IGV4aXN0aW5nQ29tbWFuZC5jb2xvcjtcclxuXHRcdFx0XHRcdFx0bmV3SXRlbS5zaG93T25GaWxlVHlwZXMgPSBleGlzdGluZ0NvbW1hbmQuc2hvd09uRmlsZVR5cGVzO1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLmhpZGVPbkZpbGVUeXBlcyA9IGV4aXN0aW5nQ29tbWFuZC5oaWRlT25GaWxlVHlwZXM7XHJcblx0XHRcdFx0XHRcdG5ld0l0ZW0udG9nZ2xlSWNvbiA9IGV4aXN0aW5nQ29tbWFuZC50b2dnbGVJY29uO1xyXG5cdFx0XHRcdFx0XHRuZXdJdGVtLnVzZUFjdGl2ZUNsYXNzID0gZXhpc3RpbmdDb21tYW5kLnVzZUFjdGl2ZUNsYXNzO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0bmV3SXRlbXMucHVzaChuZXdJdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWRkIG5ldyBpdGVtcyB0byBzZXR0aW5nc1xyXG5cdFx0aWYgKG5ld0l0ZW1zLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJCdXR0b25JdGVtcy5wdXNoKC4uLm5ld0l0ZW1zKTtcclxuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB1cCBtdXRhdGlvbiBvYnNlcnZlciB0byBkZXRlY3QgbmV3IGV4dGVybmFsIGJ1dHRvbnNcclxuXHQgKi9cclxuXHRwcml2YXRlIHNldHVwTXV0YXRpb25PYnNlcnZlcigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRpZiAoZXhwbG9yZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIFNldCB1cCBvYnNlcnZlciBmb3IgZWFjaCBleHBsb3JlclxyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGV4cGxvcmVyKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBleHBsb3Jlci52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoIW5hdkJ1dHRvbnNDb250YWluZXIpIHJldHVybjtcclxuXHJcblx0XHRcdGxldCBvYnNlcnZlclRpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xyXG5cdFx0XHRcdGlmICh0aGlzLmlzUmVvcmRlcmluZykgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHQvLyBPbmx5IHRyaWdnZXIgaWYgdGhlcmUgYXJlIGFjdHVhbGx5IG5ldyBub2RlcyBhZGRlZCAobm90IGp1c3QgcmVvcmRlcmVkKVxyXG5cdFx0XHRcdGNvbnN0IGhhc05ld05vZGVzID0gbXV0YXRpb25zLnNvbWUobXV0YXRpb24gPT5cclxuXHRcdFx0XHRcdG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCAmJlxyXG5cdFx0XHRcdFx0QXJyYXkuZnJvbShtdXRhdGlvbi5hZGRlZE5vZGVzKS5zb21lKG5vZGUgPT5cclxuXHRcdFx0XHRcdFx0bm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmXHJcblx0XHRcdFx0XHRcdG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCduYXYtYWN0aW9uLWJ1dHRvbicpICYmXHJcblx0XHRcdFx0XHRcdCFub2RlLmhhc0F0dHJpYnV0ZSgnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJykgLy8gT25seSBleHRlcm5hbCBidXR0b25zIChub3Qgb3VyIGN1c3RvbSBvbmVzKVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmICghaGFzTmV3Tm9kZXMpIHJldHVybjsgLy8gU2tpcCBpZiBubyBuZXcgZXh0ZXJuYWwgYnV0dG9uc1xyXG5cclxuXHRcdFx0XHRpZiAob2JzZXJ2ZXJUaW1lb3V0KSB7XHJcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQob2JzZXJ2ZXJUaW1lb3V0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b2JzZXJ2ZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoIXRoaXMuaXNSZW9yZGVyaW5nKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDEwMDApOyAvLyBMb25nZXIgZGVib3VuY2UgdG8gcHJldmVudCBmbGlja2VyaW5nXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0b2JzZXJ2ZXIub2JzZXJ2ZShuYXZCdXR0b25zQ29udGFpbmVyLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogZmFsc2UgfSk7XHJcblx0XHRcdHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW9yZGVyIGJ1dHRvbnMgYmFzZWQgb24gc2V0dGluZ3Mgb3JkZXJcclxuXHQgKi9cclxuXHRwdWJsaWMgcmVvcmRlcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuaXNSZW9yZGVyaW5nID0gdHJ1ZTtcclxuXHJcblx0XHQvLyBEaXNjb25uZWN0IG9ic2VydmVycyB0ZW1wb3JhcmlseSB0byBwcmV2ZW50IGZsaWNrZXJpbmdcclxuXHRcdHRoaXMub2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpKTtcclxuXHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHQvLyBHZXQgYWxsIGJ1dHRvbnNcclxuXHRcdFx0Y29uc3QgYWxsQnV0dG9ucyA9IEFycmF5LmZyb20obmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignLm5hdi1hY3Rpb24tYnV0dG9uJykpO1xyXG5cdFx0XHRjb25zdCBidXR0b25NYXAgPSBuZXcgTWFwPHN0cmluZywgSFRNTEVsZW1lbnQ+KCk7XHJcblxyXG5cdFx0XHQvLyBNYXAgYnV0dG9ucyBieSBJRFxyXG5cdFx0XHRhbGxCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGFyaWFMYWJlbCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSB8fCAnJztcclxuXHRcdFx0XHRjb25zdCBjYW5vbmljYWxOYW1lID0gdGhpcy5nZW5lcmF0ZUNhbm9uaWNhbE5hbWUoYnV0dG9uLCBhcmlhTGFiZWwpO1xyXG5cclxuXHRcdFx0XHQvLyBGb3IgbmF0aXZlIGJ1dHRvbnMsIHVzZSBjYW5vbmljYWwgbmFtZSBkaXJlY3RseVxyXG5cdFx0XHRcdGlmIChjYW5vbmljYWxOYW1lLnN0YXJ0c1dpdGgoJ25hdGl2ZS0nKSkge1xyXG5cdFx0XHRcdFx0YnV0dG9uTWFwLnNldChjYW5vbmljYWxOYW1lLCBidXR0b24pO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoY2Fub25pY2FsTmFtZS5zdGFydHNXaXRoKCdjdXN0b20tJykpIHtcclxuXHRcdFx0XHRcdGJ1dHRvbk1hcC5zZXQoY2Fub25pY2FsTmFtZSwgYnV0dG9uKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gRm9yIGV4dGVybmFsIGJ1dHRvbnMsIHRyeSB0byBtYXRjaCBieSBJRFxyXG5cdFx0XHRcdFx0Y29uc3Qgc2F2ZWRJdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQnV0dG9uSXRlbXMgfHwgW107XHJcblx0XHRcdFx0XHRjb25zdCBtYXRjaGluZ0l0ZW0gPSBzYXZlZEl0ZW1zLmZpbmQoaXRlbSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChpdGVtLmlkID09PSBjYW5vbmljYWxOYW1lKSByZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0aWYgKGl0ZW0uaWQuc3RhcnRzV2l0aChjYW5vbmljYWxOYW1lICsgJzsnKSkgcmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHRcdC8vIE1hdGNoIGJ5IGFyaWEtbGFiZWwgaWYgSUQgZG9lc24ndCBtYXRjaFxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gaXRlbS5hcmlhTGFiZWwgPT09IGFyaWFMYWJlbCAmJiBpdGVtLnR5cGUgPT09ICdleHRlcm5hbCc7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGlmIChtYXRjaGluZ0l0ZW0pIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uTWFwLnNldChtYXRjaGluZ0l0ZW0uaWQsIGJ1dHRvbik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFJlb3JkZXIgYmFzZWQgb24gc2V0dGluZ3NcclxuXHRcdFx0Y29uc3Qgb3JkZXJlZEJ1dHRvbnM6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHRcdFx0Y29uc3QgaXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckJ1dHRvbkl0ZW1zIHx8IFtdO1xyXG5cclxuXHRcdFx0Ly8gRmlyc3QsIGhhbmRsZSBoaWRkZW4gYnV0dG9ucyAoaGlkZSB0aGVtIHdpdGggQ1NTKVxyXG5cdFx0XHRpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0uaGlkZGVuKSB7XHJcblx0XHRcdFx0XHRjb25zdCBidXR0b24gPSBidXR0b25NYXAuZ2V0KGl0ZW0uaWQpO1xyXG5cdFx0XHRcdFx0aWYgKGJ1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LmFkZCgndWktdHdlYWtlci1leHBsb3Jlci1idXR0b24taGlkZGVuJyk7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbk1hcC5kZWxldGUoaXRlbS5pZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFRoZW4gaGFuZGxlIHZpc2libGUgYnV0dG9uc1xyXG5cdFx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcclxuXHRcdFx0XHRpZiAoaXRlbS5oaWRkZW4pIGNvbnRpbnVlO1xyXG5cclxuXHRcdFx0XHRjb25zdCBidXR0b24gPSBidXR0b25NYXAuZ2V0KGl0ZW0uaWQpO1xyXG5cdFx0XHRcdGlmIChidXR0b24pIHtcclxuXHRcdFx0XHRcdC8vIFJlbW92ZSBoaWRkZW4gY2xhc3MgaWYgaXQgd2FzIHByZXZpb3VzbHkgaGlkZGVuXHJcblx0XHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1leHBsb3Jlci1idXR0b24taGlkZGVuJyk7XHJcblx0XHRcdFx0XHRvcmRlcmVkQnV0dG9ucy5wdXNoKGJ1dHRvbik7XHJcblx0XHRcdFx0XHRidXR0b25NYXAuZGVsZXRlKGl0ZW0uaWQpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xyXG5cdFx0XHRcdFx0Ly8gUmVjcmVhdGUgY3VzdG9tIGNvbW1hbmQgYnV0dG9uXHJcblx0XHRcdFx0XHRjb25zdCBjb21tYW5kUGFpciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChjID0+IGMuaWQgPT09IGl0ZW0uY29tbWFuZElkKTtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kUGFpcikge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBuZXdCdXR0b24gPSB0aGlzLmNyZWF0ZU9yVXBkYXRlRXhwbG9yZXJCdXR0b24obmF2QnV0dG9uc0NvbnRhaW5lciwgY29tbWFuZFBhaXIsIGxlYWYpO1xyXG5cdFx0XHRcdFx0XHRpZiAobmV3QnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdFx0b3JkZXJlZEJ1dHRvbnMucHVzaChuZXdCdXR0b24pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgYnV0dG9ucyB0aGF0IGFyZSBubyBsb25nZXIgaW4gc2V0dGluZ3MgKGV4Y2VwdCBuYXRpdmUgYW5kIGV4dGVybmFsKVxyXG5cdFx0XHRidXR0b25NYXAuZm9yRWFjaCgoYnV0dG9uLCBpZCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBpdGVtcy5maW5kKGkgPT4gaS5pZCA9PT0gaWQpO1xyXG5cdFx0XHRcdGlmICghaXRlbSAmJiAhaWQuc3RhcnRzV2l0aCgnbmF0aXZlLScpICYmICFpZC5zdGFydHNXaXRoKCdleHRlcm5hbC0nKSkge1xyXG5cdFx0XHRcdFx0YnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBQaHlzaWNhbGx5IHJlb3JkZXIgRE9NIGVsZW1lbnRzXHJcblx0XHRcdG9yZGVyZWRCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGlmIChidXR0b24ucGFyZW50RWxlbWVudCA9PT0gbmF2QnV0dG9uc0NvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0bmF2QnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBBcHBseSBuYXRpdmUgaWNvbiBvdmVycmlkZXNcclxuXHRcdFx0dGhpcy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlY29ubmVjdCBvYnNlcnZlcnMgYWZ0ZXIgYSBkZWxheSB0byBhbGxvdyBET00gdG8gc2V0dGxlXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy5pc1Jlb3JkZXJpbmcgPSBmYWxzZTtcclxuXHRcdFx0Ly8gQ2xlYXIgb2xkIG9ic2VydmVycyBhcnJheSAodGhleSdyZSBhbHJlYWR5IGRpc2Nvbm5lY3RlZClcclxuXHRcdFx0dGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuXHRcdFx0Ly8gUmVjb25uZWN0IG9ic2VydmVyc1xyXG5cdFx0XHR0aGlzLnNldHVwTXV0YXRpb25PYnNlcnZlcigpO1xyXG5cdFx0fSwgMjAwKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBidXR0b24gdG9nZ2xlIHN0YXRlIChpY29uIG9yIGlzLWFjdGl2ZSBjbGFzcylcclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbjogSFRNTEVsZW1lbnQsIHBhaXI6IENvbW1hbmRJY29uUGFpcik6IHZvaWQge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdG9nZ2xlIGlzIGNvbmZpZ3VyZWRcclxuXHRcdC8vIElmIHVzZUFjdGl2ZUNsYXNzIGlzIHRydWUsIHdlIHN0aWxsIG5lZWQgdG8gY2hlY2sgdG9nZ2xlIHN0YXRlIGV2ZW4gd2l0aG91dCB0b2dnbGVJY29uXHJcblx0XHRpZiAoIXBhaXIudG9nZ2xlSWNvbiAmJiAhcGFpci51c2VBY3RpdmVDbGFzcykge1xyXG5cdFx0XHQvLyBObyB0b2dnbGUgY29uZmlndXJlZCAtIHVzZSBkZWZhdWx0IGljb25cclxuXHRcdFx0YnV0dG9uLmVtcHR5KCk7XHJcblx0XHRcdHNldEljb24oYnV0dG9uLCBwYWlyLmljb24pO1xyXG5cdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcblx0XHRcdC8vIEFwcGx5IGNvbG9yIG9ubHkgaWYgY3VzdG9tIGNvbG9yIGlzIHNldCAobm90IGJsYWNrL2RlZmF1bHQpXHJcblx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xyXG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS5jb2xvciA9IHBhaXIuY29sb3I7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBjb21tYW5kIGlzIGN1cnJlbnRseSB0b2dnbGVkIG9uXHJcblx0XHRjb25zdCBpc0NoZWNrZWQgPSBpc0NvbW1hbmRDaGVja2VkKHBhaXIuaWQsIHRoaXMucGx1Z2luKTtcclxuXHJcblx0XHRpZiAocGFpci51c2VBY3RpdmVDbGFzcykge1xyXG5cdFx0XHQvLyBVc2UgaXMtYWN0aXZlIGNsYXNzIGluc3RlYWQgb2YgaWNvbiBzd2FwXHJcblx0XHRcdC8vIE9ubHkgdXBkYXRlIGljb24gaWYgaXQncyBkaWZmZXJlbnQgKHRvIGF2b2lkIHVubmVjZXNzYXJ5IERPTSBtYW5pcHVsYXRpb24pXHJcblx0XHRcdGNvbnN0IGN1cnJlbnRJY29uID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5zdmctaWNvbicpO1xyXG5cdFx0XHRjb25zdCBpY29uTmFtZSA9IHBhaXIuaWNvbi5yZXBsYWNlKCdsdWNpZGUtJywgJycpO1xyXG5cdFx0XHRpZiAoIWN1cnJlbnRJY29uIHx8ICFjdXJyZW50SWNvbi5jbGFzc0xpc3QuY29udGFpbnMoaWNvbk5hbWUpKSB7XHJcblx0XHRcdFx0YnV0dG9uLmVtcHR5KCk7XHJcblx0XHRcdFx0c2V0SWNvbihidXR0b24sIHBhaXIuaWNvbik7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSBpcy1hY3RpdmUgY2xhc3MgYmFzZWQgb24gdG9nZ2xlIHN0YXRlXHJcblx0XHRcdGlmIChpc0NoZWNrZWQpIHtcclxuXHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKHBhaXIudG9nZ2xlSWNvbikge1xyXG5cdFx0XHQvLyBTd2FwIGljb24gYmFzZWQgb24gdG9nZ2xlIHN0YXRlIChvbmx5IGlmIHRvZ2dsZUljb24gaXMgc2V0KVxyXG5cdFx0XHRidXR0b24uZW1wdHkoKTtcclxuXHRcdFx0c2V0SWNvbihidXR0b24sIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbik7XHJcblx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBcHBseSBjb2xvciBvbmx5IGlmIGN1c3RvbSBjb2xvciBpcyBzZXQgKG5vdCBibGFjay9kZWZhdWx0KVxyXG5cdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XHJcblx0XHRcdGJ1dHRvbi5zdHlsZS5jb2xvciA9IHBhaXIuY29sb3I7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRidXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgYnV0dG9uIG5hbWVzL3Rvb2x0aXBzIGZvciBhbGwgZXhpc3RpbmcgYnV0dG9uc1xyXG5cdCAqL1xyXG5cdHB1YmxpYyB1cGRhdGVCdXR0b25OYW1lcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRleHBsb3JlcnMuZm9yRWFjaCgobGVhZikgPT4ge1xyXG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoIW5hdkJ1dHRvbnNDb250YWluZXIpIHJldHVybjtcclxuXHJcblx0XHRcdGZvciAoY29uc3QgcGFpciBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSB7XHJcblx0XHRcdFx0Y29uc3QgYnV0dG9uID0gbmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGlmIChidXR0b24pIHtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwYWlyLm5hbWUpO1xyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhcyB3ZWxsXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBhbGwgYnV0dG9ucyBmb3IgYSBzcGVjaWZpYyBjb21tYW5kIElEIGFjcm9zcyBhbGwgZXhwbG9yZXJzXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1cGRhdGVBbGxCdXR0b25zRm9yQ29tbWFuZChjb21tYW5kSWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcGFpciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChwID0+IHAuaWQgPT09IGNvbW1hbmRJZCk7XHJcblx0XHRpZiAoIXBhaXIpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHRjb25zdCBidXR0b24gPSBuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke2NvbW1hbmRJZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKGJ1dHRvbikge1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRvZ2dsZSBzdGF0ZXMgZm9yIGFsbCBidXR0b25zXHJcblx0ICovXHJcblx0cHVibGljIHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTogdm9pZCB7XHJcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xyXG5cdFx0ZXhwbG9yZXJzLmZvckVhY2goKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0XHRmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykge1xyXG5cdFx0XHRcdGNvbnN0IGJ1dHRvbiA9IG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHQvLyBSZWZyZXNoIGlmIHRvZ2dsZUljb24gaXMgc2V0IE9SIGlmIHVzZUFjdGl2ZUNsYXNzIGlzIHRydWUgKGJvdGggbmVlZCBzdGF0ZSB1cGRhdGVzKVxyXG5cdFx0XHRcdGlmIChidXR0b24gJiYgKHBhaXIudG9nZ2xlSWNvbiB8fCBwYWlyLnVzZUFjdGl2ZUNsYXNzKSkge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSBidXR0b24gc3RhdGUgLSB0aGlzIHdpbGwgY2hlY2sgdGhlIGFjdHVhbCBjb21tYW5kIHN0YXRlXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFwcGx5IGljb24gb3ZlcnJpZGVzIHRvIG5hdGl2ZSBleHBsb3JlciBidXR0b25zXHJcblx0ICovXHJcblx0cHVibGljIGFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpOiB2b2lkIHtcclxuXHRcdC8vIE9ic2VydmVycyBhcmUgYWxyZWFkeSBkaXNjb25uZWN0ZWQgZHVyaW5nIHJlb3JkZXIsIHNvIG5vIG5lZWQgdG8gc2V0IGZsYWcgaGVyZVxyXG5cclxuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRjb25zdCBpY29uT3ZlcnJpZGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucztcclxuXHJcblx0XHQvLyBNYXAgb2YgYXJpYS1sYWJlbHMgdG8gZGVmYXVsdCBpY29ucyBhbmQgaWNvbiBrZXlzXHJcblx0XHRjb25zdCBkZWZhdWx0SWNvbnM6IFJlY29yZDxzdHJpbmcsIHsgaWNvbjogc3RyaW5nLCBrZXk6ICduZXdOb3RlJyB8ICduZXdGb2xkZXInIHwgJ3NvcnRPcmRlcicgfCAnYXV0b1JldmVhbCcgfCAnY29sbGFwc2VBbGwnIH0+ID0ge1xyXG5cdFx0XHQnTmV3IG5vdGUnOiB7IGljb246ICdsdWNpZGUtZWRpdCcsIGtleTogJ25ld05vdGUnIH0sXHJcblx0XHRcdCdOZXcgZm9sZGVyJzogeyBpY29uOiAnbHVjaWRlLWZvbGRlci1wbHVzJywga2V5OiAnbmV3Rm9sZGVyJyB9LFxyXG5cdFx0XHQnQ2hhbmdlIHNvcnQgb3JkZXInOiB7IGljb246ICdsdWNpZGUtc29ydC1hc2MnLCBrZXk6ICdzb3J0T3JkZXInIH0sXHJcblx0XHRcdCdBdXRvLXJldmVhbCBjdXJyZW50IGZpbGUnOiB7IGljb246ICdsdWNpZGUtZ2FsbGVyeS12ZXJ0aWNhbCcsIGtleTogJ2F1dG9SZXZlYWwnIH0sXHJcblx0XHRcdCdDb2xsYXBzZSBhbGwnOiB7IGljb246ICdsdWNpZGUtY2hldnJvbnMtdXAtZG93bicsIGtleTogJ2NvbGxhcHNlQWxsJyB9LFxyXG5cdFx0fTtcclxuXHJcblx0XHRleHBsb3JlcnMuZm9yRWFjaCgobGVhZikgPT4ge1xyXG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoIW5hdkJ1dHRvbnNDb250YWluZXIpIHJldHVybjtcclxuXHJcblx0XHRcdC8vIEZpbmQgYWxsIG5hdGl2ZSBidXR0b25zICh0aG9zZSB3aXRob3V0IGRhdGEtZXhwbG9yZXItY29tbWFuZC1pZClcclxuXHRcdFx0Y29uc3QgbmF0aXZlQnV0dG9ucyA9IG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5hdi1hY3Rpb24tYnV0dG9uOm5vdChbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkXSknKTtcclxuXHRcdFx0bmF0aXZlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRjb25zdCBhcmlhTGFiZWwgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XHJcblx0XHRcdFx0aWYgKCFhcmlhTGFiZWwpIHJldHVybjtcclxuXHJcblx0XHRcdFx0Y29uc3QgYnV0dG9uSW5mbyA9IGRlZmF1bHRJY29uc1thcmlhTGFiZWxdO1xyXG5cdFx0XHRcdGlmICghYnV0dG9uSW5mbykgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRjb25zdCBpY29uS2V5ID0gYnV0dG9uSW5mby5rZXk7XHJcblx0XHRcdFx0Y29uc3QgaWNvbk92ZXJyaWRlID0gaWNvbk92ZXJyaWRlcz8uW2ljb25LZXldO1xyXG5cdFx0XHRcdGNvbnN0IGNvbG9yT3ZlcnJpZGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnM7XHJcblx0XHRcdFx0Y29uc3QgY29sb3IgPSBjb2xvck92ZXJyaWRlcz8uW2ljb25LZXldO1xyXG5cclxuXHRcdFx0XHQvLyBBbHdheXMgdXBkYXRlIHRoZSBpY29uIChlaXRoZXIgb3ZlcnJpZGUgb3IgZGVmYXVsdClcclxuXHRcdFx0XHRidXR0b24uZW1wdHkoKTtcclxuXHRcdFx0XHRpZiAoaWNvbk92ZXJyaWRlKSB7XHJcblx0XHRcdFx0XHQvLyBBcHBseSBpY29uIG92ZXJyaWRlXHJcblx0XHRcdFx0XHRzZXRJY29uKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCwgaWNvbk92ZXJyaWRlKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gTm8gaWNvbiBvdmVycmlkZSAtIHJlc3RvcmUgZGVmYXVsdCBpY29uXHJcblx0XHRcdFx0XHRzZXRJY29uKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCwgYnV0dG9uSW5mby5pY29uKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEFwcGx5IGNvbG9yIGlmIHNldFxyXG5cdFx0XHRcdGlmIChjb2xvcikge1xyXG5cdFx0XHRcdFx0KGJ1dHRvbiBhcyBIVE1MRWxlbWVudCkuc3R5bGUuY29sb3IgPSBjb2xvcjtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIGlubGluZSBjb2xvciAtIGxldCBkZWZhdWx0IENTUyBoYW5kbGUgaXRcclxuXHRcdFx0XHRcdChidXR0b24gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSBhIGNvbW1hbmQgZnJvbSBleHBsb3JlclxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhc3luYyByZW1vdmVDb21tYW5kKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSByZXR1cm47XHJcblx0XHRjb25zdCBpbmRleCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcclxuXHRcdGlmIChpbmRleCA+IC0xKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdH1cclxuXHRcdHRoaXMucmVvcmRlcigpO1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCdXR0b25SZXBsYWNlck9wdGlvbnMge1xyXG4gICAgc3Vydml2YWxPYnNlcnZlcj86IGJvb2xlYW47XHJcbiAgICBwYXJlbnRTZWxlY3Rvcj86IHN0cmluZztcclxuICAgIGljb25TZWxlY3Rvcj86IHN0cmluZztcclxuICAgIHVuaXF1ZUlkOiBzdHJpbmc7XHJcbiAgICBjc3NDbGFzczogc3RyaW5nO1xyXG4gICAgb25BZnRlckluc3RhbGw/OiAoY3VzdG9tQnV0dG9uOiBIVE1MRWxlbWVudCwgb3JpZ2luYWxCdXR0b246IEhUTUxFbGVtZW50IHwgbnVsbCkgPT4gdm9pZDtcclxuICAgIG9uQmVmb3JlVW5pbnN0YWxsPzogKGN1c3RvbUJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsKSA9PiB2b2lkO1xyXG4gICAgdXNlQ2FwdHVyZT86IGJvb2xlYW47XHJcbiAgICBoYW5kbGVUb3VjaD86IGJvb2xlYW47XHJcbiAgICAvLyBGdW5jdGlvbiB0byBmaW5kIHRoZSBvcmlnaW5hbCBidXR0b24gaWYgc2VsZWN0b3IgaXMgbm90IGVub3VnaFxyXG4gICAgZmluZEJ1dHRvbj86IChwYXJlbnQ6IEVsZW1lbnQpID0+IEhUTUxFbGVtZW50IHwgbnVsbDtcclxuICAgIHN0cmlwQ2xhc3Nlcz86IHN0cmluZ1tdO1xyXG4gICAgZmFsbGJhY2tQYXJlbnRTZWxlY3Rvcj86IHN0cmluZztcclxuICAgIGZhbGxiYWNrSW5zZXJ0QmVoYXZpb3I/OiAnc3RhcnQnIHwgJ2VuZCc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b25SZXBsYWNlciB7XHJcbiAgICBwcml2YXRlIGN1c3RvbUJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgb3JpZ2luYWxCdXR0b246IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIG9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGluc3RhbGxUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHNlbGVjdG9yOiBzdHJpbmcsXHJcbiAgICAgICAgcHJpdmF0ZSByZXBsYWNlbWVudEljb246IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIGNhbGxiYWNrOiAoKSA9PiB2b2lkLFxyXG4gICAgICAgIHByaXZhdGUgb3B0aW9uczogQnV0dG9uUmVwbGFjZXJPcHRpb25zXHJcbiAgICApIHsgfVxyXG5cclxuICAgIGluc3RhbGwoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50cnlJbnN0YWxsKCk7XHJcblxyXG4gICAgICAgIC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxyXG4gICAgICAgIHRoaXMuaW5zdGFsbFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyeUluc3RhbGwoKSwgNTAwKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdXJ2aXZhbE9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBPYnNlcnZlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRyeUluc3RhbGwoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5vcHRpb25zLnBhcmVudFNlbGVjdG9yXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMucGFyZW50U2VsZWN0b3IpXHJcbiAgICAgICAgICAgIDogZG9jdW1lbnQuYm9keTtcclxuXHJcbiAgICAgICAgaWYgKCFwYXJlbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IG9yaWdpbmFsQnRuOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmluZEJ1dHRvbikge1xyXG4gICAgICAgICAgICBvcmlnaW5hbEJ0biA9IHRoaXMub3B0aW9ucy5maW5kQnV0dG9uKHBhcmVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3JpZ2luYWxCdG4gPSBwYXJlbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNlbGVjdG9yKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghb3JpZ2luYWxCdG4pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mYWxsYmFja1BhcmVudFNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyeUZhbGxiYWNrSW5zdGFsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNraXAgaWYgYWxyZWFkeSByZXBsYWNlZCBhbmQgYnV0dG9uIGlzIHN0aWxsIHZhbGlkXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tQnV0dG9uICYmIHRoaXMuY3VzdG9tQnV0dG9uLnBhcmVudEVsZW1lbnQgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmN1c3RvbUJ1dHRvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIG9sZCBjdXN0b20gYnV0dG9uIGlmIGl0IGV4aXN0cyBidXQgaXMgc3RhbGVcclxuICAgICAgICB0aGlzLnJlbW92ZUN1c3RvbUJ1dHRvbigpO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgcmVwbGFjZW1lbnRcclxuICAgICAgICBjb25zdCBjdXN0b21CdXR0b24gPSBvcmlnaW5hbEJ0bi5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY3VzdG9tQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xyXG4gICAgICAgIGN1c3RvbUJ1dHRvbi5zZXRBdHRyaWJ1dGUoYGRhdGEtJHt0aGlzLm9wdGlvbnMudW5pcXVlSWR9YCwgJ3RydWUnKTtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNzc0NsYXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jc3NDbGFzcy5zcGxpdCgnICcpLmZpbHRlcihCb29sZWFuKS5mb3JFYWNoKGNscyA9PiBjdXN0b21CdXR0b24uY2xhc3NMaXN0LmFkZChjbHMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0cmlwIGNsYXNzZXMgdGhhdCBtaWdodCBhZmZlY3QgY29sb3Igb3Igc3RhdGVcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnN0cmlwQ2xhc3Nlcykge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc3RyaXBDbGFzc2VzLmZvckVhY2goY2xzID0+IGN1c3RvbUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGNscykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgaGFuZGxlcnNcclxuICAgICAgICBjdXN0b21CdXR0b24ub25jbGljayA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIFNldCBpY29uXHJcbiAgICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGN1c3RvbUJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKT8ucGFyZW50RWxlbWVudCB8fCBjdXN0b21CdXR0b247XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgb2xkIHN2Z1xyXG4gICAgICAgICAgICBjb25zdCBvbGRTdmcgPSBjdXN0b21CdXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJyk7XHJcbiAgICAgICAgICAgIGlmIChvbGRTdmcpIG9sZFN2Zy5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgIHNldEljb24oaWNvbkNvbnRhaW5lciwgdGhpcy5yZXBsYWNlbWVudEljb24pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW1VJIFR3ZWFrZXJdIEZhaWxlZCB0byBzZXQgaWNvbiAke3RoaXMucmVwbGFjZW1lbnRJY29ufTpgLCBlKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHNldEljb24oaWNvbkNvbnRhaW5lciwgJ3dyZW5jaCcpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZhaWxlZCB0b29cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xpY2sgaGFuZGxlclxyXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoZXZ0OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY3VzdG9tQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlciwgdGhpcy5vcHRpb25zLnVzZUNhcHR1cmUgPz8gdHJ1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5oYW5kbGVUb3VjaCkge1xyXG4gICAgICAgICAgICBjdXN0b21CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGhhbmRsZXIsIHRoaXMub3B0aW9ucy51c2VDYXB0dXJlID8/IHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW5zZXJ0XHJcbiAgICAgICAgb3JpZ2luYWxCdG4ucGFyZW50RWxlbWVudD8uaW5zZXJ0QmVmb3JlKGN1c3RvbUJ1dHRvbiwgb3JpZ2luYWxCdG4pO1xyXG5cclxuICAgICAgICB0aGlzLmN1c3RvbUJ1dHRvbiA9IGN1c3RvbUJ1dHRvbjtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsQnV0dG9uID0gb3JpZ2luYWxCdG47XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub25BZnRlckluc3RhbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uQWZ0ZXJJbnN0YWxsKGN1c3RvbUJ1dHRvbiwgb3JpZ2luYWxCdG4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRyeUZhbGxiYWNrSW5zdGFsbCgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBmYWxsYmFja1BhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmZhbGxiYWNrUGFyZW50U2VsZWN0b3IhKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAoIWZhbGxiYWNrUGFyZW50KSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFNraXAgaWYgYWxyZWFkeSBleGlzdHNcclxuICAgICAgICBpZiAoZmFsbGJhY2tQYXJlbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtJHt0aGlzLm9wdGlvbnMudW5pcXVlSWR9XWApKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGN1c3RvbUJ1dHRvbi5jbGFzc05hbWUgPSBgY2xpY2thYmxlLWljb24gJHt0aGlzLm9wdGlvbnMuY3NzQ2xhc3N9YDtcclxuICAgICAgICBjdXN0b21CdXR0b24uc2V0QXR0cmlidXRlKGBkYXRhLSR7dGhpcy5vcHRpb25zLnVuaXF1ZUlkfWAsICd0cnVlJyk7XHJcblxyXG4gICAgICAgIC8vIFNldCBpY29uXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgc2V0SWNvbihjdXN0b21CdXR0b24sIHRoaXMucmVwbGFjZW1lbnRJY29uKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHNldEljb24oY3VzdG9tQnV0dG9uLCAnd3JlbmNoJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDbGljayBoYW5kbGVyXHJcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IChldnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjdXN0b21CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVyLCB0aGlzLm9wdGlvbnMudXNlQ2FwdHVyZSA/PyB0cnVlKTtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmhhbmRsZVRvdWNoKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlciwgdGhpcy5vcHRpb25zLnVzZUNhcHR1cmUgPz8gdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbnNlcnRcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZhbGxiYWNrSW5zZXJ0QmVoYXZpb3IgPT09ICdzdGFydCcpIHtcclxuICAgICAgICAgICAgZmFsbGJhY2tQYXJlbnQucHJlcGVuZChjdXN0b21CdXR0b24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZhbGxiYWNrUGFyZW50LmFwcGVuZENoaWxkKGN1c3RvbUJ1dHRvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmN1c3RvbUJ1dHRvbiA9IGN1c3RvbUJ1dHRvbjtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsQnV0dG9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vbkFmdGVySW5zdGFsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25BZnRlckluc3RhbGwoY3VzdG9tQnV0dG9uLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdW5pbnN0YWxsKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbGxUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmluc3RhbGxUaW1lb3V0KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YWxsVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcikge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9uQmVmb3JlVW5pbnN0YWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkJlZm9yZVVuaW5zdGFsbCh0aGlzLmN1c3RvbUJ1dHRvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlbW92ZUN1c3RvbUJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxCdXR0b24gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlQ3VzdG9tQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUJ1dHRvbikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21CdXR0b24ucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21CdXR0b24ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21CdXR0b24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xlYW4gdXAgYW55IHN0cmF5IG9uZXNcclxuICAgICAgICBjb25zdCBzdHJheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHt0aGlzLm9wdGlvbnMuY3NzQ2xhc3N9YCk7XHJcbiAgICAgICAgc3RyYXlzLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBPYnNlcnZlcigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcikgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcblxyXG4gICAgICAgIGxldCBtdXRhdGlvbkNvdW50ID0gMDtcclxuICAgICAgICBsZXQgdGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBtdXRhdGlvbkNvdW50Kys7XHJcbiAgICAgICAgICAgIGlmICh0aW1lcikgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XHJcblxyXG4gICAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHN0YXJ0dXAgbW9kZTogMG1zIGRlbGF5IGZvciBmaXJzdCAyMCBtdXRhdGlvbnMgdG8gZW5zdXJlIGluc3RhbnQgc3dhcCBkdXJpbmcgcmVsb2Fkcy5cclxuICAgICAgICAgICAgLy8gQWZ0ZXIgdGhhdCwgdXNlIGEgc21hbGwgZGVib3VuY2UgKDEwMG1zKSBmb3Igb25nb2luZyBzdGFiaWxpdHkuXHJcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gbXV0YXRpb25Db3VudCA8IDIwID8gMCA6IDEwMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZWxheSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cnlJbnN0YWxsKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMudHJ5SW5zdGFsbCgpLCBkZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWx3YXlzIG9ic2VydmUgdGhlIGRvY3VtZW50IGJvZHkgZm9yIG1heGltdW0gcmVsaWFiaWxpdHksIGV2ZW4gaWYgcGFyZW50IHNlbGVjdG9yIGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgbW9uaXRvciBzdXJ2aXZlcyBwYXJlbnQgZWxlbWVudCByZWNyZWF0aW9uLlxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcclxuICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJywgJ3NyYycsICdhcmlhLWxhYmVsJ11cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIFByb3BlcnRpZXMgTWFuYWdlciAtIEluamVjdHMgY3VzdG9tIGljb25zIGFuZCBjb2xvcnMgaW50byBwcm9wZXJ0eSB2aWV3c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IHNldEljb24sIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vdXRpbHMvY3NzVXRpbHMnO1xyXG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0aWVzTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xyXG4gICAgcHJpdmF0ZSBvYnNlcnZlcnM6IE11dGF0aW9uT2JzZXJ2ZXJbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwT2JzZXJ2ZXJzKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBIYW5kbGUgbGF5b3V0IGNoYW5nZXNcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cE9ic2VydmVycygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBjb250ZXh0IG1lbnUgdmlhIGNhcHR1cmUgb24gd2luZG93XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRG9tRXZlbnQod2luZG93LCAnY29udGV4dG1lbnUnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQcm9wZXJ0eU1lbnVBY3Rpb25zKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BFbCA9IHRhcmdldC5jbG9zZXN0KCcubWV0YWRhdGEtcHJvcGVydHknKSB8fCB0YXJnZXQuY2xvc2VzdCgnLmFsbC1wcm9wZXJ0aWVzLWNvbnRhaW5lciAudHJlZS1pdGVtJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ29udGV4dE1lbnUoZXZ0LCBwcm9wRWwgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB7IGNhcHR1cmU6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZWdpc3RlciBjbGVhbnVwXHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLmZvckVhY2gobyA9PiBvLmRpc2Nvbm5lY3QoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9yY2UgYSByZWZyZXNoIG9mIGFsbCBwcm9wZXJ0eSBpY29uc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVmcmVzaCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMobGVhZiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpLnR5cGU7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbWFya2Rvd24nIHx8IHR5cGUgPT09ICdhbGwtcHJvcGVydGllcycgfHwgdHlwZSA9PT0gJ2ZpbGUtcHJvcGVydGllcycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaExlYWYobGVhZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZnJlc2hMZWFmKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gbGVhZi5nZXRWaWV3U3RhdGUoKS50eXBlO1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGxlYWYudmlldy5jb250YWluZXJFbDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdhbGwtcHJvcGVydGllcycpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWxsUHJvcGVydGllc0luQ29udGFpbmVyKGNvbnRhaW5lcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbWFya2Rvd24gb3IgZmlsZS1wcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEZpbGVQcm9wZXJ0aWVzSW5Db250YWluZXIoY29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cE9ic2VydmVycygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycy5mb3JFYWNoKG8gPT4gby5kaXNjb25uZWN0KCkpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcyhsZWFmID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCkudHlwZTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdhbGwtcHJvcGVydGllcycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGxlYWYudmlldy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuYWxsLXByb3BlcnRpZXMtY29udGFpbmVyJykgfHwgbGVhZi52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy52aWV3LWNvbnRlbnQgPiBkaXYnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHRoaXMucmVmcmVzaEFsbFByb3BlcnRpZXNJbkNvbnRhaW5lcihsZWFmLnZpZXcuY29udGFpbmVyRWwpKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lciwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ21hcmtkb3duJyB8fCB0eXBlID09PSAnZmlsZS1wcm9wZXJ0aWVzJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbGVhZi52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1jb250YWluZXInKSB8fCBsZWFmLnZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLm1ldGFkYXRhLXByb3BlcnRpZXMnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHRoaXMucmVmcmVzaEZpbGVQcm9wZXJ0aWVzSW5Db250YWluZXIobGVhZi52aWV3LmNvbnRhaW5lckVsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWZyZXNoQWxsUHJvcGVydGllc0luQ29udGFpbmVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudHJlZS1pdGVtJyk7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGV4dEVsID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcudHJlZS1pdGVtLWlubmVyLXRleHQnKTtcclxuICAgICAgICAgICAgaWYgKCF0ZXh0RWwpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BOYW1lID0gdGV4dEVsLnRleHRDb250ZW50Py50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghcHJvcE5hbWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlYXJjaCBjYXNlLWluc2Vuc2l0aXZlbHlcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3BlcnR5SWNvbkl0ZW1zLmZpbmQoaSA9PiBpLmlkLnRvTG93ZXJDYXNlKCkgPT09IHByb3BOYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy50cmVlLWl0ZW0taWNvbicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGljb25FbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmc/Lmljb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5SWNvbihpY29uRWwgYXMgSFRNTEVsZW1lbnQsIHNldHRpbmcuaWNvbiwgc2V0dGluZy5jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5hZGRDbGFzcygndWktdHdlYWtlci1wcm9wZXJ0eS1jdXN0b20taWNvbicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmhhc0NsYXNzKCd1aS10d2Vha2VyLXByb3BlcnR5LWN1c3RvbS1pY29uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVOYXRpdmVJY29uKGljb25FbCBhcyBIVE1MRWxlbWVudCwgcHJvcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItcHJvcGVydHktY3VzdG9tLWljb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHJlZnJlc2ggdG8gbGV0IE9ic2lkaWFuIHRha2Ugb3ZlclxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclZpZXdVcGRhdGUoY29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVmcmVzaEZpbGVQcm9wZXJ0aWVzSW5Db250YWluZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHByb3BzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXRhZGF0YS1wcm9wZXJ0eScpO1xyXG4gICAgICAgIHByb3BzLmZvckVhY2gocHJvcCA9PiB7XHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZXQgcHJvcGVydHkgbmFtZSBmcm9tIGlucHV0IG9yIHRleHRcclxuICAgICAgICAgICAgY29uc3Qga2V5SW5wdXQgPSBwcm9wLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1wcm9wZXJ0eS1rZXktaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBrZXlUZXh0ID0gcHJvcC5xdWVyeVNlbGVjdG9yKCcubWV0YWRhdGEtcHJvcGVydHkta2V5LXRleHQnKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvcE5hbWUgPSAoa2V5SW5wdXQ/LnZhbHVlIHx8IGtleVRleHQ/LnRleHRDb250ZW50KT8udHJpbSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwcm9wTmFtZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gU2VhcmNoIGNhc2UtaW5zZW5zaXRpdmVseVxyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvcGVydHlJY29uSXRlbXMuZmluZChpID0+IGkuaWQudG9Mb3dlckNhc2UoKSA9PT0gcHJvcE5hbWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGljb25Db250YWluZXIgPSBwcm9wLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1wcm9wZXJ0eS1pY29uJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaWNvbkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmc/Lmljb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5SWNvbihpY29uQ29udGFpbmVyIGFzIEhUTUxFbGVtZW50LCBzZXR0aW5nLmljb24sIHNldHRpbmcuY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3AuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItcHJvcGVydHktY3VzdG9tLWljb24nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcC5oYXNDbGFzcygndWktdHdlYWtlci1wcm9wZXJ0eS1jdXN0b20taWNvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlTmF0aXZlSWNvbihpY29uQ29udGFpbmVyIGFzIEhUTUxFbGVtZW50LCBwcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcC5yZW1vdmVDbGFzcygndWktdHdlYWtlci1wcm9wZXJ0eS1jdXN0b20taWNvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgcmVmcmVzaCB0byBsZXQgT2JzaWRpYW4gdGFrZSBvdmVyXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyVmlld1VwZGF0ZShjb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IG1pbmltYWwgbW9kZSBjb3JyZWN0bHlcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5taW5pbWFsUHJvcGVydHlJY29ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3AuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItcHJvcGVydHktbWluaW1hbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wLnJlbW92ZUNsYXNzKCd1aS10d2Vha2VyLXByb3BlcnR5LW1pbmltYWwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzdG9yZU5hdGl2ZUljb24oZWw6IEhUTUxFbGVtZW50LCBwcm9wTmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcblxyXG4gICAgICAgIC8vIFRyeSB0byByZWFkIGZyb20gb3VyIHNhdmVkIGF0dHJpYnV0ZVxyXG4gICAgICAgIGNvbnN0IHNhdmVkSWNvbiA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLW5hdGl2ZS1pY29uJyk7XHJcbiAgICAgICAgaWYgKHNhdmVkSWNvbikge1xyXG4gICAgICAgICAgICBzZXRJY29uKGVsLCBzYXZlZEljb24pO1xyXG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1uYXRpdmUtaWNvbicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGYWxsYmFjayB0byB0eXBlIGRldGVjdGlvbiBpZiB3ZSBkb24ndCBoYXZlIGl0IHNhdmVkXHJcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuZ2V0UHJvcGVydHlUeXBlKHByb3BOYW1lKTtcclxuICAgICAgICBzZXRJY29uKGVsLCB0aGlzLmdldERlZmF1bHRJY29uKHByb3BOYW1lLCB0eXBlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRQcm9wZXJ0eVR5cGUocHJvcE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgdHlwZU1hbmFnZXIgPSAodGhpcy5wbHVnaW4uYXBwIGFzIGFueSkubWV0YWRhdGFUeXBlTWFuYWdlcjtcclxuICAgICAgICBjb25zdCBsb3dlck5hbWUgPSBwcm9wTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAvLyBIYXJkY29kZWQgb3ZlcnJpZGVzIGZvciBjb21tb24gbmF0aXZlIHByb3BlcnRpZXNcclxuICAgICAgICBpZiAobG93ZXJOYW1lID09PSAndGFncycpIHJldHVybiAnbXVsdGlzZWxlY3QnO1xyXG4gICAgICAgIGlmIChsb3dlck5hbWUgPT09ICdhbGlhc2VzJykgcmV0dXJuICdtdWx0aXNlbGVjdCc7XHJcblxyXG4gICAgICAgIGlmICh0eXBlTWFuYWdlcikge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBhc3NpZ25lZCB0eXBlIGZpcnN0XHJcbiAgICAgICAgICAgIGlmICh0eXBlTWFuYWdlci5nZXRBc3NpZ25lZFR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlTWFuYWdlci5nZXRBc3NpZ25lZFR5cGUocHJvcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IHR5cGVNYW5hZ2VyLnByb3BlcnRpZXMgfHwge307XHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBmaW5kIGV4YWN0IG1hdGNoIG9yIGNhc2UtaW5zZW5zaXRpdmUgbWF0Y2hcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMocHJvcHMpLmZpbmQoayA9PiBrLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChrZXkpIHJldHVybiBwcm9wc1trZXldLnR5cGUgfHwgJ3RleHQnO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgdHlwZXMgbWFwIGRpcmVjdGx5XHJcbiAgICAgICAgICAgIGlmICh0eXBlTWFuYWdlci50eXBlcyAmJiB0eXBlTWFuYWdlci50eXBlc1twcm9wTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlTWFuYWdlci50eXBlc1twcm9wTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICd0ZXh0JztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERlZmF1bHRJY29uKHByb3BOYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgbG93ZXJOYW1lID0gcHJvcE5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgLy8gU3BlY2lhbCBuYW1lZCBwcm9wZXJ0aWVzIGFsd2F5cyB0YWtlIHByZWNlZGVuY2VcclxuICAgICAgICBpZiAobG93ZXJOYW1lID09PSAndGFncycpIHJldHVybiAndGFncyc7XHJcbiAgICAgICAgaWYgKGxvd2VyTmFtZSA9PT0gJ2FsaWFzZXMnKSByZXR1cm4gJ2ZvcndhcmQnO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAndGV4dCc6IHJldHVybiAndGV4dC1hbGlnbi1zdGFydCc7XHJcbiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6IHJldHVybiAnYmluYXJ5JztcclxuICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxyXG4gICAgICAgICAgICBjYXNlICdib29sZWFuJzogcmV0dXJuICdzcXVhcmUtY2hlY2stYmlnJztcclxuICAgICAgICAgICAgY2FzZSAnZGF0ZSc6IHJldHVybiAnY2FsZW5kYXInO1xyXG4gICAgICAgICAgICBjYXNlICdkYXRldGltZSc6IHJldHVybiAnY2xvY2snO1xyXG4gICAgICAgICAgICBjYXNlICdsaXN0JzogcmV0dXJuICdsaXN0JztcclxuICAgICAgICAgICAgY2FzZSAnbXVsdGlzZWxlY3QnOiByZXR1cm4gJ2xpc3QnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ3RleHQtYWxpZ24tc3RhcnQnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZUNvbnRleHRNZW51KGV2dDogTW91c2VFdmVudCwgcHJvcEVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGtleUlucHV0ID0gcHJvcEVsLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1wcm9wZXJ0eS1rZXktaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGtleVRleHQgPSBwcm9wRWwucXVlcnlTZWxlY3RvcignLnRyZWUtaXRlbS1pbm5lci10ZXh0JykgfHwgcHJvcEVsLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhZGF0YS1wcm9wZXJ0eS1rZXktdGV4dCcpO1xyXG4gICAgICAgIGNvbnN0IHByb3BOYW1lID0gKGtleUlucHV0Py52YWx1ZSB8fCBrZXlUZXh0Py50ZXh0Q29udGVudCk/LnRyaW0oKTtcclxuXHJcbiAgICAgICAgaWYgKCFwcm9wTmFtZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBTZWFyY2ggY2FzZS1pbnNlbnNpdGl2ZWx5XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFByb3BOYW1lID0gcHJvcE5hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvcGVydHlJY29uSXRlbXMuZmluZChpID0+IGkuaWQudG9Mb3dlckNhc2UoKSA9PT0gbm9ybWFsaXplZFByb3BOYW1lKTtcclxuXHJcbiAgICAgICAgLy8gUmVzZXQgdGhlIG1lbnUgbWFuYWdlciBmb3IgYSBuZXcgY3ljbGVcclxuICAgICAgICB0aGlzLnBsdWdpbi5tZW51TWFuYWdlci5yZXNldCgpO1xyXG5cclxuICAgICAgICAvLyBRdWV1ZSBvdXIgaXRlbXMgdG8gYmUgYWRkZWQgdG8gdGhlIG5leHQgbWVudSB0aGF0IG9wZW5zICh0aGUgbmF0aXZlIE9ic2lkaWFuIG9uZSlcclxuICAgICAgICB0aGlzLnBsdWdpbi5tZW51TWFuYWdlci5hZGRJdGVtQWZ0ZXIoWydhY3Rpb24uY2hhbmdlVHlwZScsICdhY3Rpb24nXSwgaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoc2V0dGluZz8uaWNvbiA/ICdDaGFuZ2UgaWNvbicgOiAnQWRkIGljb24nKVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBhc3luYyAoaWNvbklkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SXRlbSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3BlcnR5SWNvbkl0ZW1zLmZpbmQoaSA9PiBpLmlkLnRvTG93ZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWRQcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtID0geyBpZDogbm9ybWFsaXplZFByb3BOYW1lIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5wdXNoKGN1cnJlbnRJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5pY29uID0gaWNvbklkIHx8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsZWFudXAgaWYgZW1wdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50SXRlbS5pY29uICYmICFjdXJyZW50SXRlbS5jb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvcGVydHlJY29uSXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5maWx0ZXIoaSA9PiBpLmlkLnRvTG93ZXJDYXNlKCkgIT09IG5vcm1hbGl6ZWRQcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmc/Lmljb24pIHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4ubWVudU1hbmFnZXIuYWRkSXRlbUFmdGVyKFsnYWN0aW9uLmNoYW5nZVR5cGUnLCAnYWN0aW9uJ10sIGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnUmVtb3ZlIGljb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdsdWNpZGUtdHJhc2gnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5maW5kKGkgPT4gaS5pZC50b0xvd2VyQ2FzZSgpID09PSBub3JtYWxpemVkUHJvcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLmljb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRJdGVtLmNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvcGVydHlJY29uSXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9wZXJ0eUljb25JdGVtcy5maWx0ZXIoaSA9PiBpLmlkLnRvTG93ZXJDYXNlKCkgIT09IG5vcm1hbGl6ZWRQcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRyaWdnZXJWaWV3VXBkYXRlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMobGVhZiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcuY29udGFpbmVyRWwuY29udGFpbnMoY29udGFpbmVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IGxlYWYudmlldyBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVhZi5nZXRWaWV3U3RhdGUoKS50eXBlID09PSAnYWxsLXByb3BlcnRpZXMnICYmIHZpZXcucmVmcmVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YUVkaXRvciA9IHZpZXcubWV0YWRhdGFFZGl0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhRWRpdG9yICYmIG1ldGFkYXRhRWRpdG9yLnJlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUVkaXRvci5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFwcGx5SWNvbihlbDogSFRNTEVsZW1lbnQsIGljb246IHN0cmluZywgY29sb3I/OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAvLyBTYXZlIHRoZSBuYXRpdmUgaWNvbiBCRUZPUkUgd2Ugb3ZlcndyaXRlIGl0LCBpZiBub3QgYWxyZWFkeSBzYXZlZFxyXG4gICAgICAgIGlmICghZWwuaGFzQXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItbmF0aXZlLWljb24nKSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdmcgPSBlbC5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcclxuICAgICAgICAgICAgaWYgKHN2Zykge1xyXG4gICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgbHVjaWRlLSBjbGFzc2VzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsdWNpZGVDbGFzcyA9IEFycmF5LmZyb20oc3ZnLmNsYXNzTGlzdCkuZmluZChjID0+IGMuc3RhcnRzV2l0aCgnbHVjaWRlLScpICYmIGMgIT09ICdsdWNpZGUtaWNvbicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGx1Y2lkZUNsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmF0aXZlTmFtZSA9IGx1Y2lkZUNsYXNzLnJlcGxhY2UoJ2x1Y2lkZS0nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItbmF0aXZlLWljb24nLCBuYXRpdmVOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaXNMdWNpZGUgPSBpY29uLnN0YXJ0c1dpdGgoJ2x1Y2lkZS0nKSB8fCBpY29uLm1hdGNoKC9eW2EtejAtOS1dKyQvKTtcclxuXHJcbiAgICAgICAgaWYgKGlzTHVjaWRlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGljb25OYW1lID0gaWNvbi5zdGFydHNXaXRoKCdsdWNpZGUtJykgPyBpY29uLnN1YnN0cmluZyg3KSA6IGljb247XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJY29uID0gZWwucXVlcnlTZWxlY3RvcihgLmx1Y2lkZS0ke2ljb25OYW1lfWApO1xyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRJY29uKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgc2V0SWNvbihlbCwgaWNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZWwudGV4dENvbnRlbnQgIT09IGljb24pIHtcclxuICAgICAgICAgICAgICAgIGVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IGljb247XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRDbGFzcygndWktdHdlYWtlci1lbW9qaS1pY29uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgICAgICBzZXRDc3NQcm9wcyhlbCwgeyBjb2xvcjogY29sb3IgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBNZW51LCBNZW51SXRlbSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmNlcHRzIGNvbnRleHQgbWVudXMgdG8gYWRkIGN1c3RvbSBpdGVtcy5cclxuICogVXNlcyBhIFByb3h5IG9uIE1lbnUucHJvdG90eXBlLnNob3dBdFBvc2l0aW9uIHRvIGNhdGNoIG1lbnVzIGFzIHRoZXkgb3Blbi5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lbnVNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgbWVudTogTWVudSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBxdWV1ZWRBY3Rpb25zOiAoKCkgPT4gdm9pZClbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzaG93QXRQb3NpdGlvbk9yaWdpbmFsOiB0eXBlb2YgTWVudS5wcm90b3R5cGUuc2hvd0F0UG9zaXRpb247XHJcbiAgICBwcml2YXRlIHNob3dBdFBvc2l0aW9uUHJveHk6IHR5cGVvZiBNZW51LnByb3RvdHlwZS5zaG93QXRQb3NpdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gdGhpcztcclxuXHJcbiAgICAgICAgLy8gU3RvcmUgb3JpZ2luYWwgbWV0aG9kXHJcbiAgICAgICAgdGhpcy5zaG93QXRQb3NpdGlvbk9yaWdpbmFsID0gTWVudS5wcm90b3R5cGUuc2hvd0F0UG9zaXRpb247XHJcblxyXG4gICAgICAgIC8vIENhdGNoIG1lbnVzIGFzIHRoZXkgb3BlblxyXG4gICAgICAgIC8vIFdlIHVzZSBhIHByb3h5IHRvIGludGVyY2VwdCB0aGUgY2FsbCB0byBzaG93QXRQb3NpdGlvblxyXG4gICAgICAgIHRoaXMuc2hvd0F0UG9zaXRpb25Qcm94eSA9IG5ldyBQcm94eShNZW51LnByb3RvdHlwZS5zaG93QXRQb3NpdGlvbiwge1xyXG4gICAgICAgICAgICBhcHBseSh0YXJnZXQsIHRoaXNBcmc6IE1lbnUsIGFyZ0FycmF5OiBhbnlbXSkge1xyXG4gICAgICAgICAgICAgICAgbWFuYWdlci5tZW51ID0gdGhpc0FyZztcclxuICAgICAgICAgICAgICAgIGlmIChtYW5hZ2VyLnF1ZXVlZEFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZXIucnVuUXVldWVkQWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseSh0aGlzQXJnLCBhcmdBcnJheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUmVwbGFjZSBvcmlnaW5hbCBtZXRob2RcclxuICAgICAgICBNZW51LnByb3RvdHlwZS5zaG93QXRQb3NpdGlvbiA9IHRoaXMuc2hvd0F0UG9zaXRpb25Qcm94eTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJ1biBhbGwgYWN0aW9ucyBpbiB0aGUgcXVldWUgb24gdGhlIGN1cnJlbnQgbWVudS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBydW5RdWV1ZWRBY3Rpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbnMgPSB0aGlzLnF1ZXVlZEFjdGlvbnM7XHJcbiAgICAgICAgdGhpcy5xdWV1ZWRBY3Rpb25zID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xyXG4gICAgICAgICAgICBhY3Rpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBtZW51IGl0ZW0gdG8gdGhlIGN1cnJlbnQgbWVudSAob3IgcXVldWUgaXQgaWYgbm8gbWVudSBpcyBvcGVuKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEl0ZW0oY2FsbGJhY2s6IChpdGVtOiBNZW51SXRlbSkgPT4gdm9pZCk6IHRoaXMge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbnUpIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51LmFkZEl0ZW0oY2FsbGJhY2spO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkQWN0aW9ucy5wdXNoKCgpID0+IHRoaXMuYWRkSXRlbShjYWxsYmFjaykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIG1lbnUgaXRlbSBhZnRlciB0aGUgZ2l2ZW4gc2VjdGlvbnMuXHJcbiAgICAgKiBUaGlzIHVzZXMgcHJpdmF0ZSBBUEkgdG8gcmVvcmRlciBzZWN0aW9ucy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEl0ZW1BZnRlcihwcmVTZWN0aW9uczogc3RyaW5nIHwgc3RyaW5nW10sIGNhbGxiYWNrOiAoaXRlbTogTWVudUl0ZW0pID0+IHZvaWQpOiB0aGlzIHtcclxuICAgICAgICBpZiAodGhpcy5tZW51KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJlU2VjdGlvbnMgPT09ICdzdHJpbmcnKSBwcmVTZWN0aW9ucyA9IFtwcmVTZWN0aW9uc107XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNlY3Rpb24gbWFuYWdlbWVudCAoUHJpdmF0ZSBBUEkpXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZW51ID0gdGhpcy5tZW51IGFzIGFueTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JbnRlcm5hbCA9IGl0ZW0gYXMgYW55O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghbWVudSB8fCAhaXRlbUludGVybmFsLnNlY3Rpb24pIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uczogc3RyaW5nW10gPSBtZW51LnNlY3Rpb25zIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNlY3Rpb24gPSBpdGVtSW50ZXJuYWwuc2VjdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwcmVTZWN0aW9uIG9mIHByZVNlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zID0gc2VjdGlvbnMubGFzdEluZGV4T2YocHJlU2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBwb3MgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTW92ZSB0aGUgc2VjdGlvbiB0byB0aGUgZGVzaXJlZCBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbklkeCA9IHNlY3Rpb25zLmluZGV4T2YoY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY3Rpb25JZHggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbnMuc3BsaWNlKHNlY3Rpb25JZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLnNwbGljZShpbmRleCwgMCwgY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZEFjdGlvbnMucHVzaCgoKSA9PiB0aGlzLmFkZEl0ZW1BZnRlcihwcmVTZWN0aW9ucywgY2FsbGJhY2spKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhciB0aGUgcXVldWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmbHVzaCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnF1ZXVlZEFjdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGZvciBhIG5ldyBjeWNsZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWVudSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzdG9yZSBvcmlnaW5hbCBtZXRob2QuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1bmxvYWQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKE1lbnUucHJvdG90eXBlLnNob3dBdFBvc2l0aW9uID09PSB0aGlzLnNob3dBdFBvc2l0aW9uUHJveHkpIHtcclxuICAgICAgICAgICAgTWVudS5wcm90b3R5cGUuc2hvd0F0UG9zaXRpb24gPSB0aGlzLnNob3dBdFBvc2l0aW9uT3JpZ2luYWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUEsSUFBQUEsb0JBQTBGOzs7QUMrR25GLElBQU0sbUJBQStCO0FBQUE7QUFBQSxFQUUzQyxVQUFVO0FBQUEsRUFDVix1QkFBdUI7QUFBQSxFQUN2QixpQkFBaUI7QUFBQSxFQUNqQixnQkFBZ0I7QUFBQSxFQUNoQixpQkFBaUI7QUFBQSxFQUNqQixxQkFBcUI7QUFBQSxFQUNyQixlQUFlO0FBQUEsRUFDZixZQUFZO0FBQUEsRUFDWixnQkFBZ0I7QUFBQTtBQUFBLEVBR2hCLFFBQVE7QUFBQSxFQUNSLHNCQUFzQjtBQUFBLEVBQ3RCLHNCQUFzQjtBQUFBLEVBQ3RCLGVBQWU7QUFBQSxFQUNmLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUFBLEVBQ2pCLGtCQUFrQjtBQUFBLEVBQ2xCLG1CQUFtQjtBQUFBLEVBQ25CLG1CQUFtQjtBQUFBLEVBQ25CLGtCQUFrQjtBQUFBLEVBQ2xCLHNCQUFzQjtBQUFBLEVBQ3RCLGFBQWE7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RjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJ3b3Jrc3BhY2UiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJ2YWx1ZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcnJheU1vdmVNdXRhYmxlIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcnJheU1vdmVNdXRhYmxlIiwgIl9hIiwgImNvbnRyb2xFbCIsICJpY29uQnV0dG9uIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJzdGFibGVDbGFzc2VzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIl9iIl0KfQo=
